import{r as ce}from"./index.DiEladB3.js";var Et={exports:{}},qe={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xt;function rn(){if(Xt)return qe;Xt=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function t(n,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:e,type:n,key:o,ref:i!==void 0?i:null,props:s}}return qe.Fragment=r,qe.jsx=t,qe.jsxs=t,qe}var Wt;function nn(){return Wt||(Wt=1,Et.exports=rn()),Et.exports}var h=nn();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=(...e)=>e.filter((r,t,n)=>!!r&&r.trim()!==""&&n.indexOf(r)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,t,n)=>n?n.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=e=>{const r=an(e);return r.charAt(0).toUpperCase()+r.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var on={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=e=>{for(const r in e)if(r.startsWith("aria-")||r==="role"||r==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=ce.forwardRef(({color:e="currentColor",size:r=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:o,...l},c)=>ce.createElement("svg",{ref:c,...on,width:r,height:r,stroke:e,strokeWidth:n?Number(t)*24/Number(r):t,className:ar("lucide",i),...!s&&!ln(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,m])=>ce.createElement(u,m)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=(e,r)=>{const t=ce.forwardRef(({className:n,...i},s)=>ce.createElement(cn,{ref:s,iconNode:r,className:ar(`lucide-${sn(Zt(e))}`,`lucide-${e}`,n),...i}));return t.displayName=Zt(e),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],fn=Ce("download",un);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],zt=Ce("file-text",pn);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],mn=Ce("play",dn);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Qt=Ce("plus",hn);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Xe=Ce("trash-2",gn);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Kt=Ce("upload",xn);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],er=Ce("x",En),tr={circle:{name:"Circle calculations",expressions:[{name:"radius",expr:"5",mode:"expr"},{name:"pi",expr:"$math.PI",mode:"expr"},{name:"circumference",expr:"2 * pi * radius",mode:"expr"},{name:"area",expr:"pi * radius * radius",mode:"expr"}]},arrayLiterals:{name:"Arrays via value property",expressions:[{name:"data",value:[10,20,30,40,50],mode:"value"},{name:"first",expr:"data[0]",mode:"expr"},{name:"last",expr:"data[4]",mode:"expr"},{name:"sum",expr:"data[0] + data[1] + data[2] + data[3] + data[4]",mode:"expr"},{name:"average",expr:"sum / 5",mode:"expr"}]},objectProperties:{name:"Object properties with dot notation",expressions:[{name:"point",value:{x:10,y:20},mode:"value"},{name:"scaledX",expr:"point.x * 2",mode:"expr"},{name:"scaledY",expr:"point.y * 2",mode:"expr"},{name:"distance",expr:"$math.sqrt(point.x**2 + point.y**2)",mode:"expr"}]},nestedObjects:{name:"Nested objects with dot notation",expressions:[{name:"config",value:{display:{width:1920,height:1080},scale:2},mode:"value"},{name:"scaledWidth",expr:"config.display.width / config.scale",mode:"expr"},{name:"scaledHeight",expr:"config.display.height / config.scale",mode:"expr"},{name:"aspectRatio",expr:"config.display.width / config.display.height",mode:"expr"}]},precision:{name:"Decimal precision",expressions:[{name:"a",expr:"0.1"},{name:"b",expr:"0.2"},{name:"sum",expr:"a + b"}]},trig:{name:"Trigonometry",expressions:[{name:"degrees",expr:"45"},{name:"radians",expr:"$angle.toRad(degrees)"},{name:"sine",expr:"$math.sin(radians)"},{name:"cosine",expr:"$math.cos(radians)"}]},mathConstants:{name:"$math - Constants",expressions:[{name:"pi",expr:"$math.PI"},{name:"e",expr:"$math.E"},{name:"sqrt2",expr:"$math.SQRT2"},{name:"ln2",expr:"$math.LN2"},{name:"log2e",expr:"$math.LOG2E"}]},mathBasic:{name:"$math - Basic functions",expressions:[{name:"absVal",expr:"$math.abs(-42)"},{name:"sqrtVal",expr:"$math.sqrt(144)"},{name:"cbrtVal",expr:"$math.cbrt(27)"},{name:"floorVal",expr:"$math.floor(4.9)"},{name:"ceilVal",expr:"$math.ceil(4.1)"},{name:"roundVal",expr:"$math.round(4.5)"}]},mathAdvanced:{name:"$math - Powers & logs",expressions:[{name:"base",expr:"2"},{name:"exponent",expr:"10"},{name:"power",expr:"$math.pow(base, exponent)"},{name:"log2",expr:"$math.log2(power)"},{name:"ln",expr:"$math.ln($math.E)"},{name:"log10",expr:"$math.log10(1000)"}]},mathMinMax:{name:"$math - Min/Max with arrays",expressions:[{name:"values",value:[42,17,99,8],mode:"value"},{name:"minVal",expr:"$math.min(values[0], values[1], values[2], values[3])",mode:"expr"},{name:"maxVal",expr:"$math.max(values[0], values[1], values[2], values[3])",mode:"expr"},{name:"range",expr:"maxVal - minVal",mode:"expr"}]},trigAdvanced:{name:"$math - Advanced trig",expressions:[{name:"angle",expr:"30"},{name:"rad",expr:"$angle.toRad(angle)"},{name:"tanVal",expr:"$math.tan(rad)"},{name:"atanVal",expr:"$math.atan(tanVal)"},{name:"backToDeg",expr:"$angle.toDeg(atanVal)"}]},unitLength:{name:"$unit - Length conversions",expressions:[{name:"mm",expr:"25.4"},{name:"inches",expr:"$unit.mmToInch(mm)"},{name:"cm",expr:"mm / 10"},{name:"inchesFromCm",expr:"$unit.cmToInch(cm)"},{name:"meters",expr:"1"},{name:"feet",expr:"$unit.mToFt(meters)"}]},unitRoundTrip:{name:"$unit - Round-trip test",expressions:[{name:"original",expr:"100"},{name:"toInch",expr:"$unit.mmToInch(original)"},{name:"backToMm",expr:"$unit.inchToMm(toInch)"},{name:"difference",expr:"backToMm - original"}]},angleConversions:{name:"$angle - Conversions",expressions:[{name:"deg0",expr:"0"},{name:"deg90",expr:"90"},{name:"deg180",expr:"180"},{name:"deg360",expr:"360"},{name:"rad90",expr:"$angle.toRad(deg90)"},{name:"rad180",expr:"$angle.toRad(deg180)"},{name:"backTo180",expr:"$angle.toDeg(rad180)"}]},pythagorean:{name:"Pythagorean theorem",expressions:[{name:"a",expr:"3"},{name:"b",expr:"4"},{name:"aSquared",expr:"$math.pow(a, 2)"},{name:"bSquared",expr:"$math.pow(b, 2)"},{name:"cSquared",expr:"aSquared + bSquared"},{name:"c",expr:"$math.sqrt(cSquared)"}]},compoundInterest:{name:"Compound interest",expressions:[{name:"principal",expr:"1000"},{name:"rate",expr:"0.05"},{name:"years",expr:"10"},{name:"e",expr:"$math.E"},{name:"amount",expr:"principal * $math.pow(e, rate * years)"},{name:"interest",expr:"amount - principal"}]},nestedArrays:{name:"Nested arrays (matrices)",expressions:[{name:"matrix",value:[[1,2,3],[4,5,6],[7,8,9]],mode:"value"},{name:"topLeft",expr:"matrix[0][0]",mode:"expr"},{name:"center",expr:"matrix[1][1]",mode:"expr"},{name:"bottomRight",expr:"matrix[2][2]",mode:"expr"},{name:"diagonal",expr:"topLeft + center + bottomRight",mode:"expr"}]},stressDependencies:{name:"Stress test - Dependencies",expressions:[{name:"a",expr:"1"},{name:"b",expr:"a + 1"},{name:"c",expr:"b + 1"},{name:"d",expr:"c + 1"},{name:"e",expr:"d + 1"},{name:"f",expr:"e + 1"},{name:"g",expr:"f + 1"},{name:"h",expr:"g + 1"},{name:"i",expr:"h + 1"},{name:"j",expr:"i + 1"},{name:"sum",expr:"a + b + c + d + e + f + g + h + i + j"}]},stressMath:{name:"Stress test - Math ops",expressions:[{name:"n",expr:"1000000"},{name:"sqrt",expr:"$math.sqrt(n)"},{name:"log",expr:"$math.log10(n)"},{name:"power",expr:"$math.pow(sqrt, 2)"},{name:"nested",expr:"$math.sqrt($math.sqrt($math.sqrt(n)))"},{name:"combo",expr:"$math.max(sqrt, log, $math.min(power, nested))"}]},orderIndependent1:{name:"Order independence - Basic",expressions:[{name:"result",expr:"a + b + c"},{name:"c",expr:"30"},{name:"a",expr:"10"},{name:"b",expr:"20"}]},orderIndependent2:{name:"Order independence - Complex",expressions:[{name:"final",expr:"step3 * 2"},{name:"step1",expr:"base + 5"},{name:"step3",expr:"step2 + step1"},{name:"base",expr:"10"},{name:"step2",expr:"base * 2"}]},orderIndependent3:{name:"Order independence - Mixed",expressions:[{name:"total",expr:"subtotal + tax"},{name:"subtotal",expr:"price * quantity"},{name:"quantity",expr:"5"},{name:"tax",expr:"subtotal * taxRate"},{name:"price",expr:"19.99"},{name:"taxRate",expr:"0.08"}]},booleanSlope:{name:"Boolean - Is it steep?",expressions:[{name:"rise",expr:"15"},{name:"run",expr:"20"},{name:"slope",expr:"rise / run"},{name:"isSteep",expr:"slope > 0.5"},{name:"label",expr:"isSteep ? slope : null"}]},booleanComparisons:{name:"Boolean - Comparisons",expressions:[{name:"a",expr:"10"},{name:"b",expr:"20"},{name:"less",expr:"a < b"},{name:"greater",expr:"a > b"},{name:"equal",expr:"a = b"},{name:"notEqual",expr:"a != b"}]},booleanLogic:{name:"Boolean - Logical ops",expressions:[{name:"x",expr:"15"},{name:"inRange",expr:"x > 10 && x < 20"},{name:"outOfRange",expr:"x < 10 || x > 20"},{name:"valid",expr:"!outOfRange"}]},equalityOperators:{name:"Equality - Single & double",expressions:[{name:"x",expr:"5"},{name:"y",expr:"5"},{name:"z",expr:"10"},{name:"singleEq",expr:"x = y"},{name:"doubleEq",expr:"x == y"},{name:"calculated",expr:"(x + 5) = z"}]},reservedValues:{name:"Reserved values in action",expressions:[{name:"enabled",expr:"true"},{name:"disabled",expr:"false"},{name:"missing",expr:"null"},{name:"result",expr:"enabled && !disabled"},{name:"fallback",expr:"missing ?? 42"}]},ternaryBoolean:{name:"Ternary with boolean branches",expressions:[{name:"score",expr:"85"},{name:"passed",expr:"score >= 60 ? true : false"},{name:"grade",expr:"score >= 90 ? 100 : score"},{name:"bonus",expr:"score >= 90 ? 10 : null"}]}};/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Me=9e15,$e=1e9,Nt="0123456789abcdef",Qe="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Ke="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",At={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Me,maxE:Me,crypto:!1},or,ve,D=!0,tt="[DecimalError] ",Ie=tt+"Invalid argument: ",lr=tt+"Precision limit exceeded",cr=tt+"crypto unavailable",ur="[object Decimal]",le=Math.floor,re=Math.pow,Nn=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,An=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,_n=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,fr=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,de=1e7,L=7,wn=9007199254740991,Rn=Qe.length-1,_t=Ke.length-1,w={toStringTag:ur};w.absoluteValue=w.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),P(e)};w.ceil=function(){return P(new this.constructor(this),this.e+1,2)};w.clampedTo=w.clamp=function(e,r){var t,n=this,i=n.constructor;if(e=new i(e),r=new i(r),!e.s||!r.s)return new i(NaN);if(e.gt(r))throw Error(Ie+r);return t=n.cmp(e),t<0?e:n.cmp(r)>0?r:new i(n)};w.comparedTo=w.cmp=function(e){var r,t,n,i,s=this,o=s.d,l=(e=new s.constructor(e)).d,c=s.s,u=e.s;if(!o||!l)return!c||!u?NaN:c!==u?c:o===l?0:!o^c<0?1:-1;if(!o[0]||!l[0])return o[0]?c:l[0]?-u:0;if(c!==u)return c;if(s.e!==e.e)return s.e>e.e^c<0?1:-1;for(n=o.length,i=l.length,r=0,t=n<i?n:i;r<t;++r)if(o[r]!==l[r])return o[r]>l[r]^c<0?1:-1;return n===i?0:n>i^c<0?1:-1};w.cosine=w.cos=function(){var e,r,t=this,n=t.constructor;return t.d?t.d[0]?(e=n.precision,r=n.rounding,n.precision=e+Math.max(t.e,t.sd())+L,n.rounding=1,t=vn(n,gr(n,t)),n.precision=e,n.rounding=r,P(ve==2||ve==3?t.neg():t,e,r,!0)):new n(1):new n(NaN)};w.cubeRoot=w.cbrt=function(){var e,r,t,n,i,s,o,l,c,u,m=this,E=m.constructor;if(!m.isFinite()||m.isZero())return new E(m);for(D=!1,s=m.s*re(m.s*m,1/3),!s||Math.abs(s)==1/0?(t=ie(m.d),e=m.e,(s=(e-t.length+1)%3)&&(t+=s==1||s==-2?"0":"00"),s=re(t,1/3),e=le((e+1)/3)-(e%3==(e<0?-1:2)),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new E(t),n.s=m.s):n=new E(s.toString()),o=(e=E.precision)+3;;)if(l=n,c=l.times(l).times(l),u=c.plus(m),n=W(u.plus(m).times(l),u.plus(c),o+2,1),ie(l.d).slice(0,o)===(t=ie(n.d)).slice(0,o))if(t=t.slice(o-3,o+1),t=="9999"||!i&&t=="4999"){if(!i&&(P(l,e+1,0),l.times(l).times(l).eq(m))){n=l;break}o+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(P(n,e+1,1),r=!n.times(n).times(n).eq(m));break}return D=!0,P(n,e,E.rounding,r)};w.decimalPlaces=w.dp=function(){var e,r=this.d,t=NaN;if(r){if(e=r.length-1,t=(e-le(this.e/L))*L,e=r[e],e)for(;e%10==0;e/=10)t--;t<0&&(t=0)}return t};w.dividedBy=w.div=function(e){return W(this,new this.constructor(e))};w.dividedToIntegerBy=w.divToInt=function(e){var r=this,t=r.constructor;return P(W(r,new t(e),0,1,1),t.precision,t.rounding)};w.equals=w.eq=function(e){return this.cmp(e)===0};w.floor=function(){return P(new this.constructor(this),this.e+1,3)};w.greaterThan=w.gt=function(e){return this.cmp(e)>0};w.greaterThanOrEqualTo=w.gte=function(e){var r=this.cmp(e);return r==1||r===0};w.hyperbolicCosine=w.cosh=function(){var e,r,t,n,i,s=this,o=s.constructor,l=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return l;t=o.precision,n=o.rounding,o.precision=t+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<32?(e=Math.ceil(i/3),r=(1/nt(4,e)).toString()):(e=16,r="2.3283064365386962890625e-10"),s=Be(o,1,s.times(r),new o(1),!0);for(var c,u=e,m=new o(8);u--;)c=s.times(s),s=l.minus(c.times(m.minus(c.times(m))));return P(s,o.precision=t,o.rounding=n,!0)};w.hyperbolicSine=w.sinh=function(){var e,r,t,n,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(r=s.precision,t=s.rounding,s.precision=r+Math.max(i.e,i.sd())+4,s.rounding=1,n=i.d.length,n<3)i=Be(s,2,i,i,!0);else{e=1.4*Math.sqrt(n),e=e>16?16:e|0,i=i.times(1/nt(5,e)),i=Be(s,2,i,i,!0);for(var o,l=new s(5),c=new s(16),u=new s(20);e--;)o=i.times(i),i=i.times(l.plus(o.times(c.times(o).plus(u))))}return s.precision=r,s.rounding=t,P(i,r,t,!0)};w.hyperbolicTangent=w.tanh=function(){var e,r,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(e=n.precision,r=n.rounding,n.precision=e+7,n.rounding=1,W(t.sinh(),t.cosh(),n.precision=e,n.rounding=r)):new n(t.s)};w.inverseCosine=w.acos=function(){var e=this,r=e.constructor,t=e.abs().cmp(1),n=r.precision,i=r.rounding;return t!==-1?t===0?e.isNeg()?ge(r,n,i):new r(0):new r(NaN):e.isZero()?ge(r,n+4,i).times(.5):(r.precision=n+6,r.rounding=1,e=new r(1).minus(e).div(e.plus(1)).sqrt().atan(),r.precision=n,r.rounding=i,e.times(2))};w.inverseHyperbolicCosine=w.acosh=function(){var e,r,t=this,n=t.constructor;return t.lte(1)?new n(t.eq(1)?0:NaN):t.isFinite()?(e=n.precision,r=n.rounding,n.precision=e+Math.max(Math.abs(t.e),t.sd())+4,n.rounding=1,D=!1,t=t.times(t).minus(1).sqrt().plus(t),D=!0,n.precision=e,n.rounding=r,t.ln()):new n(t)};w.inverseHyperbolicSine=w.asinh=function(){var e,r,t=this,n=t.constructor;return!t.isFinite()||t.isZero()?new n(t):(e=n.precision,r=n.rounding,n.precision=e+2*Math.max(Math.abs(t.e),t.sd())+6,n.rounding=1,D=!1,t=t.times(t).plus(1).sqrt().plus(t),D=!0,n.precision=e,n.rounding=r,t.ln())};w.inverseHyperbolicTangent=w.atanh=function(){var e,r,t,n,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,r=s.rounding,n=i.sd(),Math.max(n,e)<2*-i.e-1?P(new s(i),e,r,!0):(s.precision=t=n-i.e,i=W(i.plus(1),new s(1).minus(i),t+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=r,i.times(.5))):new s(NaN)};w.inverseSine=w.asin=function(){var e,r,t,n,i=this,s=i.constructor;return i.isZero()?new s(i):(r=i.abs().cmp(1),t=s.precision,n=s.rounding,r!==-1?r===0?(e=ge(s,t+4,n).times(.5),e.s=i.s,e):new s(NaN):(s.precision=t+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=t,s.rounding=n,i.times(2)))};w.inverseTangent=w.atan=function(){var e,r,t,n,i,s,o,l,c,u=this,m=u.constructor,E=m.precision,N=m.rounding;if(u.isFinite()){if(u.isZero())return new m(u);if(u.abs().eq(1)&&E+4<=_t)return o=ge(m,E+4,N).times(.25),o.s=u.s,o}else{if(!u.s)return new m(NaN);if(E+4<=_t)return o=ge(m,E+4,N).times(.5),o.s=u.s,o}for(m.precision=l=E+10,m.rounding=1,t=Math.min(28,l/L+2|0),e=t;e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(D=!1,r=Math.ceil(l/L),n=1,c=u.times(u),o=new m(u),i=u;e!==-1;)if(i=i.times(c),s=o.minus(i.div(n+=2)),i=i.times(c),o=s.plus(i.div(n+=2)),o.d[r]!==void 0)for(e=r;o.d[e]===s.d[e]&&e--;);return t&&(o=o.times(2<<t-1)),D=!0,P(o,m.precision=E,m.rounding=N,!0)};w.isFinite=function(){return!!this.d};w.isInteger=w.isInt=function(){return!!this.d&&le(this.e/L)>this.d.length-2};w.isNaN=function(){return!this.s};w.isNegative=w.isNeg=function(){return this.s<0};w.isPositive=w.isPos=function(){return this.s>0};w.isZero=function(){return!!this.d&&this.d[0]===0};w.lessThan=w.lt=function(e){return this.cmp(e)<0};w.lessThanOrEqualTo=w.lte=function(e){return this.cmp(e)<1};w.logarithm=w.log=function(e){var r,t,n,i,s,o,l,c,u=this,m=u.constructor,E=m.precision,N=m.rounding,v=5;if(e==null)e=new m(10),r=!0;else{if(e=new m(e),t=e.d,e.s<0||!t||!t[0]||e.eq(1))return new m(NaN);r=e.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new m(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(r)if(t.length>1)s=!0;else{for(i=t[0];i%10===0;)i/=10;s=i!==1}if(D=!1,l=E+v,o=ye(u,l),n=r?et(m,l+10):ye(e,l),c=W(o,n,l,1),Ye(c.d,i=E,N))do if(l+=10,o=ye(u,l),n=r?et(m,l+10):ye(e,l),c=W(o,n,l,1),!s){+ie(c.d).slice(i+1,i+15)+1==1e14&&(c=P(c,E+1,0));break}while(Ye(c.d,i+=10,N));return D=!0,P(c,E,N)};w.minus=w.sub=function(e){var r,t,n,i,s,o,l,c,u,m,E,N,v=this,U=v.constructor;if(e=new U(e),!v.d||!e.d)return!v.s||!e.s?e=new U(NaN):v.d?e.s=-e.s:e=new U(e.d||v.s!==e.s?v:NaN),e;if(v.s!=e.s)return e.s=-e.s,v.plus(e);if(u=v.d,N=e.d,l=U.precision,c=U.rounding,!u[0]||!N[0]){if(N[0])e.s=-e.s;else if(u[0])e=new U(v);else return new U(c===3?-0:0);return D?P(e,l,c):e}if(t=le(e.e/L),m=le(v.e/L),u=u.slice(),s=m-t,s){for(E=s<0,E?(r=u,s=-s,o=N.length):(r=N,t=m,o=u.length),n=Math.max(Math.ceil(l/L),o)+2,s>n&&(s=n,r.length=1),r.reverse(),n=s;n--;)r.push(0);r.reverse()}else{for(n=u.length,o=N.length,E=n<o,E&&(o=n),n=0;n<o;n++)if(u[n]!=N[n]){E=u[n]<N[n];break}s=0}for(E&&(r=u,u=N,N=r,e.s=-e.s),o=u.length,n=N.length-o;n>0;--n)u[o++]=0;for(n=N.length;n>s;){if(u[--n]<N[n]){for(i=n;i&&u[--i]===0;)u[i]=de-1;--u[i],u[n]+=de}u[n]-=N[n]}for(;u[--o]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(e.d=u,e.e=rt(u,t),D?P(e,l,c):e):new U(c===3?-0:0)};w.modulo=w.mod=function(e){var r,t=this,n=t.constructor;return e=new n(e),!t.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||t.d&&!t.d[0]?P(new n(t),n.precision,n.rounding):(D=!1,n.modulo==9?(r=W(t,e.abs(),0,3,1),r.s*=e.s):r=W(t,e,0,n.modulo,1),r=r.times(e),D=!0,t.minus(r))};w.naturalExponential=w.exp=function(){return wt(this)};w.naturalLogarithm=w.ln=function(){return ye(this)};w.negated=w.neg=function(){var e=new this.constructor(this);return e.s=-e.s,P(e)};w.plus=w.add=function(e){var r,t,n,i,s,o,l,c,u,m,E=this,N=E.constructor;if(e=new N(e),!E.d||!e.d)return!E.s||!e.s?e=new N(NaN):E.d||(e=new N(e.d||E.s===e.s?E:NaN)),e;if(E.s!=e.s)return e.s=-e.s,E.minus(e);if(u=E.d,m=e.d,l=N.precision,c=N.rounding,!u[0]||!m[0])return m[0]||(e=new N(E)),D?P(e,l,c):e;if(s=le(E.e/L),n=le(e.e/L),u=u.slice(),i=s-n,i){for(i<0?(t=u,i=-i,o=m.length):(t=m,n=s,o=u.length),s=Math.ceil(l/L),o=s>o?s+1:o+1,i>o&&(i=o,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(o=u.length,i=m.length,o-i<0&&(i=o,t=m,m=u,u=t),r=0;i;)r=(u[--i]=u[i]+m[i]+r)/de|0,u[i]%=de;for(r&&(u.unshift(r),++n),o=u.length;u[--o]==0;)u.pop();return e.d=u,e.e=rt(u,n),D?P(e,l,c):e};w.precision=w.sd=function(e){var r,t=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ie+e);return t.d?(r=pr(t.d),e&&t.e+1>r&&(r=t.e+1)):r=NaN,r};w.round=function(){var e=this,r=e.constructor;return P(new r(e),e.e+1,r.rounding)};w.sine=w.sin=function(){var e,r,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(e=n.precision,r=n.rounding,n.precision=e+Math.max(t.e,t.sd())+L,n.rounding=1,t=Tn(n,gr(n,t)),n.precision=e,n.rounding=r,P(ve>2?t.neg():t,e,r,!0)):new n(NaN)};w.squareRoot=w.sqrt=function(){var e,r,t,n,i,s,o=this,l=o.d,c=o.e,u=o.s,m=o.constructor;if(u!==1||!l||!l[0])return new m(!u||u<0&&(!l||l[0])?NaN:l?o:1/0);for(D=!1,u=Math.sqrt(+o),u==0||u==1/0?(r=ie(l),(r.length+c)%2==0&&(r+="0"),u=Math.sqrt(r),c=le((c+1)/2)-(c<0||c%2),u==1/0?r="5e"+c:(r=u.toExponential(),r=r.slice(0,r.indexOf("e")+1)+c),n=new m(r)):n=new m(u.toString()),t=(c=m.precision)+3;;)if(s=n,n=s.plus(W(o,s,t+2,1)).times(.5),ie(s.d).slice(0,t)===(r=ie(n.d)).slice(0,t))if(r=r.slice(t-3,t+1),r=="9999"||!i&&r=="4999"){if(!i&&(P(s,c+1,0),s.times(s).eq(o))){n=s;break}t+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(P(n,c+1,1),e=!n.times(n).eq(o));break}return D=!0,P(n,c,m.rounding,e)};w.tangent=w.tan=function(){var e,r,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(e=n.precision,r=n.rounding,n.precision=e+10,n.rounding=1,t=t.sin(),t.s=1,t=W(t,new n(1).minus(t.times(t)).sqrt(),e+10,0),n.precision=e,n.rounding=r,P(ve==2||ve==4?t.neg():t,e,r,!0)):new n(NaN)};w.times=w.mul=function(e){var r,t,n,i,s,o,l,c,u,m=this,E=m.constructor,N=m.d,v=(e=new E(e)).d;if(e.s*=m.s,!N||!N[0]||!v||!v[0])return new E(!e.s||N&&!N[0]&&!v||v&&!v[0]&&!N?NaN:!N||!v?e.s/0:e.s*0);for(t=le(m.e/L)+le(e.e/L),c=N.length,u=v.length,c<u&&(s=N,N=v,v=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(r=0,i=c+n;i>n;)l=s[i]+v[n]*N[i-n-1]+r,s[i--]=l%de|0,r=l/de|0;s[i]=(s[i]+r)%de|0}for(;!s[--o];)s.pop();return r?++t:s.shift(),e.d=s,e.e=rt(s,t),D?P(e,E.precision,E.rounding):e};w.toBinary=function(e,r){return vt(this,2,e,r)};w.toDecimalPlaces=w.toDP=function(e,r){var t=this,n=t.constructor;return t=new n(t),e===void 0?t:(ue(e,0,$e),r===void 0?r=n.rounding:ue(r,0,8),P(t,e+t.e+1,r))};w.toExponential=function(e,r){var t,n=this,i=n.constructor;return e===void 0?t=xe(n,!0):(ue(e,0,$e),r===void 0?r=i.rounding:ue(r,0,8),n=P(new i(n),e+1,r),t=xe(n,!0,e+1)),n.isNeg()&&!n.isZero()?"-"+t:t};w.toFixed=function(e,r){var t,n,i=this,s=i.constructor;return e===void 0?t=xe(i):(ue(e,0,$e),r===void 0?r=s.rounding:ue(r,0,8),n=P(new s(i),e+i.e+1,r),t=xe(n,!1,e+n.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};w.toFraction=function(e){var r,t,n,i,s,o,l,c,u,m,E,N,v=this,U=v.d,I=v.constructor;if(!U)return new I(v);if(u=t=new I(1),n=c=new I(0),r=new I(n),s=r.e=pr(U)-v.e-1,o=s%L,r.d[0]=re(10,o<0?L+o:o),e==null)e=s>0?r:u;else{if(l=new I(e),!l.isInt()||l.lt(u))throw Error(Ie+l);e=l.gt(r)?s>0?r:u:l}for(D=!1,l=new I(ie(U)),m=I.precision,I.precision=s=U.length*L*2;E=W(l,r,0,1,1),i=t.plus(E.times(n)),i.cmp(e)!=1;)t=n,n=i,i=u,u=c.plus(E.times(i)),c=i,i=r,r=l.minus(E.times(i)),l=i;return i=W(e.minus(t),n,0,1,1),c=c.plus(i.times(u)),t=t.plus(i.times(n)),c.s=u.s=v.s,N=W(u,n,s,1).minus(v).abs().cmp(W(c,t,s,1).minus(v).abs())<1?[u,n]:[c,t],I.precision=m,D=!0,N};w.toHexadecimal=w.toHex=function(e,r){return vt(this,16,e,r)};w.toNearest=function(e,r){var t=this,n=t.constructor;if(t=new n(t),e==null){if(!t.d)return t;e=new n(1),r=n.rounding}else{if(e=new n(e),r===void 0?r=n.rounding:ue(r,0,8),!t.d)return e.s?t:e;if(!e.d)return e.s&&(e.s=t.s),e}return e.d[0]?(D=!1,t=W(t,e,0,r,1).times(e),D=!0,P(t)):(e.s=t.s,t=e),t};w.toNumber=function(){return+this};w.toOctal=function(e,r){return vt(this,8,e,r)};w.toPower=w.pow=function(e){var r,t,n,i,s,o,l=this,c=l.constructor,u=+(e=new c(e));if(!l.d||!e.d||!l.d[0]||!e.d[0])return new c(re(+l,u));if(l=new c(l),l.eq(1))return l;if(n=c.precision,s=c.rounding,e.eq(1))return P(l,n,s);if(r=le(e.e/L),r>=e.d.length-1&&(t=u<0?-u:u)<=wn)return i=dr(c,l,t,n),e.s<0?new c(1).div(i):P(i,n,s);if(o=l.s,o<0){if(r<e.d.length-1)return new c(NaN);if((e.d[r]&1)==0&&(o=1),l.e==0&&l.d[0]==1&&l.d.length==1)return l.s=o,l}return t=re(+l,u),r=t==0||!isFinite(t)?le(u*(Math.log("0."+ie(l.d))/Math.LN10+l.e+1)):new c(t+"").e,r>c.maxE+1||r<c.minE-1?new c(r>0?o/0:0):(D=!1,c.rounding=l.s=1,t=Math.min(12,(r+"").length),i=wt(e.times(ye(l,n+t)),n),i.d&&(i=P(i,n+5,1),Ye(i.d,n,s)&&(r=n+10,i=P(wt(e.times(ye(l,r+t)),r),r+5,1),+ie(i.d).slice(n+1,n+15)+1==1e14&&(i=P(i,n+1,0)))),i.s=o,D=!0,c.rounding=s,P(i,n,s))};w.toPrecision=function(e,r){var t,n=this,i=n.constructor;return e===void 0?t=xe(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(ue(e,1,$e),r===void 0?r=i.rounding:ue(r,0,8),n=P(new i(n),e,r),t=xe(n,e<=n.e||n.e<=i.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+t:t};w.toSignificantDigits=w.toSD=function(e,r){var t=this,n=t.constructor;return e===void 0?(e=n.precision,r=n.rounding):(ue(e,1,$e),r===void 0?r=n.rounding:ue(r,0,8)),P(new n(t),e,r)};w.toString=function(){var e=this,r=e.constructor,t=xe(e,e.e<=r.toExpNeg||e.e>=r.toExpPos);return e.isNeg()&&!e.isZero()?"-"+t:t};w.truncated=w.trunc=function(){return P(new this.constructor(this),this.e+1,1)};w.valueOf=w.toJSON=function(){var e=this,r=e.constructor,t=xe(e,e.e<=r.toExpNeg||e.e>=r.toExpPos);return e.isNeg()?"-"+t:t};function ie(e){var r,t,n,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,r=1;r<i;r++)n=e[r]+"",t=L-n.length,t&&(s+=Se(t)),s+=n;o=e[r],n=o+"",t=L-n.length,t&&(s+=Se(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function ue(e,r,t){if(e!==~~e||e<r||e>t)throw Error(Ie+e)}function Ye(e,r,t,n){var i,s,o,l;for(s=e[0];s>=10;s/=10)--r;return--r<0?(r+=L,i=0):(i=Math.ceil((r+1)/L),r%=L),s=re(10,L-r),l=e[i]%s|0,n==null?r<3?(r==0?l=l/100|0:r==1&&(l=l/10|0),o=t<4&&l==99999||t>3&&l==49999||l==5e4||l==0):o=(t<4&&l+1==s||t>3&&l+1==s/2)&&(e[i+1]/s/100|0)==re(10,r-2)-1||(l==s/2||l==0)&&(e[i+1]/s/100|0)==0:r<4?(r==0?l=l/1e3|0:r==1?l=l/100|0:r==2&&(l=l/10|0),o=(n||t<4)&&l==9999||!n&&t>3&&l==4999):o=((n||t<4)&&l+1==s||!n&&t>3&&l+1==s/2)&&(e[i+1]/s/1e3|0)==re(10,r-3)-1,o}function We(e,r,t){for(var n,i=[0],s,o=0,l=e.length;o<l;){for(s=i.length;s--;)i[s]*=r;for(i[0]+=Nt.indexOf(e.charAt(o++)),n=0;n<i.length;n++)i[n]>t-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/t|0,i[n]%=t)}return i.reverse()}function vn(e,r){var t,n,i;if(r.isZero())return r;n=r.d.length,n<32?(t=Math.ceil(n/3),i=(1/nt(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),e.precision+=t,r=Be(e,1,r.times(i),new e(1));for(var s=t;s--;){var o=r.times(r);r=o.times(o).minus(o).times(8).plus(1)}return e.precision-=t,r}var W=(function(){function e(n,i,s){var o,l=0,c=n.length;for(n=n.slice();c--;)o=n[c]*i+l,n[c]=o%s|0,l=o/s|0;return l&&n.unshift(l),n}function r(n,i,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=i[l]){c=n[l]>i[l]?1:-1;break}return c}function t(n,i,s,o){for(var l=0;s--;)n[s]-=l,l=n[s]<i[s]?1:0,n[s]=l*o+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,o,l,c){var u,m,E,N,v,U,I,J,F,ne,B,X,fe,se,Ee,Ne,me,be,ae,Ae,he=n.constructor,Te=n.s==i.s?1:-1,ee=n.d,V=i.d;if(!ee||!ee[0]||!V||!V[0])return new he(!n.s||!i.s||(ee?V&&ee[0]==V[0]:!V)?NaN:ee&&ee[0]==0||!V?Te*0:Te/0);for(c?(v=1,m=n.e-i.e):(c=de,v=L,m=le(n.e/v)-le(i.e/v)),ae=V.length,me=ee.length,F=new he(Te),ne=F.d=[],E=0;V[E]==(ee[E]||0);E++);if(V[E]>(ee[E]||0)&&m--,s==null?(se=s=he.precision,o=he.rounding):l?se=s+(n.e-i.e)+1:se=s,se<0)ne.push(1),U=!0;else{if(se=se/v+2|0,E=0,ae==1){for(N=0,V=V[0],se++;(E<me||N)&&se--;E++)Ee=N*c+(ee[E]||0),ne[E]=Ee/V|0,N=Ee%V|0;U=N||E<me}else{for(N=c/(V[0]+1)|0,N>1&&(V=e(V,N,c),ee=e(ee,N,c),ae=V.length,me=ee.length),Ne=ae,B=ee.slice(0,ae),X=B.length;X<ae;)B[X++]=0;Ae=V.slice(),Ae.unshift(0),be=V[0],V[1]>=c/2&&++be;do N=0,u=r(V,B,ae,X),u<0?(fe=B[0],ae!=X&&(fe=fe*c+(B[1]||0)),N=fe/be|0,N>1?(N>=c&&(N=c-1),I=e(V,N,c),J=I.length,X=B.length,u=r(I,B,J,X),u==1&&(N--,t(I,ae<J?Ae:V,J,c))):(N==0&&(u=N=1),I=V.slice()),J=I.length,J<X&&I.unshift(0),t(B,I,X,c),u==-1&&(X=B.length,u=r(V,B,ae,X),u<1&&(N++,t(B,ae<X?Ae:V,X,c))),X=B.length):u===0&&(N++,B=[0]),ne[E++]=N,u&&B[0]?B[X++]=ee[Ne]||0:(B=[ee[Ne]],X=1);while((Ne++<me||B[0]!==void 0)&&se--);U=B[0]!==void 0}ne[0]||ne.shift()}if(v==1)F.e=m,or=U;else{for(E=1,N=ne[0];N>=10;N/=10)E++;F.e=E+m*v-1,P(F,l?s+F.e+1:s,o,U)}return F}})();function P(e,r,t,n){var i,s,o,l,c,u,m,E,N,v=e.constructor;e:if(r!=null){if(E=e.d,!E)return e;for(i=1,l=E[0];l>=10;l/=10)i++;if(s=r-i,s<0)s+=L,o=r,m=E[N=0],c=m/re(10,i-o-1)%10|0;else if(N=Math.ceil((s+1)/L),l=E.length,N>=l)if(n){for(;l++<=N;)E.push(0);m=c=0,i=1,s%=L,o=s-L+1}else break e;else{for(m=l=E[N],i=1;l>=10;l/=10)i++;s%=L,o=s-L+i,c=o<0?0:m/re(10,i-o-1)%10|0}if(n=n||r<0||E[N+1]!==void 0||(o<0?m:m%re(10,i-o-1)),u=t<4?(c||n)&&(t==0||t==(e.s<0?3:2)):c>5||c==5&&(t==4||n||t==6&&(s>0?o>0?m/re(10,i-o):0:E[N-1])%10&1||t==(e.s<0?8:7)),r<1||!E[0])return E.length=0,u?(r-=e.e+1,E[0]=re(10,(L-r%L)%L),e.e=-r||0):E[0]=e.e=0,e;if(s==0?(E.length=N,l=1,N--):(E.length=N+1,l=re(10,L-s),E[N]=o>0?(m/re(10,i-o)%re(10,o)|0)*l:0),u)for(;;)if(N==0){for(s=1,o=E[0];o>=10;o/=10)s++;for(o=E[0]+=l,l=1;o>=10;o/=10)l++;s!=l&&(e.e++,E[0]==de&&(E[0]=1));break}else{if(E[N]+=l,E[N]!=de)break;E[N--]=0,l=1}for(s=E.length;E[--s]===0;)E.pop()}return D&&(e.e>v.maxE?(e.d=null,e.e=NaN):e.e<v.minE&&(e.e=0,e.d=[0])),e}function xe(e,r,t){if(!e.isFinite())return hr(e);var n,i=e.e,s=ie(e.d),o=s.length;return r?(t&&(n=t-o)>0?s=s.charAt(0)+"."+s.slice(1)+Se(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+Se(-i-1)+s,t&&(n=t-o)>0&&(s+=Se(n))):i>=o?(s+=Se(i+1-o),t&&(n=t-i-1)>0&&(s=s+"."+Se(n))):((n=i+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),t&&(n=t-o)>0&&(i+1===o&&(s+="."),s+=Se(n))),s}function rt(e,r){var t=e[0];for(r*=L;t>=10;t/=10)r++;return r}function et(e,r,t){if(r>Rn)throw D=!0,t&&(e.precision=t),Error(lr);return P(new e(Qe),r,1,!0)}function ge(e,r,t){if(r>_t)throw Error(lr);return P(new e(Ke),r,t,!0)}function pr(e){var r=e.length-1,t=r*L+1;if(r=e[r],r){for(;r%10==0;r/=10)t--;for(r=e[0];r>=10;r/=10)t++}return t}function Se(e){for(var r="";e--;)r+="0";return r}function dr(e,r,t,n){var i,s=new e(1),o=Math.ceil(n/L+4);for(D=!1;;){if(t%2&&(s=s.times(r),nr(s.d,o)&&(i=!0)),t=le(t/2),t===0){t=s.d.length-1,i&&s.d[t]===0&&++s.d[t];break}r=r.times(r),nr(r.d,o)}return D=!0,s}function rr(e){return e.d[e.d.length-1]&1}function mr(e,r,t){for(var n,i,s=new e(r[0]),o=0;++o<r.length;){if(i=new e(r[o]),!i.s){s=i;break}n=s.cmp(i),(n===t||n===0&&s.s===t)&&(s=i)}return s}function wt(e,r){var t,n,i,s,o,l,c,u=0,m=0,E=0,N=e.constructor,v=N.rounding,U=N.precision;if(!e.d||!e.d[0]||e.e>17)return new N(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(r==null?(D=!1,c=U):c=r,l=new N(.03125);e.e>-2;)e=e.times(l),E+=5;for(n=Math.log(re(2,E))/Math.LN10*2+5|0,c+=n,t=s=o=new N(1),N.precision=c;;){if(s=P(s.times(e),c,1),t=t.times(++m),l=o.plus(W(s,t,c,1)),ie(l.d).slice(0,c)===ie(o.d).slice(0,c)){for(i=E;i--;)o=P(o.times(o),c,1);if(r==null)if(u<3&&Ye(o.d,c-n,v,u))N.precision=c+=10,t=s=l=new N(1),m=0,u++;else return P(o,N.precision=U,v,D=!0);else return N.precision=U,o}o=l}}function ye(e,r){var t,n,i,s,o,l,c,u,m,E,N,v=1,U=10,I=e,J=I.d,F=I.constructor,ne=F.rounding,B=F.precision;if(I.s<0||!J||!J[0]||!I.e&&J[0]==1&&J.length==1)return new F(J&&!J[0]?-1/0:I.s!=1?NaN:J?0:I);if(r==null?(D=!1,m=B):m=r,F.precision=m+=U,t=ie(J),n=t.charAt(0),Math.abs(s=I.e)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)I=I.times(e),t=ie(I.d),n=t.charAt(0),v++;s=I.e,n>1?(I=new F("0."+t),s++):I=new F(n+"."+t.slice(1))}else return u=et(F,m+2,B).times(s+""),I=ye(new F(n+"."+t.slice(1)),m-U).plus(u),F.precision=B,r==null?P(I,B,ne,D=!0):I;for(E=I,c=o=I=W(I.minus(1),I.plus(1),m,1),N=P(I.times(I),m,1),i=3;;){if(o=P(o.times(N),m,1),u=c.plus(W(o,new F(i),m,1)),ie(u.d).slice(0,m)===ie(c.d).slice(0,m))if(c=c.times(2),s!==0&&(c=c.plus(et(F,m+2,B).times(s+""))),c=W(c,new F(v),m,1),r==null)if(Ye(c.d,m-U,ne,l))F.precision=m+=U,u=o=I=W(E.minus(1),E.plus(1),m,1),N=P(I.times(I),m,1),i=l=1;else return P(c,F.precision=B,ne,D=!0);else return F.precision=B,c;c=u,i+=2}}function hr(e){return String(e.s*e.s/0)}function Ze(e,r){var t,n,i;for((t=r.indexOf("."))>-1&&(r=r.replace(".","")),(n=r.search(/e/i))>0?(t<0&&(t=n),t+=+r.slice(n+1),r=r.substring(0,n)):t<0&&(t=r.length),n=0;r.charCodeAt(n)===48;n++);for(i=r.length;r.charCodeAt(i-1)===48;--i);if(r=r.slice(n,i),r){if(i-=n,e.e=t=t-n-1,e.d=[],n=(t+1)%L,t<0&&(n+=L),n<i){for(n&&e.d.push(+r.slice(0,n)),i-=L;n<i;)e.d.push(+r.slice(n,n+=L));r=r.slice(n),n=L-r.length}else n-=i;for(;n--;)r+="0";e.d.push(+r),D&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function bn(e,r){var t,n,i,s,o,l,c,u,m;if(r.indexOf("_")>-1){if(r=r.replace(/(\d)_(?=\d)/g,"$1"),fr.test(r))return Ze(e,r)}else if(r==="Infinity"||r==="NaN")return+r||(e.s=NaN),e.e=NaN,e.d=null,e;if(An.test(r))t=16,r=r.toLowerCase();else if(Nn.test(r))t=2;else if(_n.test(r))t=8;else throw Error(Ie+r);for(s=r.search(/p/i),s>0?(c=+r.slice(s+1),r=r.substring(2,s)):r=r.slice(2),s=r.indexOf("."),o=s>=0,n=e.constructor,o&&(r=r.replace(".",""),l=r.length,s=l-s,i=dr(n,new n(t),s,s*2)),u=We(r,t,de),m=u.length-1,s=m;u[s]===0;--s)u.pop();return s<0?new n(e.s*0):(e.e=rt(u,m),e.d=u,D=!1,o&&(e=W(e,i,l*4)),c&&(e=e.times(Math.abs(c)<54?re(2,c):k.pow(2,c))),D=!0,e)}function Tn(e,r){var t,n=r.d.length;if(n<3)return r.isZero()?r:Be(e,2,r,r);t=1.4*Math.sqrt(n),t=t>16?16:t|0,r=r.times(1/nt(5,t)),r=Be(e,2,r,r);for(var i,s=new e(5),o=new e(16),l=new e(20);t--;)i=r.times(r),r=r.times(s.plus(i.times(o.times(i).minus(l))));return r}function Be(e,r,t,n,i){var s,o,l,c,u=e.precision,m=Math.ceil(u/L);for(D=!1,c=t.times(t),l=new e(n);;){if(o=W(l.times(c),new e(r++*r++),u,1),l=i?n.plus(o):n.minus(o),n=W(o.times(c),new e(r++*r++),u,1),o=l.plus(n),o.d[m]!==void 0){for(s=m;o.d[s]===l.d[s]&&s--;);if(s==-1)break}s=l,l=n,n=o,o=s}return D=!0,o.d.length=m+1,o}function nt(e,r){for(var t=e;--r;)t*=e;return t}function gr(e,r){var t,n=r.s<0,i=ge(e,e.precision,1),s=i.times(.5);if(r=r.abs(),r.lte(s))return ve=n?4:1,r;if(t=r.divToInt(i),t.isZero())ve=n?3:2;else{if(r=r.minus(t.times(i)),r.lte(s))return ve=rr(t)?n?2:3:n?4:1,r;ve=rr(t)?n?1:4:n?3:2}return r.minus(i).abs()}function vt(e,r,t,n){var i,s,o,l,c,u,m,E,N,v=e.constructor,U=t!==void 0;if(U?(ue(t,1,$e),n===void 0?n=v.rounding:ue(n,0,8)):(t=v.precision,n=v.rounding),!e.isFinite())m=hr(e);else{for(m=xe(e),o=m.indexOf("."),U?(i=2,r==16?t=t*4-3:r==8&&(t=t*3-2)):i=r,o>=0&&(m=m.replace(".",""),N=new v(1),N.e=m.length-o,N.d=We(xe(N),10,i),N.e=N.d.length),E=We(m,10,i),s=c=E.length;E[--c]==0;)E.pop();if(!E[0])m=U?"0p+0":"0";else{if(o<0?s--:(e=new v(e),e.d=E,e.e=s,e=W(e,N,t,n,0,i),E=e.d,s=e.e,u=or),o=E[t],l=i/2,u=u||E[t+1]!==void 0,u=n<4?(o!==void 0||u)&&(n===0||n===(e.s<0?3:2)):o>l||o===l&&(n===4||u||n===6&&E[t-1]&1||n===(e.s<0?8:7)),E.length=t,u)for(;++E[--t]>i-1;)E[t]=0,t||(++s,E.unshift(1));for(c=E.length;!E[c-1];--c);for(o=0,m="";o<c;o++)m+=Nt.charAt(E[o]);if(U){if(c>1)if(r==16||r==8){for(o=r==16?4:3,--c;c%o;c++)m+="0";for(E=We(m,i,r),c=E.length;!E[c-1];--c);for(o=1,m="1.";o<c;o++)m+=Nt.charAt(E[o])}else m=m.charAt(0)+"."+m.slice(1);m=m+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)m="0"+m;m="0."+m}else if(++s>c)for(s-=c;s--;)m+="0";else s<c&&(m=m.slice(0,s)+"."+m.slice(s))}m=(r==16?"0x":r==2?"0b":r==8?"0o":"")+m}return e.s<0?"-"+m:m}function nr(e,r){if(e.length>r)return e.length=r,!0}function On(e){return new this(e).abs()}function Sn(e){return new this(e).acos()}function yn(e){return new this(e).acosh()}function In(e,r){return new this(e).plus(r)}function $n(e){return new this(e).asin()}function Pn(e){return new this(e).asinh()}function Cn(e){return new this(e).atan()}function jn(e){return new this(e).atanh()}function Un(e,r){e=new this(e),r=new this(r);var t,n=this.precision,i=this.rounding,s=n+4;return!e.s||!r.s?t=new this(NaN):!e.d&&!r.d?(t=ge(this,s,1).times(r.s>0?.25:.75),t.s=e.s):!r.d||e.isZero()?(t=r.s<0?ge(this,n,i):new this(0),t.s=e.s):!e.d||r.isZero()?(t=ge(this,s,1).times(.5),t.s=e.s):r.s<0?(this.precision=s,this.rounding=1,t=this.atan(W(e,r,s,1)),r=ge(this,s,1),this.precision=n,this.rounding=i,t=e.s<0?t.minus(r):t.plus(r)):t=this.atan(W(e,r,s,1)),t}function Ln(e){return new this(e).cbrt()}function Dn(e){return P(e=new this(e),e.e+1,2)}function Mn(e,r,t){return new this(e).clamp(r,t)}function Bn(e){if(!e||typeof e!="object")throw Error(tt+"Object expected");var r,t,n,i=e.defaults===!0,s=["precision",1,$e,"rounding",0,8,"toExpNeg",-Me,0,"toExpPos",0,Me,"maxE",0,Me,"minE",-Me,0,"modulo",0,9];for(r=0;r<s.length;r+=3)if(t=s[r],i&&(this[t]=At[t]),(n=e[t])!==void 0)if(le(n)===n&&n>=s[r+1]&&n<=s[r+2])this[t]=n;else throw Error(Ie+t+": "+n);if(t="crypto",i&&(this[t]=At[t]),(n=e[t])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(cr);else this[t]=!1;else throw Error(Ie+t+": "+n);return this}function kn(e){return new this(e).cos()}function Vn(e){return new this(e).cosh()}function xr(e){var r,t,n;function i(s){var o,l,c,u=this;if(!(u instanceof i))return new i(s);if(u.constructor=i,sr(s)){u.s=s.s,D?!s.d||s.e>i.maxE?(u.e=NaN,u.d=null):s.e<i.minE?(u.e=0,u.d=[0]):(u.e=s.e,u.d=s.d.slice()):(u.e=s.e,u.d=s.d?s.d.slice():s.d);return}if(c=typeof s,c==="number"){if(s===0){u.s=1/s<0?-1:1,u.e=0,u.d=[0];return}if(s<0?(s=-s,u.s=-1):u.s=1,s===~~s&&s<1e7){for(o=0,l=s;l>=10;l/=10)o++;D?o>i.maxE?(u.e=NaN,u.d=null):o<i.minE?(u.e=0,u.d=[0]):(u.e=o,u.d=[s]):(u.e=o,u.d=[s]);return}if(s*0!==0){s||(u.s=NaN),u.e=NaN,u.d=null;return}return Ze(u,s.toString())}if(c==="string")return(l=s.charCodeAt(0))===45?(s=s.slice(1),u.s=-1):(l===43&&(s=s.slice(1)),u.s=1),fr.test(s)?Ze(u,s):bn(u,s);if(c==="bigint")return s<0?(s=-s,u.s=-1):u.s=1,Ze(u,s.toString());throw Error(Ie+s)}if(i.prototype=w,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Bn,i.clone=xr,i.isDecimal=sr,i.abs=On,i.acos=Sn,i.acosh=yn,i.add=In,i.asin=$n,i.asinh=Pn,i.atan=Cn,i.atanh=jn,i.atan2=Un,i.cbrt=Ln,i.ceil=Dn,i.clamp=Mn,i.cos=kn,i.cosh=Vn,i.div=Fn,i.exp=qn,i.floor=Yn,i.hypot=Hn,i.ln=Gn,i.log=Jn,i.log10=Wn,i.log2=Xn,i.max=Zn,i.min=zn,i.mod=Qn,i.mul=Kn,i.pow=es,i.random=ts,i.round=rs,i.sign=ns,i.sin=ss,i.sinh=is,i.sqrt=as,i.sub=os,i.sum=ls,i.tan=cs,i.tanh=us,i.trunc=fs,e===void 0&&(e={}),e&&e.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<n.length;)e.hasOwnProperty(t=n[r++])||(e[t]=this[t]);return i.config(e),i}function Fn(e,r){return new this(e).div(r)}function qn(e){return new this(e).exp()}function Yn(e){return P(e=new this(e),e.e+1,3)}function Hn(){var e,r,t=new this(0);for(D=!1,e=0;e<arguments.length;)if(r=new this(arguments[e++]),r.d)t.d&&(t=t.plus(r.times(r)));else{if(r.s)return D=!0,new this(1/0);t=r}return D=!0,t.sqrt()}function sr(e){return e instanceof k||e&&e.toStringTag===ur||!1}function Gn(e){return new this(e).ln()}function Jn(e,r){return new this(e).log(r)}function Xn(e){return new this(e).log(2)}function Wn(e){return new this(e).log(10)}function Zn(){return mr(this,arguments,-1)}function zn(){return mr(this,arguments,1)}function Qn(e,r){return new this(e).mod(r)}function Kn(e,r){return new this(e).mul(r)}function es(e,r){return new this(e).pow(r)}function ts(e){var r,t,n,i,s=0,o=new this(1),l=[];if(e===void 0?e=this.precision:ue(e,1,$e),n=Math.ceil(e/L),this.crypto)if(crypto.getRandomValues)for(r=crypto.getRandomValues(new Uint32Array(n));s<n;)i=r[s],i>=429e7?r[s]=crypto.getRandomValues(new Uint32Array(1))[0]:l[s++]=i%1e7;else if(crypto.randomBytes){for(r=crypto.randomBytes(n*=4);s<n;)i=r[s]+(r[s+1]<<8)+(r[s+2]<<16)+((r[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(r,s):(l.push(i%1e7),s+=4);s=n/4}else throw Error(cr);else for(;s<n;)l[s++]=Math.random()*1e7|0;for(n=l[--s],e%=L,n&&e&&(i=re(10,L-e),l[s]=(n/i|0)*i);l[s]===0;s--)l.pop();if(s<0)t=0,l=[0];else{for(t=-1;l[0]===0;t-=L)l.shift();for(n=1,i=l[0];i>=10;i/=10)n++;n<L&&(t-=L-n)}return o.e=t,o.d=l,o}function rs(e){return P(e=new this(e),e.e+1,this.rounding)}function ns(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function ss(e){return new this(e).sin()}function is(e){return new this(e).sinh()}function as(e){return new this(e).sqrt()}function os(e,r){return new this(e).sub(r)}function ls(){var e=0,r=arguments,t=new this(r[e]);for(D=!1;t.s&&++e<r.length;)t=t.plus(r[e]);return D=!0,P(t,this.precision,this.rounding)}function cs(e){return new this(e).tan()}function us(e){return new this(e).tanh()}function fs(e){return P(e=new this(e),e.e+1,1)}w[Symbol.for("nodejs.util.inspect.custom")]=w.toString;w[Symbol.toStringTag]="Decimal";var k=w.constructor=xr(At);Qe=new k(Qe);Ke=new k(Ke);class ir extends SyntaxError{constructor(r,t,n,i){super(r),this.expected=t,this.found=n,this.location=i,this.name="SyntaxError"}format(r){let t="Error: "+this.message;if(this.location){let n=null;const i=r.find(c=>c.source===this.location.source);i&&(n=i.text.split(/\r\n|\n|\r/g));const s=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,l=this.location.source+":"+o.line+":"+o.column;if(n){const c=this.location.end,u="".padEnd(o.line.toString().length," "),m=n[s.line-1],N=(s.line===c.line?c.column:m.length+1)-s.column||1;t+=`
 --> `+l+`
`+u+` |
`+o.line+" | "+m+`
`+u+" | "+"".padEnd(s.column-1," ")+"".padEnd(N,"^")}else t+=`
 at `+l}return t}static buildMessage(r,t){function n(N){return N.codePointAt(0).toString(16).toUpperCase()}const i=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function s(N){return i?N.replace(i,v=>"\\u{"+n(v)+"}"):N}function o(N){return s(N.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,v=>"\\x0"+n(v)).replace(/[\x10-\x1F\x7F-\x9F]/g,v=>"\\x"+n(v)))}function l(N){return s(N.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,v=>"\\x0"+n(v)).replace(/[\x10-\x1F\x7F-\x9F]/g,v=>"\\x"+n(v)))}const c={literal(N){return'"'+o(N.text)+'"'},class(N){const v=N.parts.map(U=>Array.isArray(U)?l(U[0])+"-"+l(U[1]):l(U));return"["+(N.inverted?"^":"")+v.join("")+"]"+(N.unicode?"u":"")},any(){return"any character"},end(){return"end of input"},other(N){return N.description}};function u(N){return c[N.type](N)}function m(N){const v=N.map(u);if(v.sort(),v.length>0){let U=1;for(let I=1;I<v.length;I++)v[I-1]!==v[I]&&(v[U]=v[I],U++);v.length=U}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function E(N){return N?'"'+o(N)+'"':"end of input"}return"Expected "+m(r)+" but "+E(t)+" found."}}function Er(e,r){r=r!==void 0?r:{};const t={},n=r.grammarSource,i={Expression:Oe};let s=Oe;const o="?",l=":",c="||",u="??",m="&&",E="!=",N="==",v="=",U="<=",I=">=",J="**",F="(",ne=")",B="[",X="]",fe=".",se='"',Ee="'",Ne=",",me="true",be="false",ae="null",Ae=/^[<>]/,he=/^[+\-]/,Te=/^[%*\/]/,ee=/^[!+\-]/,V=/^[0-9]/,Ue=/^[eE]/,x=/^[a-zA-Z0-9_$]/,O=/^[a-zA-Z_$]/,$=/^[ \t\n\r]/,j=K("?",!1),M=K(":",!1),Y=K("||",!1),G=K("??",!1),z=K("&&",!1),q=K("!=",!1),te=K("==",!1),Q=K("=",!1),Tt=K("<=",!1),Ot=K(">=",!1),St=_e(["<",">"],!1,!1,!1),it=_e(["+","-"],!1,!1,!1),yt=_e(["%","*","/"],!1,!1,!1),Ar=K("**",!1),_r=_e(["!","+","-"],!1,!1,!1),at=K("(",!1),ot=K(")",!1),It=K("[",!1),$t=K("]",!1),lt=K(".",!1),ct=K('"',!1),ut=K("'",!1),Pt=Gr(),Ct=K(",",!1),Le=_e([["0","9"]],!1,!1,!1),wr=_e(["e","E"],!1,!1,!1),Rr=K("true",!1),ke=_e([["a","z"],["A","Z"],["0","9"],"_","$"],!1,!1,!1),vr=K("false",!1),br=K("null",!1),Tr=_e([["a","z"],["A","Z"],"_","$"],!1,!1,!1),jt=_e([" ","	",`
`,"\r"],!1,!1,!1);function Os(f){return f}function Or(f,d,A){return{type:"ConditionalExpression",test:f,consequent:d,alternate:A}}function Sr(f,d){return d.reduce((A,p)=>({type:"LogicalExpression",operator:p[1],left:A,right:p[3]}),f)}function yr(f,d){return d.reduce((A,p)=>({type:"LogicalExpression",operator:p[1],left:A,right:p[3]}),f)}function Ir(f,d){return Je(f,d)}function $r(f,d){return Je(f,d)}function Pr(f,d){return Je(f,d)}function Cr(f,d){return Je(f,d)}function jr(f,d){return d?{type:"BinaryExpression",operator:"**",left:f,right:d[3]}:f}function Ur(f,d){return{type:"UnaryExpression",operator:f,argument:d,prefix:!0}}function Ut(f,d){return{type:"call",args:d||[]}}function Lt(f,d){return{type:"member",property:d,computed:!0}}function Dt(f,d){return{type:"member",property:d,computed:!1}}function Lr(f,d){return d.reduce((A,p)=>p.type==="call"?{type:"CallExpression",callee:A,arguments:p.args}:{type:"MemberExpression",object:A,property:p.property,computed:p.computed},f)}function Dr(f){return{type:"Literal",value:f.join(""),raw:'"'+f.join("")+'"'}}function Mr(f){return{type:"Literal",value:f.join(""),raw:"'"+f.join("")+"'"}}function Ss(f){return f}function ys(f){return f}function Br(f,d){return[f].concat(d.map(A=>A[3]))}function Is(f){return f}function kr(f){return{type:"Literal",value:parseFloat(f),raw:f}}function Vr(){return{type:"Literal",value:!0,raw:"true"}}function Fr(){return{type:"Literal",value:!1,raw:"false"}}function qr(){return{type:"Literal",value:null,raw:"null"}}function Yr(f){return{type:"Identifier",name:f}}let a=r.peg$currPos|0;const De=[{line:1,column:1}];let pe=a,He=r.peg$maxFailExpected||[],b=r.peg$silentFails|0,Ve;if(r.startRule){if(!(r.startRule in i))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');s=i[r.startRule]}function Hr(f=a){const d=e.codePointAt(f);return d===void 0?"":String.fromCodePoint(d)}function K(f,d){return{type:"literal",text:f,ignoreCase:d}}function _e(f,d,A,p){return{type:"class",parts:f,inverted:d,ignoreCase:A,unicode:p}}function Gr(){return{type:"any"}}function Jr(){return{type:"end"}}function Mt(f){let d=De[f],A;if(d)return d;if(f>=De.length)A=De.length-1;else for(A=f;!De[--A];);for(d=De[A],d={line:d.line,column:d.column};A<f;)e.charCodeAt(A)===10?(d.line++,d.column=1):d.column++,A++;return De[f]=d,d}function Bt(f,d,A){const p=Mt(f),_=Mt(d);return{source:n,start:{offset:f,line:p.line,column:p.column},end:{offset:d,line:_.line,column:_.column}}}function T(f){a<pe||(a>pe&&(pe=a,He=[]),He.push(f))}function Xr(f,d,A){return new ir(ir.buildMessage(f,d),f,d,A)}function Oe(){let f,d;return f=a,C(),d=kt(),d!==t?(C(),f=d):(a=f,f=t),f}function kt(){let f,d,A,p,_,g;return f=a,d=Vt(),d!==t?(C(),e.charCodeAt(a)===63?(A=o,a++):(A=t,b===0&&T(j)),A!==t?(C(),p=Oe(),p!==t?(C(),e.charCodeAt(a)===58?(_=l,a++):(_=t,b===0&&T(M)),_!==t?(C(),g=kt(),g!==t?f=Or(d,p,g):(a=f,f=t)):(a=f,f=t)):(a=f,f=t)):(a=f,f=t)):(a=f,f=t),f===t&&(f=Vt()),f}function Vt(){let f,d,A,p,_,g,S,y;if(f=a,d=ft(),d!==t){for(A=[],p=a,_=C(),e.substr(a,2)===c?(g=c,a+=2):(g=t,b===0&&T(Y)),g===t&&(e.substr(a,2)===u?(g=u,a+=2):(g=t,b===0&&T(G))),g!==t?(S=C(),y=ft(),y!==t?(_=[_,g,S,y],p=_):(a=p,p=t)):(a=p,p=t);p!==t;)A.push(p),p=a,_=C(),e.substr(a,2)===c?(g=c,a+=2):(g=t,b===0&&T(Y)),g===t&&(e.substr(a,2)===u?(g=u,a+=2):(g=t,b===0&&T(G))),g!==t?(S=C(),y=ft(),y!==t?(_=[_,g,S,y],p=_):(a=p,p=t)):(a=p,p=t);f=Sr(d,A)}else a=f,f=t;return f}function ft(){let f,d,A,p,_,g,S,y;if(f=a,d=pt(),d!==t){for(A=[],p=a,_=C(),e.substr(a,2)===m?(g=m,a+=2):(g=t,b===0&&T(z)),g!==t?(S=C(),y=pt(),y!==t?(_=[_,g,S,y],p=_):(a=p,p=t)):(a=p,p=t);p!==t;)A.push(p),p=a,_=C(),e.substr(a,2)===m?(g=m,a+=2):(g=t,b===0&&T(z)),g!==t?(S=C(),y=pt(),y!==t?(_=[_,g,S,y],p=_):(a=p,p=t)):(a=p,p=t);f=yr(d,A)}else a=f,f=t;return f}function pt(){let f,d,A,p,_,g,S,y;if(f=a,d=dt(),d!==t){for(A=[],p=a,_=C(),e.substr(a,2)===E?(g=E,a+=2):(g=t,b===0&&T(q)),g===t&&(e.substr(a,2)===N?(g=N,a+=2):(g=t,b===0&&T(te)),g===t&&(e.charCodeAt(a)===61?(g=v,a++):(g=t,b===0&&T(Q)))),g!==t?(S=C(),y=dt(),y!==t?(_=[_,g,S,y],p=_):(a=p,p=t)):(a=p,p=t);p!==t;)A.push(p),p=a,_=C(),e.substr(a,2)===E?(g=E,a+=2):(g=t,b===0&&T(q)),g===t&&(e.substr(a,2)===N?(g=N,a+=2):(g=t,b===0&&T(te)),g===t&&(e.charCodeAt(a)===61?(g=v,a++):(g=t,b===0&&T(Q)))),g!==t?(S=C(),y=dt(),y!==t?(_=[_,g,S,y],p=_):(a=p,p=t)):(a=p,p=t);f=Ir(d,A)}else a=f,f=t;return f}function dt(){let f,d,A,p,_,g,S,y;if(f=a,d=mt(),d!==t){for(A=[],p=a,_=C(),e.substr(a,2)===U?(g=U,a+=2):(g=t,b===0&&T(Tt)),g===t&&(e.substr(a,2)===I?(g=I,a+=2):(g=t,b===0&&T(Ot)),g===t&&(g=e.charAt(a),Ae.test(g)?a++:(g=t,b===0&&T(St)))),g!==t?(S=C(),y=mt(),y!==t?(_=[_,g,S,y],p=_):(a=p,p=t)):(a=p,p=t);p!==t;)A.push(p),p=a,_=C(),e.substr(a,2)===U?(g=U,a+=2):(g=t,b===0&&T(Tt)),g===t&&(e.substr(a,2)===I?(g=I,a+=2):(g=t,b===0&&T(Ot)),g===t&&(g=e.charAt(a),Ae.test(g)?a++:(g=t,b===0&&T(St)))),g!==t?(S=C(),y=mt(),y!==t?(_=[_,g,S,y],p=_):(a=p,p=t)):(a=p,p=t);f=$r(d,A)}else a=f,f=t;return f}function mt(){let f,d,A,p,_,g,S,y;if(f=a,d=ht(),d!==t){for(A=[],p=a,_=C(),g=e.charAt(a),he.test(g)?a++:(g=t,b===0&&T(it)),g!==t?(S=C(),y=ht(),y!==t?(_=[_,g,S,y],p=_):(a=p,p=t)):(a=p,p=t);p!==t;)A.push(p),p=a,_=C(),g=e.charAt(a),he.test(g)?a++:(g=t,b===0&&T(it)),g!==t?(S=C(),y=ht(),y!==t?(_=[_,g,S,y],p=_):(a=p,p=t)):(a=p,p=t);f=Pr(d,A)}else a=f,f=t;return f}function ht(){let f,d,A,p,_,g,S,y;if(f=a,d=Ge(),d!==t){for(A=[],p=a,_=C(),g=e.charAt(a),Te.test(g)?a++:(g=t,b===0&&T(yt)),g!==t?(S=C(),y=Ge(),y!==t?(_=[_,g,S,y],p=_):(a=p,p=t)):(a=p,p=t);p!==t;)A.push(p),p=a,_=C(),g=e.charAt(a),Te.test(g)?a++:(g=t,b===0&&T(yt)),g!==t?(S=C(),y=Ge(),y!==t?(_=[_,g,S,y],p=_):(a=p,p=t)):(a=p,p=t);f=Cr(d,A)}else a=f,f=t;return f}function Ge(){let f,d,A,p,_,g,S;return f=a,d=Ft(),d!==t?(A=a,p=C(),e.substr(a,2)===J?(_=J,a+=2):(_=t,b===0&&T(Ar)),_!==t?(g=C(),S=Ge(),S!==t?(p=[p,_,g,S],A=p):(a=A,A=t)):(a=A,A=t),A===t&&(A=null),f=jr(d,A)):(a=f,f=t),f}function Ft(){let f,d,A;return f=a,d=e.charAt(a),ee.test(d)?a++:(d=t,b===0&&T(_r)),d!==t?(C(),A=Ft(),A!==t?f=Ur(d,A):(a=f,f=t)):(a=f,f=t),f===t&&(f=Wr()),f}function Wr(){let f,d,A,p,_,g,S;if(f=a,d=zr(),d!==t){for(A=[],p=a,C(),e.charCodeAt(a)===40?(_=F,a++):(_=t,b===0&&T(at)),_!==t?(C(),g=Gt(),g===t&&(g=null),C(),e.charCodeAt(a)===41?(S=ne,a++):(S=t,b===0&&T(ot)),S!==t?p=Ut(d,g):(a=p,p=t)):(a=p,p=t),p===t&&(p=a,C(),e.charCodeAt(a)===91?(_=B,a++):(_=t,b===0&&T(It)),_!==t?(C(),g=qt(),g!==t?(C(),e.charCodeAt(a)===93?(S=X,a++):(S=t,b===0&&T($t)),S!==t?p=Lt(d,g):(a=p,p=t)):(a=p,p=t)):(a=p,p=t),p===t&&(p=a,C(),e.charCodeAt(a)===46?(_=fe,a++):(_=t,b===0&&T(lt)),_!==t?(C(),g=gt(),g!==t?p=Dt(d,g):(a=p,p=t)):(a=p,p=t)));p!==t;)A.push(p),p=a,C(),e.charCodeAt(a)===40?(_=F,a++):(_=t,b===0&&T(at)),_!==t?(C(),g=Gt(),g===t&&(g=null),C(),e.charCodeAt(a)===41?(S=ne,a++):(S=t,b===0&&T(ot)),S!==t?p=Ut(d,g):(a=p,p=t)):(a=p,p=t),p===t&&(p=a,C(),e.charCodeAt(a)===91?(_=B,a++):(_=t,b===0&&T(It)),_!==t?(C(),g=qt(),g!==t?(C(),e.charCodeAt(a)===93?(S=X,a++):(S=t,b===0&&T($t)),S!==t?p=Lt(d,g):(a=p,p=t)):(a=p,p=t)):(a=p,p=t),p===t&&(p=a,C(),e.charCodeAt(a)===46?(_=fe,a++):(_=t,b===0&&T(lt)),_!==t?(C(),g=gt(),g!==t?p=Dt(d,g):(a=p,p=t)):(a=p,p=t)));f=Lr(d,A)}else a=f,f=t;return f}function qt(){let f;return f=Zr(),f===t&&(f=Oe()),f}function Zr(){let f,d,A,p;if(f=a,e.charCodeAt(a)===34?(d=se,a++):(d=t,b===0&&T(ct)),d!==t){for(A=[],p=Yt();p!==t;)A.push(p),p=Yt();e.charCodeAt(a)===34?(p=se,a++):(p=t,b===0&&T(ct)),p!==t?f=Dr(A):(a=f,f=t)}else a=f,f=t;if(f===t)if(f=a,e.charCodeAt(a)===39?(d=Ee,a++):(d=t,b===0&&T(ut)),d!==t){for(A=[],p=Ht();p!==t;)A.push(p),p=Ht();e.charCodeAt(a)===39?(p=Ee,a++):(p=t,b===0&&T(ut)),p!==t?f=Mr(A):(a=f,f=t)}else a=f,f=t;return f}function Yt(){let f,d,A;return f=a,d=a,b++,e.charCodeAt(a)===34?(A=se,a++):(A=t,b===0&&T(ct)),b--,A===t?d=void 0:(a=d,d=t),d!==t?(e.length>a?(A=e.charAt(a),a++):(A=t,b===0&&T(Pt)),A!==t?f=A:(a=f,f=t)):(a=f,f=t),f}function Ht(){let f,d,A;return f=a,d=a,b++,e.charCodeAt(a)===39?(A=Ee,a++):(A=t,b===0&&T(ut)),b--,A===t?d=void 0:(a=d,d=t),d!==t?(e.length>a?(A=e.charAt(a),a++):(A=t,b===0&&T(Pt)),A!==t?f=A:(a=f,f=t)):(a=f,f=t),f}function Gt(){let f,d,A,p,_,g,S,y;if(f=a,d=Oe(),d!==t){for(A=[],p=a,_=C(),e.charCodeAt(a)===44?(g=Ne,a++):(g=t,b===0&&T(Ct)),g!==t?(S=C(),y=Oe(),y!==t?(_=[_,g,S,y],p=_):(a=p,p=t)):(a=p,p=t);p!==t;)A.push(p),p=a,_=C(),e.charCodeAt(a)===44?(g=Ne,a++):(g=t,b===0&&T(Ct)),g!==t?(S=C(),y=Oe(),y!==t?(_=[_,g,S,y],p=_):(a=p,p=t)):(a=p,p=t);f=Br(d,A)}else a=f,f=t;return f}function zr(){let f,d,A,p;return f=Qr(),f===t&&(f=gt(),f===t&&(f=a,e.charCodeAt(a)===40?(d=F,a++):(d=t,b===0&&T(at)),d!==t?(C(),A=Oe(),A!==t?(C(),e.charCodeAt(a)===41?(p=ne,a++):(p=t,b===0&&T(ot)),p!==t?f=A:(a=f,f=t)):(a=f,f=t)):(a=f,f=t))),f}function Qr(){let f;return f=Kr(),f===t&&(f=en(),f===t&&(f=tn())),f}function Kr(){let f,d,A,p,_,g,S,y,Fe,we;if(f=a,d=a,A=a,p=[],_=e.charAt(a),V.test(_)?a++:(_=t,b===0&&T(Le)),_!==t)for(;_!==t;)p.push(_),_=e.charAt(a),V.test(_)?a++:(_=t,b===0&&T(Le));else p=t;if(p!==t){if(_=a,e.charCodeAt(a)===46?(g=fe,a++):(g=t,b===0&&T(lt)),g!==t){if(S=[],y=e.charAt(a),V.test(y)?a++:(y=t,b===0&&T(Le)),y!==t)for(;y!==t;)S.push(y),y=e.charAt(a),V.test(y)?a++:(y=t,b===0&&T(Le));else S=t;S!==t?(g=[g,S],_=g):(a=_,_=t)}else a=_,_=t;if(_===t&&(_=null),g=a,S=e.charAt(a),Ue.test(S)?a++:(S=t,b===0&&T(wr)),S!==t){if(y=e.charAt(a),he.test(y)?a++:(y=t,b===0&&T(it)),y===t&&(y=null),Fe=[],we=e.charAt(a),V.test(we)?a++:(we=t,b===0&&T(Le)),we!==t)for(;we!==t;)Fe.push(we),we=e.charAt(a),V.test(we)?a++:(we=t,b===0&&T(Le));else Fe=t;Fe!==t?(S=[S,y,Fe],g=S):(a=g,g=t)}else a=g,g=t;g===t&&(g=null),p=[p,_,g],A=p}else a=A,A=t;return A!==t?d=e.substring(d,a):d=A,d!==t&&(d=kr(d)),f=d,f}function en(){let f,d,A,p;return f=a,e.substr(a,4)===me?(d=me,a+=4):(d=t,b===0&&T(Rr)),d!==t?(A=a,b++,p=e.charAt(a),x.test(p)?a++:(p=t,b===0&&T(ke)),b--,p===t?A=void 0:(a=A,A=t),A!==t?f=Vr():(a=f,f=t)):(a=f,f=t),f===t&&(f=a,e.substr(a,5)===be?(d=be,a+=5):(d=t,b===0&&T(vr)),d!==t?(A=a,b++,p=e.charAt(a),x.test(p)?a++:(p=t,b===0&&T(ke)),b--,p===t?A=void 0:(a=A,A=t),A!==t?f=Fr():(a=f,f=t)):(a=f,f=t)),f}function tn(){let f,d,A,p;return f=a,e.substr(a,4)===ae?(d=ae,a+=4):(d=t,b===0&&T(br)),d!==t?(A=a,b++,p=e.charAt(a),x.test(p)?a++:(p=t,b===0&&T(ke)),b--,p===t?A=void 0:(a=A,A=t),A!==t?f=qr():(a=f,f=t)):(a=f,f=t),f}function gt(){let f,d,A,p,_,g;if(f=a,d=a,A=a,p=e.charAt(a),O.test(p)?a++:(p=t,b===0&&T(Tr)),p!==t){for(_=[],g=e.charAt(a),x.test(g)?a++:(g=t,b===0&&T(ke));g!==t;)_.push(g),g=e.charAt(a),x.test(g)?a++:(g=t,b===0&&T(ke));p=[p,_],A=p}else a=A,A=t;return A!==t?d=e.substring(d,a):d=A,d!==t&&(d=Yr(d)),f=d,f}function C(){let f,d;for(b++,f=[],d=e.charAt(a),$.test(d)?a++:(d=t,b===0&&T(jt));d!==t;)f.push(d),d=e.charAt(a),$.test(d)?a++:(d=t,b===0&&T(jt));return b--,f}function Je(f,d){return d.reduce((A,p)=>({type:"BinaryExpression",operator:p[1],left:A,right:p[3]}),f)}Ve=s();const xt=Ve!==t&&a===e.length;function Jt(){throw Ve!==t&&a<e.length&&T(Jr()),Xr(He,pe<e.length?Hr(pe):null,pe<e.length?Bt(pe,pe+1):Bt(pe,pe))}if(r.peg$library)return{peg$result:Ve,peg$currPos:a,peg$FAILED:t,peg$maxFailExpected:He,peg$maxFailPos:pe,peg$success:xt,peg$throw:xt?void 0:Jt};if(xt)return Ve;Jt()}const ps=e=>{const r=new Set,t=n=>{if(!(!n||typeof n!="object"))switch(n.type){case"Identifier":r.add(n.name);break;case"MemberExpression":t(n.object),n.computed&&t(n.property);break;case"BinaryExpression":case"LogicalExpression":t(n.left),t(n.right);break;case"UnaryExpression":t(n.argument);break;case"CallExpression":if(t(n.callee),n.arguments)for(const i of n.arguments)t(i);break;case"ConditionalExpression":t(n.test),t(n.consequent),t(n.alternate);break;case"ArrayExpression":if(n.elements)for(const i of n.elements)t(i);break;case"ObjectExpression":if(n.properties)for(const i of n.properties)i.type==="Property"?(i.computed&&t(i.key),t(i.value)):i.type==="SpreadElement"&&t(i.argument);break}};return t(e),Array.from(r).filter(n=>!n.startsWith("$"))};class je extends Error{constructor(r,t){super(r),this.name="EvallaError",this.cause=t,Object.setPrototypeOf(this,je.prototype)}}class st extends je{constructor(r,t,n){super(r,n),this.name="SecurityError",this.property=t,Object.setPrototypeOf(this,st.prototype)}}class bt extends je{constructor(r,t,n){super(r,n),this.name="CircularDependencyError",this.cycle=t,Object.setPrototypeOf(this,bt.prototype)}}class Re extends je{constructor(r,t,n){super(r,n),this.name="ValidationError",this.variableName=t,Object.setPrototypeOf(this,Re.prototype)}}class Z extends je{constructor(r,t,n,i){super(r,i),this.name="EvaluationError",this.variableName=t,this.context=n,Object.setPrototypeOf(this,Z.prototype)}}class Pe extends Z{constructor(r,t,n){super(r,t?.variableName,void 0,n),this.name="ParseError",this.expression=t?.expression,this.line=t?.line,this.column=t?.column,this.originalMessage=t?.originalMessage,Object.setPrototypeOf(this,Pe.prototype)}}var R;(function(e){e.INPUT_MUST_BE_ARRAY="INPUT_MUST_BE_ARRAY",e.INPUT_MUST_BE_OBJECT="INPUT_MUST_BE_OBJECT",e.INPUT_NAME_REQUIRED="INPUT_NAME_REQUIRED",e.INPUT_EXPR_OR_VALUE_REQUIRED="INPUT_EXPR_OR_VALUE_REQUIRED",e.INPUT_EXPR_MUST_BE_STRING="INPUT_EXPR_MUST_BE_STRING",e.DUPLICATE_NAME="DUPLICATE_NAME",e.VARIABLE_NAME_MUST_BE_STRING="VARIABLE_NAME_MUST_BE_STRING",e.VARIABLE_NAME_EMPTY="VARIABLE_NAME_EMPTY",e.VARIABLE_NAME_WHITESPACE="VARIABLE_NAME_WHITESPACE",e.VARIABLE_NAME_DOLLAR_PREFIX="VARIABLE_NAME_DOLLAR_PREFIX",e.VARIABLE_NAME_DOUBLE_UNDERSCORE="VARIABLE_NAME_DOUBLE_UNDERSCORE",e.VARIABLE_NAME_RESERVED="VARIABLE_NAME_RESERVED",e.VARIABLE_NAME_STARTS_WITH_NUMBER="VARIABLE_NAME_STARTS_WITH_NUMBER",e.VARIABLE_NAME_CONTAINS_DOT="VARIABLE_NAME_CONTAINS_DOT",e.VARIABLE_NAME_INVALID_CHARS="VARIABLE_NAME_INVALID_CHARS",e.PARSE_ERROR="PARSE_ERROR",e.PARSE_ERROR_AT_LOCATION="PARSE_ERROR_AT_LOCATION",e.PARSE_ERROR_FOR_VARIABLE="PARSE_ERROR_FOR_VARIABLE",e.UNDEFINED_VARIABLE="UNDEFINED_VARIABLE",e.CANNOT_ACCESS_PROPERTY="CANNOT_ACCESS_PROPERTY",e.CALLEE_NOT_FUNCTION="CALLEE_NOT_FUNCTION",e.UNSUPPORTED_LOGICAL_OPERATOR="UNSUPPORTED_LOGICAL_OPERATOR",e.UNSUPPORTED_NODE_TYPE="UNSUPPORTED_NODE_TYPE",e.UNSUPPORTED_BINARY_OPERATOR="UNSUPPORTED_BINARY_OPERATOR",e.UNSUPPORTED_UNARY_OPERATOR="UNSUPPORTED_UNARY_OPERATOR",e.NO_AST_FOUND="NO_AST_FOUND",e.FAILED_TO_EVALUATE="FAILED_TO_EVALUATE",e.NAMESPACE_HEAD_AS_VALUE="NAMESPACE_HEAD_AS_VALUE",e.NAMESPACE_HEAD_IN_OPERATION="NAMESPACE_HEAD_IN_OPERATION",e.EXPRESSION_CANNOT_RETURN_ARRAY="EXPRESSION_CANNOT_RETURN_ARRAY",e.EXPRESSION_CANNOT_RETURN_OBJECT="EXPRESSION_CANNOT_RETURN_OBJECT",e.EXPRESSION_CANNOT_RETURN_STRING="EXPRESSION_CANNOT_RETURN_STRING",e.UNSUPPORTED_RESULT_TYPE="UNSUPPORTED_RESULT_TYPE",e.STRING_IN_OPERATION="STRING_IN_OPERATION",e.OBJECT_IN_OPERATION="OBJECT_IN_OPERATION",e.ARRAY_IN_OPERATION="ARRAY_IN_OPERATION",e.STRING_WITH_UNARY="STRING_WITH_UNARY",e.OBJECT_WITH_UNARY="OBJECT_WITH_UNARY",e.ARRAY_WITH_UNARY="ARRAY_WITH_UNARY",e.PROPERTY_ACCESS_DENIED="PROPERTY_ACCESS_DENIED",e.FUNCTION_ALIASING_DENIED="FUNCTION_ALIASING_DENIED",e.CIRCULAR_DEPENDENCY="CIRCULAR_DEPENDENCY",e.DECIMAL_PLACES_INVALID="DECIMAL_PLACES_INVALID",e.EXPRESSION_MUST_BE_STRING="EXPRESSION_MUST_BE_STRING",e.EXPRESSION_EMPTY="EXPRESSION_EMPTY"})(R||(R={}));R.INPUT_MUST_BE_ARRAY+"",R.INPUT_MUST_BE_OBJECT+"",R.INPUT_NAME_REQUIRED+"",R.INPUT_EXPR_OR_VALUE_REQUIRED+"",R.INPUT_EXPR_MUST_BE_STRING+"",R.DUPLICATE_NAME+"",R.VARIABLE_NAME_MUST_BE_STRING+"",R.VARIABLE_NAME_EMPTY+"",R.VARIABLE_NAME_WHITESPACE+"",R.VARIABLE_NAME_DOLLAR_PREFIX+"",R.VARIABLE_NAME_DOUBLE_UNDERSCORE+"",R.VARIABLE_NAME_RESERVED+"",R.VARIABLE_NAME_STARTS_WITH_NUMBER+"",R.VARIABLE_NAME_CONTAINS_DOT+"",R.VARIABLE_NAME_INVALID_CHARS+"",R.PARSE_ERROR+"",R.PARSE_ERROR_AT_LOCATION+"",R.PARSE_ERROR_FOR_VARIABLE+"",R.UNDEFINED_VARIABLE+"",R.CANNOT_ACCESS_PROPERTY+"",R.CALLEE_NOT_FUNCTION+"",R.UNSUPPORTED_LOGICAL_OPERATOR+"",R.UNSUPPORTED_NODE_TYPE+"",R.UNSUPPORTED_BINARY_OPERATOR+"",R.UNSUPPORTED_UNARY_OPERATOR+"",R.NO_AST_FOUND+"",R.FAILED_TO_EVALUATE+"",R.NAMESPACE_HEAD_AS_VALUE+"",R.NAMESPACE_HEAD_IN_OPERATION+"",R.EXPRESSION_CANNOT_RETURN_ARRAY+"",R.EXPRESSION_CANNOT_RETURN_OBJECT+"",R.EXPRESSION_CANNOT_RETURN_STRING+"",R.UNSUPPORTED_RESULT_TYPE+"",R.STRING_IN_OPERATION+"",R.OBJECT_IN_OPERATION+"",R.ARRAY_IN_OPERATION+"",R.STRING_WITH_UNARY+"",R.OBJECT_WITH_UNARY+"",R.ARRAY_WITH_UNARY+"",R.PROPERTY_ACCESS_DENIED+"",R.FUNCTION_ALIASING_DENIED+"",R.CIRCULAR_DEPENDENCY+"",R.DECIMAL_PLACES_INVALID+"",R.EXPRESSION_MUST_BE_STRING+"",R.EXPRESSION_EMPTY+"";const ds=e=>{try{return Er(e.trim())}catch(r){if(r.location){const{line:t,column:n}=r.location.start;throw new Pe(R.PARSE_ERROR_AT_LOCATION,{line:t,column:n,expression:e})}throw new Pe(R.PARSE_ERROR,{expression:e})}},ms=e=>ps(e),hs=e=>{const r=new Map,t=new Set,n=new Map;for(const c of e)if(t.add(c.name),c.expr&&c.expr.trim())try{const u=ds(c.expr);n.set(c.name,u)}catch(u){throw u instanceof Pe?new Pe(R.PARSE_ERROR_FOR_VARIABLE,{variableName:c.name,expression:c.expr,line:u.line,column:u.column,originalMessage:u.message}):new Pe(R.PARSE_ERROR_FOR_VARIABLE,{variableName:c.name,expression:c.expr,originalMessage:u instanceof Error?u.message:String(u)})}for(const c of e){if(!c.expr||!c.expr.trim()){r.set(c.name,[]);continue}const u=n.get(c.name);if(!u)throw new Z(R.NO_AST_FOUND,c.name);const E=ms(u).filter(N=>t.has(N));r.set(c.name,E)}const i=new Set,s=new Set,o=[],l=(c,u=[])=>{if(i.has(c))return;if(s.has(c)){const E=[...u,c];throw new bt(R.CIRCULAR_DEPENDENCY,E)}s.add(c);const m=r.get(c)||[];for(const E of m)t.has(E)&&l(E,[...u,c]);s.delete(c),i.add(c),o.push(c)};for(const c of t)l(c);return{order:o,asts:n}},H=e=>e instanceof k?e:new k(e),ze=Symbol("NAMESPACE_HEAD"),Rt=e=>e!=null&&typeof e=="object"&&e[ze]===!0,gs=()=>{const e=Object.create(null);return e.$math=Object.create(null),e.$math[ze]=!0,e.$math.PI=new k(-1).acos(),e.$math.E=new k(1).exp(),e.$math.SQRT2=new k(2).sqrt(),e.$math.SQRT1_2=new k(.5).sqrt(),e.$math.LN2=new k(2).ln(),e.$math.LN10=new k(10).ln(),e.$math.LOG2E=e.$math.E.log(2),e.$math.LOG10E=e.$math.E.log(10),e.$math.abs=r=>H(r).abs(),e.$math.sqrt=r=>H(r).sqrt(),e.$math.cbrt=r=>H(r).cbrt(),e.$math.floor=r=>H(r).floor(),e.$math.ceil=r=>H(r).ceil(),e.$math.round=r=>H(r).round(),e.$math.trunc=r=>H(r).trunc(),e.$math.sin=r=>new k(Math.sin(H(r).toNumber())),e.$math.cos=r=>new k(Math.cos(H(r).toNumber())),e.$math.tan=r=>new k(Math.tan(H(r).toNumber())),e.$math.asin=r=>new k(Math.asin(H(r).toNumber())),e.$math.acos=r=>new k(Math.acos(H(r).toNumber())),e.$math.atan=r=>new k(Math.atan(H(r).toNumber())),e.$math.atan2=(r,t)=>new k(Math.atan2(H(r).toNumber(),H(t).toNumber())),e.$math.exp=r=>H(r).exp(),e.$math.ln=r=>H(r).ln(),e.$math.log=r=>H(r).log(),e.$math.log10=r=>H(r).log(10),e.$math.log2=r=>H(r).log(2),e.$math.pow=(r,t)=>H(r).pow(H(t)),e.$math.min=(...r)=>k.min(...r.map(H)),e.$math.max=(...r)=>k.max(...r.map(H)),e.$unit=Object.create(null),e.$unit[ze]=!0,e.$unit.mmToInch=r=>H(r).div(25.4),e.$unit.inchToMm=r=>H(r).mul(25.4),e.$unit.cmToInch=r=>H(r).div(2.54),e.$unit.inchToCm=r=>H(r).mul(2.54),e.$unit.mToFt=r=>H(r).mul(3.28084),e.$unit.ftToM=r=>H(r).div(3.28084),e.$angle=Object.create(null),e.$angle[ze]=!0,e.$angle.toRad=r=>H(r).mul(e.$math.PI).div(180),e.$angle.toDeg=r=>H(r).mul(180).div(e.$math.PI),e},xs=new Set(["prototype","__proto__","constructor"]),Es=e=>!(xs.has(e)||e.startsWith("__")),oe=async(e,r)=>{switch(e.type){case"Literal":return typeof e.value=="number"?new k(e.raw||e.value):e.value;case"Identifier":if(!(e.name in r))throw new Z(R.UNDEFINED_VARIABLE,e.name);return r[e.name];case"MemberExpression":const t=await oe(e.object,r);if(t==null)throw new Z(R.CANNOT_ACCESS_PROPERTY);let n;if(e.computed){const N=await oe(e.property,r);n=String(N)}else n=e.property.name;if(!Es(n))throw new st(R.PROPERTY_ACCESS_DENIED,n);return t[n];case"BinaryExpression":const i=await oe(e.left,r),s=await oe(e.right,r);return Ns(e.operator,i,s);case"UnaryExpression":const o=await oe(e.argument,r);return As(e.operator,o);case"CallExpression":const l=await oe(e.callee,r),c=[];for(const N of e.arguments)c.push(await oe(N,r));if(typeof l!="function")throw new Z(R.CALLEE_NOT_FUNCTION);let u=null;return e.callee.type==="MemberExpression"&&(u=await oe(e.callee.object,r)),l.apply(u,c);case"ConditionalExpression":return await oe(e.test,r)?await oe(e.consequent,r):await oe(e.alternate,r);case"LogicalExpression":const E=await oe(e.left,r);if(e.operator==="&&")return E&&await oe(e.right,r);if(e.operator==="||")return E||await oe(e.right,r);if(e.operator==="??")return E??await oe(e.right,r);throw new Z(R.UNSUPPORTED_LOGICAL_OPERATOR);default:throw new Z(R.UNSUPPORTED_NODE_TYPE)}},Ns=(e,r,t)=>{if(Rt(r)||Rt(t))throw new Z(R.NAMESPACE_HEAD_IN_OPERATION);const n=["+","-","*","/","%","**"],i=["<",">","<=",">="];if(n.includes(e)||i.includes(e)){if(typeof r=="string")throw new Z(R.STRING_IN_OPERATION);if(typeof r=="object"&&r!==null&&!(r instanceof k)&&!Array.isArray(r))throw new Z(R.OBJECT_IN_OPERATION);if(Array.isArray(r))throw new Z(R.ARRAY_IN_OPERATION);if(typeof t=="string")throw new Z(R.STRING_IN_OPERATION);if(typeof t=="object"&&t!==null&&!(t instanceof k)&&!Array.isArray(t))throw new Z(R.OBJECT_IN_OPERATION);if(Array.isArray(t))throw new Z(R.ARRAY_IN_OPERATION)}if(e==="=="||e==="="||e==="!="){if(r instanceof k&&t instanceof k){const l=r.eq(t);return e==="!="?!l:l}if(typeof r=="boolean"||r===null||typeof t=="boolean"||t===null){const l=r===t;return e==="!="?!l:l}const o=r==t;return e==="!="?!o:o}const s=o=>o instanceof k?o:new k(o);switch(e){case"+":return s(r).plus(s(t));case"-":return s(r).minus(s(t));case"*":return s(r).times(s(t));case"/":return s(r).div(s(t));case"%":return s(r).mod(s(t));case"**":return s(r).pow(s(t));case"<":return s(r).lt(s(t));case">":return s(r).gt(s(t));case"<=":return s(r).lte(s(t));case">=":return s(r).gte(s(t));default:throw new Z(R.UNSUPPORTED_BINARY_OPERATOR)}},As=(e,r)=>{switch(e){case"-":case"+":if(typeof r=="string")throw new Z(R.STRING_WITH_UNARY);if(typeof r=="object"&&r!==null&&!(r instanceof k)&&!Array.isArray(r))throw new Z(R.OBJECT_WITH_UNARY);if(Array.isArray(r))throw new Z(R.ARRAY_WITH_UNARY);return e==="-"?r instanceof k?r.neg():-r:r instanceof k?r:+r;case"!":return!r;default:throw new Z(R.UNSUPPORTED_UNARY_OPERATOR)}},_s=async(e,r)=>{try{const t=gs(),n=Object.create(null);for(const[s,o]of Object.entries(r))n[s]=o;for(const[s,o]of Object.entries(t))n[s]=o;const i=await oe(e,n);if(Rt(i))throw new Z(R.NAMESPACE_HEAD_AS_VALUE);if(typeof i=="function")throw new st(R.FUNCTION_ALIASING_DENIED);if(typeof i=="object"&&i!==null&&!(i instanceof k))throw Array.isArray(i)?new Z(R.EXPRESSION_CANNOT_RETURN_ARRAY):new Z(R.EXPRESSION_CANNOT_RETURN_OBJECT);if(typeof i=="string"){if(!isNaN(Number(i)))return new k(i);throw new Z(R.EXPRESSION_CANNOT_RETURN_STRING)}if(i instanceof k)return i;if(typeof i=="number")return new k(i);if(typeof i=="boolean"||i===null)return i;if(i===void 0)return null;throw new Z(R.UNSUPPORTED_RESULT_TYPE,void 0,{resultType:typeof i})}catch(t){if(t instanceof je)throw t;const n=new Error(R.FAILED_TO_EVALUATE);throw t instanceof Error&&(n.cause=t),n}},ws=/^(?![_$]{2})[a-zA-Z_][a-zA-Z0-9_$]*$/,Rs=Object.freeze(["true","false","null","Infinity"]),Nr=e=>typeof e!="string"?{valid:!1,error:R.VARIABLE_NAME_MUST_BE_STRING}:e.trim()===""?{valid:!1,error:R.VARIABLE_NAME_EMPTY}:e!==e.trim()?{valid:!1,error:R.VARIABLE_NAME_WHITESPACE}:e.startsWith("$")?{valid:!1,error:R.VARIABLE_NAME_DOLLAR_PREFIX}:e.startsWith("__")?{valid:!1,error:R.VARIABLE_NAME_DOUBLE_UNDERSCORE}:Rs.includes(e)?{valid:!1,error:R.VARIABLE_NAME_RESERVED}:/^\d/.test(e)?{valid:!1,error:R.VARIABLE_NAME_STARTS_WITH_NUMBER}:e.includes(".")?{valid:!1,error:R.VARIABLE_NAME_CONTAINS_DOT}:ws.test(e)?{valid:!0}:{valid:!1,error:R.VARIABLE_NAME_INVALID_CHARS},vs=e=>{if(typeof e!="string")return{valid:!1,error:R.EXPRESSION_MUST_BE_STRING};const r=e.trim();if(r==="")return{valid:!1,error:R.EXPRESSION_EMPTY};try{return Er(r),{valid:!0}}catch(t){if(t.location){const{line:n,column:i}=t.location.start;return{valid:!1,error:R.PARSE_ERROR_AT_LOCATION,line:n,column:i}}return{valid:!1,error:R.PARSE_ERROR}}};function bs(e,r){const{decimalPlaces:t}=r;if(typeof t!="number"||t<0||!Number.isInteger(t))throw new Error(R.DECIMAL_PLACES_INVALID);const n={};for(const[i,s]of Object.entries(e.values))s instanceof k&&s.isFinite()?n[i]=s.toDecimalPlaces(t):n[i]=s;return{values:n,order:e.order}}const Ts=async e=>{if(!Array.isArray(e))throw new Re(R.INPUT_MUST_BE_ARRAY);for(const l of e){if(!l||typeof l!="object")throw new Re(R.INPUT_MUST_BE_OBJECT);if(typeof l.name!="string"||!l.name)throw new Re(R.INPUT_NAME_REQUIRED);const c=Nr(l.name);if(!c.valid)throw new Re(c.error,l.name);if(l.expr===void 0&&l.value===void 0)throw new Re(R.INPUT_EXPR_OR_VALUE_REQUIRED,l.name);if(l.expr!==void 0&&typeof l.expr!="string")throw new Re(R.INPUT_EXPR_MUST_BE_STRING,l.name)}const r=new Set;for(const l of e){if(r.has(l.name))throw new Re(R.DUPLICATE_NAME,l.name);r.add(l.name)}const{order:t,asts:n}=hs(e),i=new Map;for(const l of e)l.value!==void 0&&i.set(l.name,l.value);const s=Object.create(null),o=Object.create(null);for(const l of t){let c;if(i.has(l))c=i.get(l);else{const u=n.get(l);u?c=await _s(u,o):c=null}c instanceof k||typeof c=="boolean"||c===null?(s[l]=c,o[l]=c):(o[l]=c,typeof c=="number"&&(s[l]=new k(c)))}return{values:s,order:t}};function Ps(){const[e,r]=ce.useState([{name:"a",expr:"10",mode:"expr"},{name:"b",expr:"a * 2",mode:"expr"},{name:"c",expr:"a + b",mode:"expr"}]),[t,n]=ce.useState(null),[i,s]=ce.useState(null),[o,l]=ce.useState(null),[c,u]=ce.useState(new Map),[m,E]=ce.useState(new Map),[N,v]=ce.useState(4),[U,I]=ce.useState("all"),J=ce.useRef(new Map),F=ce.useRef(new Map),ne=x=>x.valueRaw!==void 0?x.valueRaw:x.value?JSON.stringify(x.value,null,2):"",B=(x,O,$,j,M)=>{const Y="w-full px-3 py-2 text-sm border rounded font-mono focus:outline-none focus:ring-2";return x?`${Y} border-orange-400 bg-orange-50 focus:ring-orange-500`:o===O?`${Y} border-red-300 bg-white focus:ring-blue-500`:$==="value"&&(j||M)?`${Y} border-purple-400 bg-white focus:ring-purple-500`:$==="expr"||!$&&!j?`${Y} border-teal-400 bg-white focus:ring-teal-500`:`${Y} border-gray-300 bg-white focus:ring-blue-500`},X=(x,O,$)=>{const j=[...e];if(O==="value"){j[x].valueRaw=$;try{j[x].value=$?JSON.parse($):void 0}catch{j[x].value=void 0}}else j[x][O]=$;if(r(j),O==="name"){const M=F.current.get(x);M&&clearTimeout(M);const Y=setTimeout(()=>{const G=Nr($);E(z=>{const q=new Map(z);return G.valid?q.delete(x):q.set(x,G.error||"Invalid variable name"),q})},300);F.current.set(x,Y)}if(O==="expr"&&j[x].mode==="expr"){const M=J.current.get(x);if(M&&clearTimeout(M),!$.trim()){const G=new Map(c);G.delete(x),u(G);return}const Y=setTimeout(()=>{const G=vs($);u(z=>{const q=new Map(z);return G.valid?q.delete(x):q.set(x,G.error||"Syntax error"),q})},300);J.current.set(x,Y)}if(O==="value"&&j[x].mode==="value"){const M=J.current.get(x);if(M&&clearTimeout(M),!$.trim()){const G=new Map(c);G.delete(x),u(G);return}const Y=setTimeout(()=>{try{JSON.parse($),u(G=>{const z=new Map(G);return z.delete(x),z})}catch(G){u(z=>{const q=new Map(z);return q.set(x,G instanceof Error?G.message:"Invalid JSON"),q})}},300);J.current.set(x,Y)}},fe=(x="expr")=>{r([...e,{name:`var${N}`,expr:x==="expr"?"":void 0,value:void 0,mode:x}]),v(N+1)},se=x=>{const O=J.current.get(x);O&&(clearTimeout(O),J.current.delete(x));const $=F.current.get(x);$&&(clearTimeout($),F.current.delete(x)),r(e.filter((te,Q)=>Q!==x));const j=new Map(c),M=new Map(m);j.delete(x),M.delete(x);const Y=new Map,G=new Map,z=new Map,q=new Map;j.forEach((te,Q)=>{Q>x?Y.set(Q-1,te):Y.set(Q,te)}),M.forEach((te,Q)=>{Q>x?G.set(Q-1,te):G.set(Q,te)}),J.current.forEach((te,Q)=>{Q>x?z.set(Q-1,te):Q!==x&&z.set(Q,te)}),F.current.forEach((te,Q)=>{Q>x?q.set(Q-1,te):Q!==x&&q.set(Q,te)}),u(Y),E(G),J.current=z,F.current=q},Ee=()=>{r(x=>x.filter(O=>O.mode!=="value")),u(new Map),E(new Map),J.current.clear(),F.current.clear()},Ne=()=>{r(x=>x.filter(O=>O.mode==="value")),u(new Map),E(new Map),J.current.clear(),F.current.clear()},me=()=>{const x=document.createElement("input");x.type="file",x.accept=".json",x.onchange=O=>{const $=O.target.files?.[0];if($){const j=new FileReader;j.onload=M=>{try{const Y=JSON.parse(M.target?.result),G=[];Object.entries(Y).forEach(([z,q])=>{G.push({name:z,value:q,mode:"value"})}),r(z=>[...z.filter(q=>q.mode!=="value"),...G])}catch(Y){s("Failed to parse JSON file: "+(Y instanceof Error?Y.message:"Unknown error"))}},j.readAsText($)}},x.click()},be=async()=>{try{const x=await navigator.clipboard.readText(),O=JSON.parse(x);Object.entries(O).forEach(([$,j])=>{r(M=>[...M,{name:$,value:j,mode:"value"}])})}catch(x){s("Failed to parse JSON from clipboard: "+(x instanceof Error?x.message:"Unknown error"))}},ae=()=>{const x=document.createElement("input");x.type="file",x.accept=".json,.txt",x.onchange=O=>{const $=O.target.files?.[0];if($){const j=new FileReader;j.onload=M=>{try{const Y=M.target?.result,G=JSON.parse(Y),z=[];Array.isArray(G)?G.forEach(q=>{q.name&&(q.expr!==void 0||q.value!==void 0)&&z.push({name:q.name,expr:q.expr,value:q.value,mode:q.mode||(q.value!==void 0?"value":"expr")})}):Object.entries(G).forEach(([q,te])=>{z.push({name:q,expr:String(te),mode:"expr"})}),r(q=>[...q.filter(te=>te.mode==="value"),...z])}catch(Y){s("Failed to parse expressions file: "+(Y instanceof Error?Y.message:"Unknown error"))}},j.readAsText($)}},x.click()},Ae=async()=>{try{const x=await navigator.clipboard.readText(),O=JSON.parse(x);Array.isArray(O)?O.forEach($=>{$.name&&($.expr!==void 0||$.value!==void 0)&&r(j=>[...j,{name:$.name,expr:$.expr,value:$.value,mode:$.mode||($.value!==void 0?"value":"expr")}])}):Object.entries(O).forEach(([$,j])=>{r(M=>[...M,{name:$,expr:String(j),mode:"expr"}])})}catch(x){s("Failed to parse expressions from clipboard: "+(x instanceof Error?x.message:"Unknown error"))}},he=()=>{const O=e.filter(Y=>Y.mode==="expr").map(Y=>({name:Y.name,expr:Y.expr||""})),$=new Blob([JSON.stringify(O,null,2)],{type:"application/json"}),j=URL.createObjectURL($),M=document.createElement("a");M.href=j,M.download="expressions.json",M.click(),URL.revokeObjectURL(j)},Te=x=>{const O=tr[x];O&&(r(O.expressions),n(null),s(null),l(null),u(new Map),E(new Map))},ee=async()=>{if(s(null),l(null),c.size>0){const x=Array.from(c.keys())[0],O=c.get(x);s(`Cannot evaluate: ${O}`),l(x);return}if(m.size>0){const x=Array.from(m.keys())[0],O=m.get(x);s(`Cannot evaluate: ${O}`),l(x);return}try{const x=e.filter(j=>j.name.trim()?j.mode==="value"?j.value!==void 0&&j.value!=="":j.expr!==void 0:!1).map(j=>j.mode==="value"?{name:j.name,value:j.value}:{name:j.name,expr:j.expr||""});if(x.length===0){s("Please add at least one expression");return}const O=await Ts(x),$=U==="all"?O:bs(O,{decimalPlaces:parseInt(U)});n($)}catch(x){if(s(x.message),n(null),x.variableName){const O=e.findIndex($=>$.name===x.variableName);O!==-1&&l(O)}}},V=e.filter(x=>x.mode==="value").map(x=>({...x,originalIndex:e.indexOf(x)})),Ue=e.filter(x=>x.mode!=="value").map(x=>({...x,originalIndex:e.indexOf(x)}));return h.jsxs("div",{className:"content",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("h2",{style:{marginTop:"2rem"},children:"Playground"}),h.jsx("p",{className:"text-gray-600 text-sm sm:text-base mb-4",children:"Define variables with math expressions. They can reference each other and will be evaluated in the correct order automatically."}),h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Examples"}),h.jsxs("select",{onChange:x=>x.target.value&&Te(x.target.value),defaultValue:"",className:"px-3 py-2 text-sm border border-gray-300 rounded bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[h.jsx("option",{value:"",disabled:!0,children:"Choose an example"}),Object.entries(tr).map(([x,{name:O}])=>h.jsx("option",{value:x,children:O},x))]})]}),h.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-3 sm:p-4 mb-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("h3",{className:"text-lg font-semibold text-purple-900",children:"Values (JSON)"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:be,className:"px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Paste JSON from clipboard",children:[h.jsx(zt,{size:14}),h.jsx("span",{children:"Paste"})]}),h.jsxs("button",{onClick:me,className:"px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Upload JSON file",children:[h.jsx(Kt,{size:14}),h.jsx("span",{children:"Upload"})]}),V.length>0&&h.jsxs("button",{onClick:Ee,className:"px-3 py-1.5 bg-gray-500 hover:bg-gray-600 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Clear all values",children:[h.jsx(er,{size:14}),h.jsx("span",{children:"Clear All"})]})]})]}),h.jsx("p",{className:"text-purple-800 text-xs sm:text-sm mb-3 italic",children:"Values are JSON objects/arrays that can be referenced in expressions but do not appear in the evaluation results."}),V.length>0?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"hidden sm:grid sm:grid-cols-[150px_1fr_auto] gap-2 mb-2 text-sm font-medium text-purple-900",children:[h.jsx("div",{children:"Name"}),h.jsx("div",{children:"JSON Value"}),h.jsx("div",{className:"w-[90px]"})]}),h.jsx("div",{className:"space-y-4 sm:space-y-2",children:V.map(({originalIndex:x,...O})=>{const $=c.has(x),j=m.has(x);return h.jsxs("div",{className:`${o===x?"bg-red-50 -mx-2 px-2 py-1 rounded":""}`,children:[h.jsxs("div",{className:"hidden sm:grid sm:grid-cols-[150px_1fr_auto] gap-2 items-start",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("input",{type:"text",placeholder:"e.g. point",value:O.name,onChange:M=>X(x,"name",M.target.value),className:B(j,x,O.mode,!1,!0)}),j&&h.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:m.get(x)})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("textarea",{rows:3,value:ne(O),onChange:M=>X(x,"value",M.target.value),className:B($,x,O.mode,!0),placeholder:'{"x": 10, "y": 20}'}),$&&h.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:c.get(x)})]}),h.jsxs("button",{onClick:()=>se(x),className:"w-24 px-3 py-2 bg-gray-500 hover:bg-gray-600 text-white text-sm rounded transition-colors flex items-center gap-1.5 justify-center",children:[h.jsx(Xe,{size:16}),h.jsx("span",{children:"Remove"})]})]}),h.jsxs("div",{className:"sm:hidden flex gap-2",children:[h.jsxs("div",{className:"flex-1 space-y-1",children:[h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx("label",{className:"text-xs font-medium text-purple-900 w-12",children:"Name"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("input",{type:"text",placeholder:"e.g. point",value:O.name,onChange:M=>X(x,"name",M.target.value),className:B(j,x,O.mode,!1,!0)}),j&&h.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:m.get(x)})]})]}),h.jsxs("div",{className:"flex gap-2 items-start",children:[h.jsx("label",{className:"text-xs font-medium text-purple-900 w-12 mt-2",children:"Value"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("textarea",{rows:3,value:ne(O),onChange:M=>X(x,"value",M.target.value),className:B($,x,O.mode,!0),placeholder:'{"x": 10, "y": 20}'}),$&&h.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:c.get(x)})]})]})]}),h.jsx("button",{onClick:()=>se(x),className:"p-2 bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors self-center",children:h.jsx(Xe,{size:16})})]})]},x)})})]}):h.jsx("p",{className:"text-purple-700 text-sm italic text-center py-4",children:"No values defined. Add values to use in your expressions."}),h.jsx("div",{className:"flex justify-end gap-2 mt-3",children:h.jsxs("button",{onClick:()=>fe("value"),className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white text-sm rounded transition-colors flex items-center gap-1.5",children:[h.jsx(Qt,{size:16}),h.jsx("span",{children:"Add Value"})]})})]}),h.jsxs("div",{className:"bg-teal-50 border-2 border-teal-200 rounded-lg p-3 sm:p-4 mb-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("h3",{className:"text-lg font-semibold text-teal-900",children:"Expressions"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:Ae,className:"px-3 py-1.5 bg-teal-600 hover:bg-teal-700 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Paste expressions from clipboard",children:[h.jsx(zt,{size:14}),h.jsx("span",{children:"Paste"})]}),h.jsxs("button",{onClick:ae,className:"px-3 py-1.5 bg-teal-600 hover:bg-teal-700 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Upload expressions file",children:[h.jsx(Kt,{size:14}),h.jsx("span",{children:"Upload"})]}),h.jsxs("button",{onClick:he,className:"px-3 py-1.5 bg-teal-600 hover:bg-teal-700 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Download expressions",disabled:Ue.length===0,children:[h.jsx(fn,{size:14}),h.jsx("span",{children:"Download"})]}),Ue.length>0&&h.jsxs("button",{onClick:Ne,className:"px-3 py-1.5 bg-gray-500 hover:bg-gray-600 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Clear all expressions",children:[h.jsx(er,{size:14}),h.jsx("span",{children:"Clear All"})]})]})]}),h.jsx("p",{className:"text-teal-800 text-xs sm:text-sm mb-3 italic",children:"Expressions are mathematical formulas that will be evaluated and appear in the results."}),Ue.length>0?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"hidden sm:grid sm:grid-cols-[150px_1fr_auto] gap-2 mb-2 text-sm font-medium text-teal-900",children:[h.jsx("div",{children:"Name"}),h.jsx("div",{children:"Expression"}),h.jsx("div",{className:"w-[90px]"})]}),h.jsx("div",{className:"space-y-4 sm:space-y-2",children:Ue.map(({originalIndex:x,...O})=>{const $=c.has(x),j=m.has(x);return h.jsxs("div",{className:`${o===x?"bg-red-50 -mx-2 px-2 py-1 rounded":""}`,children:[h.jsxs("div",{className:"hidden sm:grid sm:grid-cols-[150px_1fr_auto] gap-2 items-start",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("input",{type:"text",placeholder:"e.g. radius",value:O.name,onChange:M=>X(x,"name",M.target.value),className:B(j,x,O.mode,!1,!0)}),j&&h.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:m.get(x)})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("input",{type:"text",placeholder:"e.g. a + b",value:O.expr||"",onChange:M=>X(x,"expr",M.target.value),className:B($,x,O.mode,!1,!1)}),$&&h.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:c.get(x)})]}),h.jsxs("button",{onClick:()=>se(x),className:"w-24 px-3 py-2 bg-gray-500 hover:bg-gray-600 text-white text-sm rounded transition-colors flex items-center gap-1.5 justify-center",children:[h.jsx(Xe,{size:16}),h.jsx("span",{children:"Remove"})]})]}),h.jsxs("div",{className:"sm:hidden flex gap-2",children:[h.jsxs("div",{className:"flex-1 space-y-1",children:[h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx("label",{className:"text-xs font-medium text-teal-900 w-12",children:"Name"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("input",{type:"text",placeholder:"e.g. radius",value:O.name,onChange:M=>X(x,"name",M.target.value),className:B(j,x,O.mode,!1,!0)}),j&&h.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:m.get(x)})]})]}),h.jsxs("div",{className:"flex gap-2 items-start",children:[h.jsx("label",{className:"text-xs font-medium text-teal-900 w-12 mt-2",children:"Expr"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("input",{type:"text",placeholder:"e.g. a + b",value:O.expr||"",onChange:M=>X(x,"expr",M.target.value),className:B($,x,O.mode,!1,!1)}),$&&h.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:c.get(x)})]})]})]}),h.jsx("button",{onClick:()=>se(x),className:"p-2 bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors self-center",children:h.jsx(Xe,{size:16})})]})]},x)})})]}):h.jsx("p",{className:"text-teal-700 text-sm italic text-center py-4",children:"No expressions defined. Add expressions to calculate results."}),h.jsx("div",{className:"flex justify-end gap-2 mt-3",children:h.jsxs("button",{onClick:()=>fe("expr"),className:"px-4 py-2 bg-teal-500 hover:bg-teal-600 text-white text-sm rounded transition-colors flex items-center gap-1.5",children:[h.jsx(Qt,{size:16}),h.jsx("span",{children:"Add Expression"})]})})]})]}),i&&h.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded",children:h.jsx("p",{className:"text-red-700 font-mono text-sm",children:i})}),h.jsx("div",{className:"mb-6",children:h.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[h.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-3",children:"Results"}),h.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[h.jsx("label",{htmlFor:"decimal-places",className:"text-sm text-gray-600 whitespace-nowrap",children:"Decimal places:"}),h.jsxs("select",{id:"decimal-places",value:U,onChange:x=>I(x.target.value),className:"px-2 py-1.5 text-sm border border-gray-300 rounded bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[h.jsx("option",{value:"all",children:"All"}),h.jsx("option",{value:"0",children:"0"}),h.jsx("option",{value:"2",children:"2"}),h.jsx("option",{value:"4",children:"4"}),h.jsx("option",{value:"6",children:"6"}),h.jsx("option",{value:"7",children:"7"}),h.jsx("option",{value:"10",children:"10"})]})]}),h.jsxs("div",{className:"flex gap-2 mb-4",children:[h.jsxs("button",{onClick:ee,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded font-semibold transition-colors flex items-center gap-1.5",children:[h.jsx(mn,{size:18}),h.jsx("span",{children:"Evaluate"})]}),t&&h.jsx("button",{onClick:()=>n(null),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white text-sm rounded font-semibold transition-colors",children:"Reset"})]}),t?h.jsxs(h.Fragment,{children:[h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"border-b border-green-200",children:[h.jsx("th",{className:"text-left py-2 font-medium text-gray-600",children:"Name"}),h.jsx("th",{className:"text-left py-2 font-medium text-gray-600",children:"Value"})]})}),h.jsx("tbody",{children:Object.entries(t.values).map(([x,O])=>{const $=O===null?"null":typeof O=="boolean"?String(O):O.toString();return h.jsxs("tr",{children:[h.jsx("td",{className:"py-2 px-2 font-mono text-gray-700",children:x}),h.jsx("td",{className:"py-2 px-2 font-mono text-green-700 font-semibold break-all",children:$})]},x)})})]}),h.jsxs("div",{className:"mt-4 text-gray-600 text-xs sm:text-sm italic",children:["Evaluation order: ",t.order.join("  ")]})]}):h.jsx("p",{className:"text-gray-500 text-sm italic",children:"Click Evaluate to see results"})]})}),h.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-600 rounded-lg p-4 sm:p-6",children:[h.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-blue-900 mb-3",children:"Quick Tips"}),h.jsxs("ul",{className:"space-y-1.5 text-gray-700 text-sm sm:text-base",children:[h.jsxs("li",{children:[" Variables can reference other variables (e.g., ",h.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"b = a * 2"}),")"]}),h.jsxs("li",{children:[" Use decimal precision math (e.g., ",h.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"0.1 + 0.2"})," = 0.3 exactly!)"]}),h.jsxs("li",{children:[" Access nested properties with dots (e.g., ",h.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"point.x"}),")"]}),h.jsxs("li",{children:[" Use ",h.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"$math"})," functions: ",h.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"$math.sqrt(16)"}),", ",h.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"$math.PI"}),", etc."]}),h.jsxs("li",{children:[" Convert units: ",h.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"$unit.mmToInch(25.4)"})]}),h.jsxs("li",{children:[" Convert angles: ",h.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"$angle.toRad(180)"})]})]})]})]})}export{Ps as default};
