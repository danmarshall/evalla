/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Ae=9e15,ue=1e9,ot="0123456789abcdef",Re="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",je="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",ft={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ae,maxE:Ae,crypto:!1},Kt,se,x=!0,Ue="[DecimalError] ",ce=Ue+"Invalid argument: ",Qt=Ue+"Precision limit exceeded",Jt=Ue+"crypto unavailable",zt="[object Decimal]",W=Math.floor,Z=Math.pow,mn=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,wn=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,$n=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Yt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,te=1e7,O=7,En=9007199254740991,vn=Re.length-1,at=je.length-1,v={toStringTag:zt};v.absoluteValue=v.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),k(t)};v.ceil=function(){return k(new this.constructor(this),this.e+1,2)};v.clampedTo=v.clamp=function(t,r){var e,n=this,i=n.constructor;if(t=new i(t),r=new i(r),!t.s||!r.s)return new i(NaN);if(t.gt(r))throw Error(ce+r);return e=n.cmp(t),e<0?t:n.cmp(r)>0?r:new i(n)};v.comparedTo=v.cmp=function(t){var r,e,n,i,s=this,c=s.d,l=(t=new s.constructor(t)).d,u=s.s,p=t.s;if(!c||!l)return!u||!p?NaN:u!==p?u:c===l?0:!c^u<0?1:-1;if(!c[0]||!l[0])return c[0]?u:l[0]?-p:0;if(u!==p)return u;if(s.e!==t.e)return s.e>t.e^u<0?1:-1;for(n=c.length,i=l.length,r=0,e=n<i?n:i;r<e;++r)if(c[r]!==l[r])return c[r]>l[r]^u<0?1:-1;return n===i?0:n>i^u<0?1:-1};v.cosine=v.cos=function(){var t,r,e=this,n=e.constructor;return e.d?e.d[0]?(t=n.precision,r=n.rounding,n.precision=t+Math.max(e.e,e.sd())+O,n.rounding=1,e=bn(n,ir(n,e)),n.precision=t,n.rounding=r,k(se==2||se==3?e.neg():e,t,r,!0)):new n(1):new n(NaN)};v.cubeRoot=v.cbrt=function(){var t,r,e,n,i,s,c,l,u,p,m=this,$=m.constructor;if(!m.isFinite()||m.isZero())return new $(m);for(x=!1,s=m.s*Z(m.s*m,1/3),!s||Math.abs(s)==1/0?(e=B(m.d),t=m.e,(s=(t-e.length+1)%3)&&(e+=s==1||s==-2?"0":"00"),s=Z(e,1/3),t=W((t+1)/3)-(t%3==(t<0?-1:2)),s==1/0?e="5e"+t:(e=s.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new $(e),n.s=m.s):n=new $(s.toString()),c=(t=$.precision)+3;;)if(l=n,u=l.times(l).times(l),p=u.plus(m),n=R(p.plus(m).times(l),p.plus(u),c+2,1),B(l.d).slice(0,c)===(e=B(n.d)).slice(0,c))if(e=e.slice(c-3,c+1),e=="9999"||!i&&e=="4999"){if(!i&&(k(l,t+1,0),l.times(l).times(l).eq(m))){n=l;break}c+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(k(n,t+1,1),r=!n.times(n).times(n).eq(m));break}return x=!0,k(n,t,$.rounding,r)};v.decimalPlaces=v.dp=function(){var t,r=this.d,e=NaN;if(r){if(t=r.length-1,e=(t-W(this.e/O))*O,t=r[t],t)for(;t%10==0;t/=10)e--;e<0&&(e=0)}return e};v.dividedBy=v.div=function(t){return R(this,new this.constructor(t))};v.dividedToIntegerBy=v.divToInt=function(t){var r=this,e=r.constructor;return k(R(r,new e(t),0,1,1),e.precision,e.rounding)};v.equals=v.eq=function(t){return this.cmp(t)===0};v.floor=function(){return k(new this.constructor(this),this.e+1,3)};v.greaterThan=v.gt=function(t){return this.cmp(t)>0};v.greaterThanOrEqualTo=v.gte=function(t){var r=this.cmp(t);return r==1||r===0};v.hyperbolicCosine=v.cosh=function(){var t,r,e,n,i,s=this,c=s.constructor,l=new c(1);if(!s.isFinite())return new c(s.s?1/0:NaN);if(s.isZero())return l;e=c.precision,n=c.rounding,c.precision=e+Math.max(s.e,s.sd())+4,c.rounding=1,i=s.d.length,i<32?(t=Math.ceil(i/3),r=(1/Ve(4,t)).toString()):(t=16,r="2.3283064365386962890625e-10"),s=ye(c,1,s.times(r),new c(1),!0);for(var u,p=t,m=new c(8);p--;)u=s.times(s),s=l.minus(u.times(m.minus(u.times(m))));return k(s,c.precision=e,c.rounding=n,!0)};v.hyperbolicSine=v.sinh=function(){var t,r,e,n,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(r=s.precision,e=s.rounding,s.precision=r+Math.max(i.e,i.sd())+4,s.rounding=1,n=i.d.length,n<3)i=ye(s,2,i,i,!0);else{t=1.4*Math.sqrt(n),t=t>16?16:t|0,i=i.times(1/Ve(5,t)),i=ye(s,2,i,i,!0);for(var c,l=new s(5),u=new s(16),p=new s(20);t--;)c=i.times(i),i=i.times(l.plus(c.times(u.times(c).plus(p))))}return s.precision=r,s.rounding=e,k(i,r,e,!0)};v.hyperbolicTangent=v.tanh=function(){var t,r,e=this,n=e.constructor;return e.isFinite()?e.isZero()?new n(e):(t=n.precision,r=n.rounding,n.precision=t+7,n.rounding=1,R(e.sinh(),e.cosh(),n.precision=t,n.rounding=r)):new n(e.s)};v.inverseCosine=v.acos=function(){var t=this,r=t.constructor,e=t.abs().cmp(1),n=r.precision,i=r.rounding;return e!==-1?e===0?t.isNeg()?re(r,n,i):new r(0):new r(NaN):t.isZero()?re(r,n+4,i).times(.5):(r.precision=n+6,r.rounding=1,t=new r(1).minus(t).div(t.plus(1)).sqrt().atan(),r.precision=n,r.rounding=i,t.times(2))};v.inverseHyperbolicCosine=v.acosh=function(){var t,r,e=this,n=e.constructor;return e.lte(1)?new n(e.eq(1)?0:NaN):e.isFinite()?(t=n.precision,r=n.rounding,n.precision=t+Math.max(Math.abs(e.e),e.sd())+4,n.rounding=1,x=!1,e=e.times(e).minus(1).sqrt().plus(e),x=!0,n.precision=t,n.rounding=r,e.ln()):new n(e)};v.inverseHyperbolicSine=v.asinh=function(){var t,r,e=this,n=e.constructor;return!e.isFinite()||e.isZero()?new n(e):(t=n.precision,r=n.rounding,n.precision=t+2*Math.max(Math.abs(e.e),e.sd())+6,n.rounding=1,x=!1,e=e.times(e).plus(1).sqrt().plus(e),x=!0,n.precision=t,n.rounding=r,e.ln())};v.inverseHyperbolicTangent=v.atanh=function(){var t,r,e,n,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=s.precision,r=s.rounding,n=i.sd(),Math.max(n,t)<2*-i.e-1?k(new s(i),t,r,!0):(s.precision=e=n-i.e,i=R(i.plus(1),new s(1).minus(i),e+t,1),s.precision=t+4,s.rounding=1,i=i.ln(),s.precision=t,s.rounding=r,i.times(.5))):new s(NaN)};v.inverseSine=v.asin=function(){var t,r,e,n,i=this,s=i.constructor;return i.isZero()?new s(i):(r=i.abs().cmp(1),e=s.precision,n=s.rounding,r!==-1?r===0?(t=re(s,e+4,n).times(.5),t.s=i.s,t):new s(NaN):(s.precision=e+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=e,s.rounding=n,i.times(2)))};v.inverseTangent=v.atan=function(){var t,r,e,n,i,s,c,l,u,p=this,m=p.constructor,$=m.precision,w=m.rounding;if(p.isFinite()){if(p.isZero())return new m(p);if(p.abs().eq(1)&&$+4<=at)return c=re(m,$+4,w).times(.25),c.s=p.s,c}else{if(!p.s)return new m(NaN);if($+4<=at)return c=re(m,$+4,w).times(.5),c.s=p.s,c}for(m.precision=l=$+10,m.rounding=1,e=Math.min(28,l/O+2|0),t=e;t;--t)p=p.div(p.times(p).plus(1).sqrt().plus(1));for(x=!1,r=Math.ceil(l/O),n=1,u=p.times(p),c=new m(p),i=p;t!==-1;)if(i=i.times(u),s=c.minus(i.div(n+=2)),i=i.times(u),c=s.plus(i.div(n+=2)),c.d[r]!==void 0)for(t=r;c.d[t]===s.d[t]&&t--;);return e&&(c=c.times(2<<e-1)),x=!0,k(c,m.precision=$,m.rounding=w,!0)};v.isFinite=function(){return!!this.d};v.isInteger=v.isInt=function(){return!!this.d&&W(this.e/O)>this.d.length-2};v.isNaN=function(){return!this.s};v.isNegative=v.isNeg=function(){return this.s<0};v.isPositive=v.isPos=function(){return this.s>0};v.isZero=function(){return!!this.d&&this.d[0]===0};v.lessThan=v.lt=function(t){return this.cmp(t)<0};v.lessThanOrEqualTo=v.lte=function(t){return this.cmp(t)<1};v.logarithm=v.log=function(t){var r,e,n,i,s,c,l,u,p=this,m=p.constructor,$=m.precision,w=m.rounding,N=5;if(t==null)t=new m(10),r=!0;else{if(t=new m(t),e=t.d,t.s<0||!e||!e[0]||t.eq(1))return new m(NaN);r=t.eq(10)}if(e=p.d,p.s<0||!e||!e[0]||p.eq(1))return new m(e&&!e[0]?-1/0:p.s!=1?NaN:e?0:1/0);if(r)if(e.length>1)s=!0;else{for(i=e[0];i%10===0;)i/=10;s=i!==1}if(x=!1,l=$+N,c=le(p,l),n=r?Te(m,l+10):le(t,l),u=R(c,n,l,1),Oe(u.d,i=$,w))do if(l+=10,c=le(p,l),n=r?Te(m,l+10):le(t,l),u=R(c,n,l,1),!s){+B(u.d).slice(i+1,i+15)+1==1e14&&(u=k(u,$+1,0));break}while(Oe(u.d,i+=10,w));return x=!0,k(u,$,w)};v.minus=v.sub=function(t){var r,e,n,i,s,c,l,u,p,m,$,w,N=this,P=N.constructor;if(t=new P(t),!N.d||!t.d)return!N.s||!t.s?t=new P(NaN):N.d?t.s=-t.s:t=new P(t.d||N.s!==t.s?N:NaN),t;if(N.s!=t.s)return t.s=-t.s,N.plus(t);if(p=N.d,w=t.d,l=P.precision,u=P.rounding,!p[0]||!w[0]){if(w[0])t.s=-t.s;else if(p[0])t=new P(N);else return new P(u===3?-0:0);return x?k(t,l,u):t}if(e=W(t.e/O),m=W(N.e/O),p=p.slice(),s=m-e,s){for($=s<0,$?(r=p,s=-s,c=w.length):(r=w,e=m,c=p.length),n=Math.max(Math.ceil(l/O),c)+2,s>n&&(s=n,r.length=1),r.reverse(),n=s;n--;)r.push(0);r.reverse()}else{for(n=p.length,c=w.length,$=n<c,$&&(c=n),n=0;n<c;n++)if(p[n]!=w[n]){$=p[n]<w[n];break}s=0}for($&&(r=p,p=w,w=r,t.s=-t.s),c=p.length,n=w.length-c;n>0;--n)p[c++]=0;for(n=w.length;n>s;){if(p[--n]<w[n]){for(i=n;i&&p[--i]===0;)p[i]=te-1;--p[i],p[n]+=te}p[n]-=w[n]}for(;p[--c]===0;)p.pop();for(;p[0]===0;p.shift())--e;return p[0]?(t.d=p,t.e=Ze(p,e),x?k(t,l,u):t):new P(u===3?-0:0)};v.modulo=v.mod=function(t){var r,e=this,n=e.constructor;return t=new n(t),!e.d||!t.s||t.d&&!t.d[0]?new n(NaN):!t.d||e.d&&!e.d[0]?k(new n(e),n.precision,n.rounding):(x=!1,n.modulo==9?(r=R(e,t.abs(),0,3,1),r.s*=t.s):r=R(e,t,0,n.modulo,1),r=r.times(t),x=!0,e.minus(r))};v.naturalExponential=v.exp=function(){return lt(this)};v.naturalLogarithm=v.ln=function(){return le(this)};v.negated=v.neg=function(){var t=new this.constructor(this);return t.s=-t.s,k(t)};v.plus=v.add=function(t){var r,e,n,i,s,c,l,u,p,m,$=this,w=$.constructor;if(t=new w(t),!$.d||!t.d)return!$.s||!t.s?t=new w(NaN):$.d||(t=new w(t.d||$.s===t.s?$:NaN)),t;if($.s!=t.s)return t.s=-t.s,$.minus(t);if(p=$.d,m=t.d,l=w.precision,u=w.rounding,!p[0]||!m[0])return m[0]||(t=new w($)),x?k(t,l,u):t;if(s=W($.e/O),n=W(t.e/O),p=p.slice(),i=s-n,i){for(i<0?(e=p,i=-i,c=m.length):(e=m,n=s,c=p.length),s=Math.ceil(l/O),c=s>c?s+1:c+1,i>c&&(i=c,e.length=1),e.reverse();i--;)e.push(0);e.reverse()}for(c=p.length,i=m.length,c-i<0&&(i=c,e=m,m=p,p=e),r=0;i;)r=(p[--i]=p[i]+m[i]+r)/te|0,p[i]%=te;for(r&&(p.unshift(r),++n),c=p.length;p[--c]==0;)p.pop();return t.d=p,t.e=Ze(p,n),x?k(t,l,u):t};v.precision=v.sd=function(t){var r,e=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ce+t);return e.d?(r=er(e.d),t&&e.e+1>r&&(r=e.e+1)):r=NaN,r};v.round=function(){var t=this,r=t.constructor;return k(new r(t),t.e+1,r.rounding)};v.sine=v.sin=function(){var t,r,e=this,n=e.constructor;return e.isFinite()?e.isZero()?new n(e):(t=n.precision,r=n.rounding,n.precision=t+Math.max(e.e,e.sd())+O,n.rounding=1,e=An(n,ir(n,e)),n.precision=t,n.rounding=r,k(se>2?e.neg():e,t,r,!0)):new n(NaN)};v.squareRoot=v.sqrt=function(){var t,r,e,n,i,s,c=this,l=c.d,u=c.e,p=c.s,m=c.constructor;if(p!==1||!l||!l[0])return new m(!p||p<0&&(!l||l[0])?NaN:l?c:1/0);for(x=!1,p=Math.sqrt(+c),p==0||p==1/0?(r=B(l),(r.length+u)%2==0&&(r+="0"),p=Math.sqrt(r),u=W((u+1)/2)-(u<0||u%2),p==1/0?r="5e"+u:(r=p.toExponential(),r=r.slice(0,r.indexOf("e")+1)+u),n=new m(r)):n=new m(p.toString()),e=(u=m.precision)+3;;)if(s=n,n=s.plus(R(c,s,e+2,1)).times(.5),B(s.d).slice(0,e)===(r=B(n.d)).slice(0,e))if(r=r.slice(e-3,e+1),r=="9999"||!i&&r=="4999"){if(!i&&(k(s,u+1,0),s.times(s).eq(c))){n=s;break}e+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(k(n,u+1,1),t=!n.times(n).eq(c));break}return x=!0,k(n,u,m.rounding,t)};v.tangent=v.tan=function(){var t,r,e=this,n=e.constructor;return e.isFinite()?e.isZero()?new n(e):(t=n.precision,r=n.rounding,n.precision=t+10,n.rounding=1,e=e.sin(),e.s=1,e=R(e,new n(1).minus(e.times(e)).sqrt(),t+10,0),n.precision=t,n.rounding=r,k(se==2||se==4?e.neg():e,t,r,!0)):new n(NaN)};v.times=v.mul=function(t){var r,e,n,i,s,c,l,u,p,m=this,$=m.constructor,w=m.d,N=(t=new $(t)).d;if(t.s*=m.s,!w||!w[0]||!N||!N[0])return new $(!t.s||w&&!w[0]&&!N||N&&!N[0]&&!w?NaN:!w||!N?t.s/0:t.s*0);for(e=W(m.e/O)+W(t.e/O),u=w.length,p=N.length,u<p&&(s=w,w=N,N=s,c=u,u=p,p=c),s=[],c=u+p,n=c;n--;)s.push(0);for(n=p;--n>=0;){for(r=0,i=u+n;i>n;)l=s[i]+N[n]*w[i-n-1]+r,s[i--]=l%te|0,r=l/te|0;s[i]=(s[i]+r)%te|0}for(;!s[--c];)s.pop();return r?++e:s.shift(),t.d=s,t.e=Ze(s,e),x?k(t,$.precision,$.rounding):t};v.toBinary=function(t,r){return ut(this,2,t,r)};v.toDecimalPlaces=v.toDP=function(t,r){var e=this,n=e.constructor;return e=new n(e),t===void 0?e:(K(t,0,ue),r===void 0?r=n.rounding:K(r,0,8),k(e,t+e.e+1,r))};v.toExponential=function(t,r){var e,n=this,i=n.constructor;return t===void 0?e=ne(n,!0):(K(t,0,ue),r===void 0?r=i.rounding:K(r,0,8),n=k(new i(n),t+1,r),e=ne(n,!0,t+1)),n.isNeg()&&!n.isZero()?"-"+e:e};v.toFixed=function(t,r){var e,n,i=this,s=i.constructor;return t===void 0?e=ne(i):(K(t,0,ue),r===void 0?r=s.rounding:K(r,0,8),n=k(new s(i),t+i.e+1,r),e=ne(n,!1,t+n.e+1)),i.isNeg()&&!i.isZero()?"-"+e:e};v.toFraction=function(t){var r,e,n,i,s,c,l,u,p,m,$,w,N=this,P=N.d,M=N.constructor;if(!P)return new M(N);if(p=e=new M(1),n=u=new M(0),r=new M(n),s=r.e=er(P)-N.e-1,c=s%O,r.d[0]=Z(10,c<0?O+c:c),t==null)t=s>0?r:p;else{if(l=new M(t),!l.isInt()||l.lt(p))throw Error(ce+l);t=l.gt(r)?s>0?r:p:l}for(x=!1,l=new M(B(P)),m=M.precision,M.precision=s=P.length*O*2;$=R(l,r,0,1,1),i=e.plus($.times(n)),i.cmp(t)!=1;)e=n,n=i,i=p,p=u.plus($.times(i)),u=i,i=r,r=l.minus($.times(i)),l=i;return i=R(t.minus(e),n,0,1,1),u=u.plus(i.times(p)),e=e.plus(i.times(n)),u.s=p.s=N.s,w=R(p,n,s,1).minus(N).abs().cmp(R(u,e,s,1).minus(N).abs())<1?[p,n]:[u,e],M.precision=m,x=!0,w};v.toHexadecimal=v.toHex=function(t,r){return ut(this,16,t,r)};v.toNearest=function(t,r){var e=this,n=e.constructor;if(e=new n(e),t==null){if(!e.d)return e;t=new n(1),r=n.rounding}else{if(t=new n(t),r===void 0?r=n.rounding:K(r,0,8),!e.d)return t.s?e:t;if(!t.d)return t.s&&(t.s=e.s),t}return t.d[0]?(x=!1,e=R(e,t,0,r,1).times(t),x=!0,k(e)):(t.s=e.s,e=t),e};v.toNumber=function(){return+this};v.toOctal=function(t,r){return ut(this,8,t,r)};v.toPower=v.pow=function(t){var r,e,n,i,s,c,l=this,u=l.constructor,p=+(t=new u(t));if(!l.d||!t.d||!l.d[0]||!t.d[0])return new u(Z(+l,p));if(l=new u(l),l.eq(1))return l;if(n=u.precision,s=u.rounding,t.eq(1))return k(l,n,s);if(r=W(t.e/O),r>=t.d.length-1&&(e=p<0?-p:p)<=En)return i=tr(u,l,e,n),t.s<0?new u(1).div(i):k(i,n,s);if(c=l.s,c<0){if(r<t.d.length-1)return new u(NaN);if((t.d[r]&1)==0&&(c=1),l.e==0&&l.d[0]==1&&l.d.length==1)return l.s=c,l}return e=Z(+l,p),r=e==0||!isFinite(e)?W(p*(Math.log("0."+B(l.d))/Math.LN10+l.e+1)):new u(e+"").e,r>u.maxE+1||r<u.minE-1?new u(r>0?c/0:0):(x=!1,u.rounding=l.s=1,e=Math.min(12,(r+"").length),i=lt(t.times(le(l,n+e)),n),i.d&&(i=k(i,n+5,1),Oe(i.d,n,s)&&(r=n+10,i=k(lt(t.times(le(l,r+e)),r),r+5,1),+B(i.d).slice(n+1,n+15)+1==1e14&&(i=k(i,n+1,0)))),i.s=c,x=!0,u.rounding=s,k(i,n,s))};v.toPrecision=function(t,r){var e,n=this,i=n.constructor;return t===void 0?e=ne(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(K(t,1,ue),r===void 0?r=i.rounding:K(r,0,8),n=k(new i(n),t,r),e=ne(n,t<=n.e||n.e<=i.toExpNeg,t)),n.isNeg()&&!n.isZero()?"-"+e:e};v.toSignificantDigits=v.toSD=function(t,r){var e=this,n=e.constructor;return t===void 0?(t=n.precision,r=n.rounding):(K(t,1,ue),r===void 0?r=n.rounding:K(r,0,8)),k(new n(e),t,r)};v.toString=function(){var t=this,r=t.constructor,e=ne(t,t.e<=r.toExpNeg||t.e>=r.toExpPos);return t.isNeg()&&!t.isZero()?"-"+e:e};v.truncated=v.trunc=function(){return k(new this.constructor(this),this.e+1,1)};v.valueOf=v.toJSON=function(){var t=this,r=t.constructor,e=ne(t,t.e<=r.toExpNeg||t.e>=r.toExpPos);return t.isNeg()?"-"+e:e};function B(t){var r,e,n,i=t.length-1,s="",c=t[0];if(i>0){for(s+=c,r=1;r<i;r++)n=t[r]+"",e=O-n.length,e&&(s+=ae(e)),s+=n;c=t[r],n=c+"",e=O-n.length,e&&(s+=ae(e))}else if(c===0)return"0";for(;c%10===0;)c/=10;return s+c}function K(t,r,e){if(t!==~~t||t<r||t>e)throw Error(ce+t)}function Oe(t,r,e,n){var i,s,c,l;for(s=t[0];s>=10;s/=10)--r;return--r<0?(r+=O,i=0):(i=Math.ceil((r+1)/O),r%=O),s=Z(10,O-r),l=t[i]%s|0,n==null?r<3?(r==0?l=l/100|0:r==1&&(l=l/10|0),c=e<4&&l==99999||e>3&&l==49999||l==5e4||l==0):c=(e<4&&l+1==s||e>3&&l+1==s/2)&&(t[i+1]/s/100|0)==Z(10,r-2)-1||(l==s/2||l==0)&&(t[i+1]/s/100|0)==0:r<4?(r==0?l=l/1e3|0:r==1?l=l/100|0:r==2&&(l=l/10|0),c=(n||e<4)&&l==9999||!n&&e>3&&l==4999):c=((n||e<4)&&l+1==s||!n&&e>3&&l+1==s/2)&&(t[i+1]/s/1e3|0)==Z(10,r-3)-1,c}function _e(t,r,e){for(var n,i=[0],s,c=0,l=t.length;c<l;){for(s=i.length;s--;)i[s]*=r;for(i[0]+=ot.indexOf(t.charAt(c++)),n=0;n<i.length;n++)i[n]>e-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/e|0,i[n]%=e)}return i.reverse()}function bn(t,r){var e,n,i;if(r.isZero())return r;n=r.d.length,n<32?(e=Math.ceil(n/3),i=(1/Ve(4,e)).toString()):(e=16,i="2.3283064365386962890625e-10"),t.precision+=e,r=ye(t,1,r.times(i),new t(1));for(var s=e;s--;){var c=r.times(r);r=c.times(c).minus(c).times(8).plus(1)}return t.precision-=e,r}var R=(function(){function t(n,i,s){var c,l=0,u=n.length;for(n=n.slice();u--;)c=n[u]*i+l,n[u]=c%s|0,l=c/s|0;return l&&n.unshift(l),n}function r(n,i,s,c){var l,u;if(s!=c)u=s>c?1:-1;else for(l=u=0;l<s;l++)if(n[l]!=i[l]){u=n[l]>i[l]?1:-1;break}return u}function e(n,i,s,c){for(var l=0;s--;)n[s]-=l,l=n[s]<i[s]?1:0,n[s]=l*c+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,c,l,u){var p,m,$,w,N,P,M,j,D,G,q,T,oe,H,me,pe,fe,we,X,he,$e=n.constructor,Ce=n.s==i.s?1:-1,V=n.d,_=i.d;if(!V||!V[0]||!_||!_[0])return new $e(!n.s||!i.s||(V?_&&V[0]==_[0]:!_)?NaN:V&&V[0]==0||!_?Ce*0:Ce/0);for(u?(N=1,m=n.e-i.e):(u=te,N=O,m=W(n.e/N)-W(i.e/N)),X=_.length,fe=V.length,D=new $e(Ce),G=D.d=[],$=0;_[$]==(V[$]||0);$++);if(_[$]>(V[$]||0)&&m--,s==null?(H=s=$e.precision,c=$e.rounding):l?H=s+(n.e-i.e)+1:H=s,H<0)G.push(1),P=!0;else{if(H=H/N+2|0,$=0,X==1){for(w=0,_=_[0],H++;($<fe||w)&&H--;$++)me=w*u+(V[$]||0),G[$]=me/_|0,w=me%_|0;P=w||$<fe}else{for(w=u/(_[0]+1)|0,w>1&&(_=t(_,w,u),V=t(V,w,u),X=_.length,fe=V.length),pe=X,q=V.slice(0,X),T=q.length;T<X;)q[T++]=0;he=_.slice(),he.unshift(0),we=_[0],_[1]>=u/2&&++we;do w=0,p=r(_,q,X,T),p<0?(oe=q[0],X!=T&&(oe=oe*u+(q[1]||0)),w=oe/we|0,w>1?(w>=u&&(w=u-1),M=t(_,w,u),j=M.length,T=q.length,p=r(M,q,j,T),p==1&&(w--,e(M,X<j?he:_,j,u))):(w==0&&(p=w=1),M=_.slice()),j=M.length,j<T&&M.unshift(0),e(q,M,T,u),p==-1&&(T=q.length,p=r(_,q,X,T),p<1&&(w++,e(q,X<T?he:_,T,u))),T=q.length):p===0&&(w++,q=[0]),G[$++]=w,p&&q[0]?q[T++]=V[pe]||0:(q=[V[pe]],T=1);while((pe++<fe||q[0]!==void 0)&&H--);P=q[0]!==void 0}G[0]||G.shift()}if(N==1)D.e=m,Kt=P;else{for($=1,w=G[0];w>=10;w/=10)$++;D.e=$+m*N-1,k(D,l?s+D.e+1:s,c,P)}return D}})();function k(t,r,e,n){var i,s,c,l,u,p,m,$,w,N=t.constructor;e:if(r!=null){if($=t.d,!$)return t;for(i=1,l=$[0];l>=10;l/=10)i++;if(s=r-i,s<0)s+=O,c=r,m=$[w=0],u=m/Z(10,i-c-1)%10|0;else if(w=Math.ceil((s+1)/O),l=$.length,w>=l)if(n){for(;l++<=w;)$.push(0);m=u=0,i=1,s%=O,c=s-O+1}else break e;else{for(m=l=$[w],i=1;l>=10;l/=10)i++;s%=O,c=s-O+i,u=c<0?0:m/Z(10,i-c-1)%10|0}if(n=n||r<0||$[w+1]!==void 0||(c<0?m:m%Z(10,i-c-1)),p=e<4?(u||n)&&(e==0||e==(t.s<0?3:2)):u>5||u==5&&(e==4||n||e==6&&(s>0?c>0?m/Z(10,i-c):0:$[w-1])%10&1||e==(t.s<0?8:7)),r<1||!$[0])return $.length=0,p?(r-=t.e+1,$[0]=Z(10,(O-r%O)%O),t.e=-r||0):$[0]=t.e=0,t;if(s==0?($.length=w,l=1,w--):($.length=w+1,l=Z(10,O-s),$[w]=c>0?(m/Z(10,i-c)%Z(10,c)|0)*l:0),p)for(;;)if(w==0){for(s=1,c=$[0];c>=10;c/=10)s++;for(c=$[0]+=l,l=1;c>=10;c/=10)l++;s!=l&&(t.e++,$[0]==te&&($[0]=1));break}else{if($[w]+=l,$[w]!=te)break;$[w--]=0,l=1}for(s=$.length;$[--s]===0;)$.pop()}return x&&(t.e>N.maxE?(t.d=null,t.e=NaN):t.e<N.minE&&(t.e=0,t.d=[0])),t}function ne(t,r,e){if(!t.isFinite())return nr(t);var n,i=t.e,s=B(t.d),c=s.length;return r?(e&&(n=e-c)>0?s=s.charAt(0)+"."+s.slice(1)+ae(n):c>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(t.e<0?"e":"e+")+t.e):i<0?(s="0."+ae(-i-1)+s,e&&(n=e-c)>0&&(s+=ae(n))):i>=c?(s+=ae(i+1-c),e&&(n=e-i-1)>0&&(s=s+"."+ae(n))):((n=i+1)<c&&(s=s.slice(0,n)+"."+s.slice(n)),e&&(n=e-c)>0&&(i+1===c&&(s+="."),s+=ae(n))),s}function Ze(t,r){var e=t[0];for(r*=O;e>=10;e/=10)r++;return r}function Te(t,r,e){if(r>vn)throw x=!0,e&&(t.precision=e),Error(Qt);return k(new t(Re),r,1,!0)}function re(t,r,e){if(r>at)throw Error(Qt);return k(new t(je),r,e,!0)}function er(t){var r=t.length-1,e=r*O+1;if(r=t[r],r){for(;r%10==0;r/=10)e--;for(r=t[0];r>=10;r/=10)e++}return e}function ae(t){for(var r="";t--;)r+="0";return r}function tr(t,r,e,n){var i,s=new t(1),c=Math.ceil(n/O+4);for(x=!1;;){if(e%2&&(s=s.times(r),Wt(s.d,c)&&(i=!0)),e=W(e/2),e===0){e=s.d.length-1,i&&s.d[e]===0&&++s.d[e];break}r=r.times(r),Wt(r.d,c)}return x=!0,s}function Ht(t){return t.d[t.d.length-1]&1}function rr(t,r,e){for(var n,i,s=new t(r[0]),c=0;++c<r.length;){if(i=new t(r[c]),!i.s){s=i;break}n=s.cmp(i),(n===e||n===0&&s.s===e)&&(s=i)}return s}function lt(t,r){var e,n,i,s,c,l,u,p=0,m=0,$=0,w=t.constructor,N=w.rounding,P=w.precision;if(!t.d||!t.d[0]||t.e>17)return new w(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(r==null?(x=!1,u=P):u=r,l=new w(.03125);t.e>-2;)t=t.times(l),$+=5;for(n=Math.log(Z(2,$))/Math.LN10*2+5|0,u+=n,e=s=c=new w(1),w.precision=u;;){if(s=k(s.times(t),u,1),e=e.times(++m),l=c.plus(R(s,e,u,1)),B(l.d).slice(0,u)===B(c.d).slice(0,u)){for(i=$;i--;)c=k(c.times(c),u,1);if(r==null)if(p<3&&Oe(c.d,u-n,N,p))w.precision=u+=10,e=s=l=new w(1),m=0,p++;else return k(c,w.precision=P,N,x=!0);else return w.precision=P,c}c=l}}function le(t,r){var e,n,i,s,c,l,u,p,m,$,w,N=1,P=10,M=t,j=M.d,D=M.constructor,G=D.rounding,q=D.precision;if(M.s<0||!j||!j[0]||!M.e&&j[0]==1&&j.length==1)return new D(j&&!j[0]?-1/0:M.s!=1?NaN:j?0:M);if(r==null?(x=!1,m=q):m=r,D.precision=m+=P,e=B(j),n=e.charAt(0),Math.abs(s=M.e)<15e14){for(;n<7&&n!=1||n==1&&e.charAt(1)>3;)M=M.times(t),e=B(M.d),n=e.charAt(0),N++;s=M.e,n>1?(M=new D("0."+e),s++):M=new D(n+"."+e.slice(1))}else return p=Te(D,m+2,q).times(s+""),M=le(new D(n+"."+e.slice(1)),m-P).plus(p),D.precision=q,r==null?k(M,q,G,x=!0):M;for($=M,u=c=M=R(M.minus(1),M.plus(1),m,1),w=k(M.times(M),m,1),i=3;;){if(c=k(c.times(w),m,1),p=u.plus(R(c,new D(i),m,1)),B(p.d).slice(0,m)===B(u.d).slice(0,m))if(u=u.times(2),s!==0&&(u=u.plus(Te(D,m+2,q).times(s+""))),u=R(u,new D(N),m,1),r==null)if(Oe(u.d,m-P,G,l))D.precision=m+=P,p=c=M=R($.minus(1),$.plus(1),m,1),w=k(M.times(M),m,1),i=l=1;else return k(u,D.precision=q,G,x=!0);else return D.precision=q,u;u=p,i+=2}}function nr(t){return String(t.s*t.s/0)}function Ie(t,r){var e,n,i;for((e=r.indexOf("."))>-1&&(r=r.replace(".","")),(n=r.search(/e/i))>0?(e<0&&(e=n),e+=+r.slice(n+1),r=r.substring(0,n)):e<0&&(e=r.length),n=0;r.charCodeAt(n)===48;n++);for(i=r.length;r.charCodeAt(i-1)===48;--i);if(r=r.slice(n,i),r){if(i-=n,t.e=e=e-n-1,t.d=[],n=(e+1)%O,e<0&&(n+=O),n<i){for(n&&t.d.push(+r.slice(0,n)),i-=O;n<i;)t.d.push(+r.slice(n,n+=O));r=r.slice(n),n=O-r.length}else n-=i;for(;n--;)r+="0";t.d.push(+r),x&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Nn(t,r){var e,n,i,s,c,l,u,p,m;if(r.indexOf("_")>-1){if(r=r.replace(/(\d)_(?=\d)/g,"$1"),Yt.test(r))return Ie(t,r)}else if(r==="Infinity"||r==="NaN")return+r||(t.s=NaN),t.e=NaN,t.d=null,t;if(wn.test(r))e=16,r=r.toLowerCase();else if(mn.test(r))e=2;else if($n.test(r))e=8;else throw Error(ce+r);for(s=r.search(/p/i),s>0?(u=+r.slice(s+1),r=r.substring(2,s)):r=r.slice(2),s=r.indexOf("."),c=s>=0,n=t.constructor,c&&(r=r.replace(".",""),l=r.length,s=l-s,i=tr(n,new n(e),s,s*2)),p=_e(r,e,te),m=p.length-1,s=m;p[s]===0;--s)p.pop();return s<0?new n(t.s*0):(t.e=Ze(p,m),t.d=p,x=!1,c&&(t=R(t,i,l*4)),u&&(t=t.times(Math.abs(u)<54?Z(2,u):L.pow(2,u))),x=!0,t)}function An(t,r){var e,n=r.d.length;if(n<3)return r.isZero()?r:ye(t,2,r,r);e=1.4*Math.sqrt(n),e=e>16?16:e|0,r=r.times(1/Ve(5,e)),r=ye(t,2,r,r);for(var i,s=new t(5),c=new t(16),l=new t(20);e--;)i=r.times(r),r=r.times(s.plus(i.times(c.times(i).minus(l))));return r}function ye(t,r,e,n,i){var s,c,l,u,p=t.precision,m=Math.ceil(p/O);for(x=!1,u=e.times(e),l=new t(n);;){if(c=R(l.times(u),new t(r++*r++),p,1),l=i?n.plus(c):n.minus(c),n=R(c.times(u),new t(r++*r++),p,1),c=l.plus(n),c.d[m]!==void 0){for(s=m;c.d[s]===l.d[s]&&s--;);if(s==-1)break}s=l,l=n,n=c,c=s}return x=!0,c.d.length=m+1,c}function Ve(t,r){for(var e=t;--r;)e*=t;return e}function ir(t,r){var e,n=r.s<0,i=re(t,t.precision,1),s=i.times(.5);if(r=r.abs(),r.lte(s))return se=n?4:1,r;if(e=r.divToInt(i),e.isZero())se=n?3:2;else{if(r=r.minus(e.times(i)),r.lte(s))return se=Ht(e)?n?2:3:n?4:1,r;se=Ht(e)?n?1:4:n?3:2}return r.minus(i).abs()}function ut(t,r,e,n){var i,s,c,l,u,p,m,$,w,N=t.constructor,P=e!==void 0;if(P?(K(e,1,ue),n===void 0?n=N.rounding:K(n,0,8)):(e=N.precision,n=N.rounding),!t.isFinite())m=nr(t);else{for(m=ne(t),c=m.indexOf("."),P?(i=2,r==16?e=e*4-3:r==8&&(e=e*3-2)):i=r,c>=0&&(m=m.replace(".",""),w=new N(1),w.e=m.length-c,w.d=_e(ne(w),10,i),w.e=w.d.length),$=_e(m,10,i),s=u=$.length;$[--u]==0;)$.pop();if(!$[0])m=P?"0p+0":"0";else{if(c<0?s--:(t=new N(t),t.d=$,t.e=s,t=R(t,w,e,n,0,i),$=t.d,s=t.e,p=Kt),c=$[e],l=i/2,p=p||$[e+1]!==void 0,p=n<4?(c!==void 0||p)&&(n===0||n===(t.s<0?3:2)):c>l||c===l&&(n===4||p||n===6&&$[e-1]&1||n===(t.s<0?8:7)),$.length=e,p)for(;++$[--e]>i-1;)$[e]=0,e||(++s,$.unshift(1));for(u=$.length;!$[u-1];--u);for(c=0,m="";c<u;c++)m+=ot.charAt($[c]);if(P){if(u>1)if(r==16||r==8){for(c=r==16?4:3,--u;u%c;u++)m+="0";for($=_e(m,i,r),u=$.length;!$[u-1];--u);for(c=1,m="1.";c<u;c++)m+=ot.charAt($[c])}else m=m.charAt(0)+"."+m.slice(1);m=m+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)m="0"+m;m="0."+m}else if(++s>u)for(s-=u;s--;)m+="0";else s<u&&(m=m.slice(0,s)+"."+m.slice(s))}m=(r==16?"0x":r==2?"0b":r==8?"0o":"")+m}return t.s<0?"-"+m:m}function Wt(t,r){if(t.length>r)return t.length=r,!0}function yn(t){return new this(t).abs()}function Cn(t){return new this(t).acos()}function Sn(t){return new this(t).acosh()}function Pn(t,r){return new this(t).plus(r)}function Mn(t){return new this(t).asin()}function kn(t){return new this(t).asinh()}function On(t){return new this(t).atan()}function xn(t){return new this(t).atanh()}function Ln(t,r){t=new this(t),r=new this(r);var e,n=this.precision,i=this.rounding,s=n+4;return!t.s||!r.s?e=new this(NaN):!t.d&&!r.d?(e=re(this,s,1).times(r.s>0?.25:.75),e.s=t.s):!r.d||t.isZero()?(e=r.s<0?re(this,n,i):new this(0),e.s=t.s):!t.d||r.isZero()?(e=re(this,s,1).times(.5),e.s=t.s):r.s<0?(this.precision=s,this.rounding=1,e=this.atan(R(t,r,s,1)),r=re(this,s,1),this.precision=n,this.rounding=i,e=t.s<0?e.minus(r):e.plus(r)):e=this.atan(R(t,r,s,1)),e}function Fn(t){return new this(t).cbrt()}function qn(t){return k(t=new this(t),t.e+1,2)}function _n(t,r,e){return new this(t).clamp(r,e)}function In(t){if(!t||typeof t!="object")throw Error(Ue+"Object expected");var r,e,n,i=t.defaults===!0,s=["precision",1,ue,"rounding",0,8,"toExpNeg",-Ae,0,"toExpPos",0,Ae,"maxE",0,Ae,"minE",-Ae,0,"modulo",0,9];for(r=0;r<s.length;r+=3)if(e=s[r],i&&(this[e]=ft[e]),(n=t[e])!==void 0)if(W(n)===n&&n>=s[r+1]&&n<=s[r+2])this[e]=n;else throw Error(ce+e+": "+n);if(e="crypto",i&&(this[e]=ft[e]),(n=t[e])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[e]=!0;else throw Error(Jt);else this[e]=!1;else throw Error(ce+e+": "+n);return this}function Dn(t){return new this(t).cos()}function Rn(t){return new this(t).cosh()}function sr(t){var r,e,n;function i(s){var c,l,u,p=this;if(!(p instanceof i))return new i(s);if(p.constructor=i,Gt(s)){p.s=s.s,x?!s.d||s.e>i.maxE?(p.e=NaN,p.d=null):s.e<i.minE?(p.e=0,p.d=[0]):(p.e=s.e,p.d=s.d.slice()):(p.e=s.e,p.d=s.d?s.d.slice():s.d);return}if(u=typeof s,u==="number"){if(s===0){p.s=1/s<0?-1:1,p.e=0,p.d=[0];return}if(s<0?(s=-s,p.s=-1):p.s=1,s===~~s&&s<1e7){for(c=0,l=s;l>=10;l/=10)c++;x?c>i.maxE?(p.e=NaN,p.d=null):c<i.minE?(p.e=0,p.d=[0]):(p.e=c,p.d=[s]):(p.e=c,p.d=[s]);return}if(s*0!==0){s||(p.s=NaN),p.e=NaN,p.d=null;return}return Ie(p,s.toString())}if(u==="string")return(l=s.charCodeAt(0))===45?(s=s.slice(1),p.s=-1):(l===43&&(s=s.slice(1)),p.s=1),Yt.test(s)?Ie(p,s):Nn(p,s);if(u==="bigint")return s<0?(s=-s,p.s=-1):p.s=1,Ie(p,s.toString());throw Error(ce+s)}if(i.prototype=v,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=In,i.clone=sr,i.isDecimal=Gt,i.abs=yn,i.acos=Cn,i.acosh=Sn,i.add=Pn,i.asin=Mn,i.asinh=kn,i.atan=On,i.atanh=xn,i.atan2=Ln,i.cbrt=Fn,i.ceil=qn,i.clamp=_n,i.cos=Dn,i.cosh=Rn,i.div=jn,i.exp=Tn,i.floor=Un,i.hypot=Zn,i.ln=Vn,i.log=Bn,i.log10=Wn,i.log2=Hn,i.max=Gn,i.min=Xn,i.mod=Kn,i.mul=Qn,i.pow=Jn,i.random=zn,i.round=Yn,i.sign=ei,i.sin=ti,i.sinh=ri,i.sqrt=ni,i.sub=ii,i.sum=si,i.tan=oi,i.tanh=fi,i.trunc=ai,t===void 0&&(t={}),t&&t.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<n.length;)t.hasOwnProperty(e=n[r++])||(t[e]=this[e]);return i.config(t),i}function jn(t,r){return new this(t).div(r)}function Tn(t){return new this(t).exp()}function Un(t){return k(t=new this(t),t.e+1,3)}function Zn(){var t,r,e=new this(0);for(x=!1,t=0;t<arguments.length;)if(r=new this(arguments[t++]),r.d)e.d&&(e=e.plus(r.times(r)));else{if(r.s)return x=!0,new this(1/0);e=r}return x=!0,e.sqrt()}function Gt(t){return t instanceof L||t&&t.toStringTag===zt||!1}function Vn(t){return new this(t).ln()}function Bn(t,r){return new this(t).log(r)}function Hn(t){return new this(t).log(2)}function Wn(t){return new this(t).log(10)}function Gn(){return rr(this,arguments,-1)}function Xn(){return rr(this,arguments,1)}function Kn(t,r){return new this(t).mod(r)}function Qn(t,r){return new this(t).mul(r)}function Jn(t,r){return new this(t).pow(r)}function zn(t){var r,e,n,i,s=0,c=new this(1),l=[];if(t===void 0?t=this.precision:K(t,1,ue),n=Math.ceil(t/O),this.crypto)if(crypto.getRandomValues)for(r=crypto.getRandomValues(new Uint32Array(n));s<n;)i=r[s],i>=429e7?r[s]=crypto.getRandomValues(new Uint32Array(1))[0]:l[s++]=i%1e7;else if(crypto.randomBytes){for(r=crypto.randomBytes(n*=4);s<n;)i=r[s]+(r[s+1]<<8)+(r[s+2]<<16)+((r[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(r,s):(l.push(i%1e7),s+=4);s=n/4}else throw Error(Jt);else for(;s<n;)l[s++]=Math.random()*1e7|0;for(n=l[--s],t%=O,n&&t&&(i=Z(10,O-t),l[s]=(n/i|0)*i);l[s]===0;s--)l.pop();if(s<0)e=0,l=[0];else{for(e=-1;l[0]===0;e-=O)l.shift();for(n=1,i=l[0];i>=10;i/=10)n++;n<O&&(e-=O-n)}return c.e=e,c.d=l,c}function Yn(t){return k(t=new this(t),t.e+1,this.rounding)}function ei(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function ti(t){return new this(t).sin()}function ri(t){return new this(t).sinh()}function ni(t){return new this(t).sqrt()}function ii(t,r){return new this(t).sub(r)}function si(){var t=0,r=arguments,e=new this(r[t]);for(x=!1;e.s&&++t<r.length;)e=e.plus(r[t]);return x=!0,k(e,this.precision,this.rounding)}function oi(t){return new this(t).tan()}function fi(t){return new this(t).tanh()}function ai(t){return k(t=new this(t),t.e+1,1)}v[Symbol.for("nodejs.util.inspect.custom")]=v.toString;v[Symbol.toStringTag]="Decimal";var L=v.constructor=sr(ft);Re=new L(Re);je=new L(je);class Xt extends SyntaxError{constructor(r,e,n,i){super(r),this.expected=e,this.found=n,this.location=i,this.name="SyntaxError"}format(r){let e="Error: "+this.message;if(this.location){let n=null;const i=r.find(u=>u.source===this.location.source);i&&(n=i.text.split(/\r\n|\n|\r/g));const s=this.location.start,c=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(s):s,l=this.location.source+":"+c.line+":"+c.column;if(n){const u=this.location.end,p="".padEnd(c.line.toString().length," "),m=n[s.line-1],w=(s.line===u.line?u.column:m.length+1)-s.column||1;e+=`
 --> `+l+`
`+p+` |
`+c.line+" | "+m+`
`+p+" | "+"".padEnd(s.column-1," ")+"".padEnd(w,"^")}else e+=`
 at `+l}return e}static buildMessage(r,e){function n(w){return w.codePointAt(0).toString(16).toUpperCase()}const i=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function s(w){return i?w.replace(i,N=>"\\u{"+n(N)+"}"):w}function c(w){return s(w.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,N=>"\\x0"+n(N)).replace(/[\x10-\x1F\x7F-\x9F]/g,N=>"\\x"+n(N)))}function l(w){return s(w.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,N=>"\\x0"+n(N)).replace(/[\x10-\x1F\x7F-\x9F]/g,N=>"\\x"+n(N)))}const u={literal(w){return'"'+c(w.text)+'"'},class(w){const N=w.parts.map(P=>Array.isArray(P)?l(P[0])+"-"+l(P[1]):l(P));return"["+(w.inverted?"^":"")+N.join("")+"]"+(w.unicode?"u":"")},any(){return"any character"},end(){return"end of input"},other(w){return w.description}};function p(w){return u[w.type](w)}function m(w){const N=w.map(p);if(N.sort(),N.length>0){let P=1;for(let M=1;M<N.length;M++)N[M-1]!==N[M]&&(N[P]=N[M],P++);N.length=P}switch(N.length){case 1:return N[0];case 2:return N[0]+" or "+N[1];default:return N.slice(0,-1).join(", ")+", or "+N[N.length-1]}}function $(w){return w?'"'+c(w)+'"':"end of input"}return"Expected "+m(r)+" but "+$(e)+" found."}}function or(t,r){r=r!==void 0?r:{};const e={},n=r.grammarSource,i={Expression:Q};let s=Q;const c="?",l=":",u="||",p="??",m="&&",$="!=",w="==",N="=",P="<=",M=">=",j="**",D="(",G=")",q="[",T="]",oe=".",H=",",me="true",pe="false",fe="null",we='"',X="'",he="\\",$e="n",Ce="r",V="t",_="{",fr="}",ht=/^[<>]/,He=/^[+\-]/,gt=/^[%*\/]/,ar=/^[!+\-]/,Ee=/^[0-9]/,lr=/^[eE]/,Se=/^[a-zA-Z0-9_$]/,cr=/^["\\]/,ur=/^['\\]/,pr=/^[a-zA-Z_$]/,dt=/^[ \t\n\r]/,hr=I("?",!1),mt=I(":",!1),wt=I("||",!1),$t=I("??",!1),Et=I("&&",!1),vt=I("!=",!1),bt=I("==",!1),Nt=I("=",!1),At=I("<=",!1),yt=I(">=",!1),Ct=ee(["<",">"],!1,!1,!1),We=ee(["+","-"],!1,!1,!1),St=ee(["%","*","/"],!1,!1,!1),gr=I("**",!1),dr=ee(["!","+","-"],!1,!1,!1),Ge=I("(",!1),Xe=I(")",!1),Ke=I("[",!1),Qe=I("]",!1),Je=I(".",!1),ve=I(",",!1),be=ee([["0","9"]],!1,!1,!1),mr=ee(["e","E"],!1,!1,!1),wr=I("true",!1),Pe=ee([["a","z"],["A","Z"],["0","9"],"_","$"],!1,!1,!1),$r=I("false",!1),Er=I("null",!1),Pt=I('"',!1),Mt=I("'",!1),vr=ee(['"',"\\"],!1,!1,!1),ze=tn(),kt=I("\\",!1),br=ee(["'","\\"],!1,!1,!1),Nr=I("n",!1),Ar=I("r",!1),yr=I("t",!1),Cr=I("{",!1),Sr=I("}",!1),Pr=ee([["a","z"],["A","Z"],"_","$"],!1,!1,!1),Ot=ee([" ","	",`
`,"\r"],!1,!1,!1);function Ei(f){return f}function Mr(f,h,d){return{type:"ConditionalExpression",test:f,consequent:h,alternate:d}}function kr(f,h){return h.reduce((d,a)=>({type:"LogicalExpression",operator:a[1],left:d,right:a[3]}),f)}function Or(f,h){return h.reduce((d,a)=>({type:"LogicalExpression",operator:a[1],left:d,right:a[3]}),f)}function xr(f,h){return qe(f,h)}function Lr(f,h){return qe(f,h)}function Fr(f,h){return qe(f,h)}function qr(f,h){return qe(f,h)}function _r(f,h){return h?{type:"BinaryExpression",operator:"**",left:f,right:h[3]}:f}function Ir(f,h){return{type:"UnaryExpression",operator:f,argument:h,prefix:!0}}function xt(f,h){return{type:"call",args:h||[]}}function Lt(f,h){return{type:"member",property:h,computed:!0}}function Ft(f,h){return{type:"member",property:h,computed:!1}}function Dr(f,h){return h.reduce((d,a)=>a.type==="call"?{type:"CallExpression",callee:d,arguments:a.args}:{type:"MemberExpression",object:d,property:a.property,computed:a.computed},f)}function Rr(f,h){return[f].concat(h.map(d=>d[3]))}function vi(f){return f}function jr(f){return{type:"Literal",value:parseFloat(f),raw:f}}function Tr(){return{type:"Literal",value:!0,raw:"true"}}function Ur(){return{type:"Literal",value:!1,raw:"false"}}function Zr(){return{type:"Literal",value:null,raw:"null"}}function Vr(f){return{type:"Literal",value:f.join(""),raw:'"'+f.join("")+'"'}}function Br(f){return{type:"Literal",value:f.join(""),raw:"'"+f.join("")+"'"}}function bi(f){return f}function Ni(f){return f}function Ai(f){return f}function yi(f){return f}function Hr(){return`
`}function Wr(){return"\r"}function Gr(){return"	"}function Ci(f){return f}function Xr(f){return{type:"ArrayExpression",elements:f||[]}}function Kr(f,h){return[f].concat(h.map(d=>d[3]))}function Qr(f){return{type:"ObjectExpression",properties:f||[]}}function Jr(f,h){return[f].concat(h.map(d=>d[3]))}function zr(f,h){return{type:"Property",key:f,value:h,kind:"init",method:!1,shorthand:!1,computed:!1}}function Yr(f){return{type:"Identifier",name:f}}let o=r.peg$currPos|0;const Ne=[{line:1,column:1}];let Y=o,xe=r.peg$maxFailExpected||[],b=r.peg$silentFails|0,Me;if(r.startRule){if(!(r.startRule in i))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');s=i[r.startRule]}function en(f=o){const h=t.codePointAt(f);return h===void 0?"":String.fromCodePoint(h)}function I(f,h){return{type:"literal",text:f,ignoreCase:h}}function ee(f,h,d,a){return{type:"class",parts:f,inverted:h,ignoreCase:d,unicode:a}}function tn(){return{type:"any"}}function rn(){return{type:"end"}}function qt(f){let h=Ne[f],d;if(h)return h;if(f>=Ne.length)d=Ne.length-1;else for(d=f;!Ne[--d];);for(h=Ne[d],h={line:h.line,column:h.column};d<f;)t.charCodeAt(d)===10?(h.line++,h.column=1):h.column++,d++;return Ne[f]=h,h}function _t(f,h,d){const a=qt(f),E=qt(h);return{source:n,start:{offset:f,line:a.line,column:a.column},end:{offset:h,line:E.line,column:E.column}}}function A(f){o<Y||(o>Y&&(Y=o,xe=[]),xe.push(f))}function nn(f,h,d){return new Xt(Xt.buildMessage(f,h),f,h,d)}function Q(){let f,h;return f=o,S(),h=It(),h!==e?(S(),f=h):(o=f,f=e),f}function It(){let f,h,d,a,E,g;return f=o,h=Dt(),h!==e?(S(),t.charCodeAt(o)===63?(d=c,o++):(d=e,b===0&&A(hr)),d!==e?(S(),a=Q(),a!==e?(S(),t.charCodeAt(o)===58?(E=l,o++):(E=e,b===0&&A(mt)),E!==e?(S(),g=It(),g!==e?f=Mr(h,a,g):(o=f,f=e)):(o=f,f=e)):(o=f,f=e)):(o=f,f=e)):(o=f,f=e),f===e&&(f=Dt()),f}function Dt(){let f,h,d,a,E,g,C,y;if(f=o,h=Ye(),h!==e){for(d=[],a=o,E=S(),t.substr(o,2)===u?(g=u,o+=2):(g=e,b===0&&A(wt)),g===e&&(t.substr(o,2)===p?(g=p,o+=2):(g=e,b===0&&A($t))),g!==e?(C=S(),y=Ye(),y!==e?(E=[E,g,C,y],a=E):(o=a,a=e)):(o=a,a=e);a!==e;)d.push(a),a=o,E=S(),t.substr(o,2)===u?(g=u,o+=2):(g=e,b===0&&A(wt)),g===e&&(t.substr(o,2)===p?(g=p,o+=2):(g=e,b===0&&A($t))),g!==e?(C=S(),y=Ye(),y!==e?(E=[E,g,C,y],a=E):(o=a,a=e)):(o=a,a=e);f=kr(h,d)}else o=f,f=e;return f}function Ye(){let f,h,d,a,E,g,C,y;if(f=o,h=et(),h!==e){for(d=[],a=o,E=S(),t.substr(o,2)===m?(g=m,o+=2):(g=e,b===0&&A(Et)),g!==e?(C=S(),y=et(),y!==e?(E=[E,g,C,y],a=E):(o=a,a=e)):(o=a,a=e);a!==e;)d.push(a),a=o,E=S(),t.substr(o,2)===m?(g=m,o+=2):(g=e,b===0&&A(Et)),g!==e?(C=S(),y=et(),y!==e?(E=[E,g,C,y],a=E):(o=a,a=e)):(o=a,a=e);f=Or(h,d)}else o=f,f=e;return f}function et(){let f,h,d,a,E,g,C,y;if(f=o,h=tt(),h!==e){for(d=[],a=o,E=S(),t.substr(o,2)===$?(g=$,o+=2):(g=e,b===0&&A(vt)),g===e&&(t.substr(o,2)===w?(g=w,o+=2):(g=e,b===0&&A(bt)),g===e&&(t.charCodeAt(o)===61?(g=N,o++):(g=e,b===0&&A(Nt)))),g!==e?(C=S(),y=tt(),y!==e?(E=[E,g,C,y],a=E):(o=a,a=e)):(o=a,a=e);a!==e;)d.push(a),a=o,E=S(),t.substr(o,2)===$?(g=$,o+=2):(g=e,b===0&&A(vt)),g===e&&(t.substr(o,2)===w?(g=w,o+=2):(g=e,b===0&&A(bt)),g===e&&(t.charCodeAt(o)===61?(g=N,o++):(g=e,b===0&&A(Nt)))),g!==e?(C=S(),y=tt(),y!==e?(E=[E,g,C,y],a=E):(o=a,a=e)):(o=a,a=e);f=xr(h,d)}else o=f,f=e;return f}function tt(){let f,h,d,a,E,g,C,y;if(f=o,h=rt(),h!==e){for(d=[],a=o,E=S(),t.substr(o,2)===P?(g=P,o+=2):(g=e,b===0&&A(At)),g===e&&(t.substr(o,2)===M?(g=M,o+=2):(g=e,b===0&&A(yt)),g===e&&(g=t.charAt(o),ht.test(g)?o++:(g=e,b===0&&A(Ct)))),g!==e?(C=S(),y=rt(),y!==e?(E=[E,g,C,y],a=E):(o=a,a=e)):(o=a,a=e);a!==e;)d.push(a),a=o,E=S(),t.substr(o,2)===P?(g=P,o+=2):(g=e,b===0&&A(At)),g===e&&(t.substr(o,2)===M?(g=M,o+=2):(g=e,b===0&&A(yt)),g===e&&(g=t.charAt(o),ht.test(g)?o++:(g=e,b===0&&A(Ct)))),g!==e?(C=S(),y=rt(),y!==e?(E=[E,g,C,y],a=E):(o=a,a=e)):(o=a,a=e);f=Lr(h,d)}else o=f,f=e;return f}function rt(){let f,h,d,a,E,g,C,y;if(f=o,h=nt(),h!==e){for(d=[],a=o,E=S(),g=t.charAt(o),He.test(g)?o++:(g=e,b===0&&A(We)),g!==e?(C=S(),y=nt(),y!==e?(E=[E,g,C,y],a=E):(o=a,a=e)):(o=a,a=e);a!==e;)d.push(a),a=o,E=S(),g=t.charAt(o),He.test(g)?o++:(g=e,b===0&&A(We)),g!==e?(C=S(),y=nt(),y!==e?(E=[E,g,C,y],a=E):(o=a,a=e)):(o=a,a=e);f=Fr(h,d)}else o=f,f=e;return f}function nt(){let f,h,d,a,E,g,C,y;if(f=o,h=Le(),h!==e){for(d=[],a=o,E=S(),g=t.charAt(o),gt.test(g)?o++:(g=e,b===0&&A(St)),g!==e?(C=S(),y=Le(),y!==e?(E=[E,g,C,y],a=E):(o=a,a=e)):(o=a,a=e);a!==e;)d.push(a),a=o,E=S(),g=t.charAt(o),gt.test(g)?o++:(g=e,b===0&&A(St)),g!==e?(C=S(),y=Le(),y!==e?(E=[E,g,C,y],a=E):(o=a,a=e)):(o=a,a=e);f=qr(h,d)}else o=f,f=e;return f}function Le(){let f,h,d,a,E,g,C;return f=o,h=Rt(),h!==e?(d=o,a=S(),t.substr(o,2)===j?(E=j,o+=2):(E=e,b===0&&A(gr)),E!==e?(g=S(),C=Le(),C!==e?(a=[a,E,g,C],d=a):(o=d,d=e)):(o=d,d=e),d===e&&(d=null),f=_r(h,d)):(o=f,f=e),f}function Rt(){let f,h,d;return f=o,h=t.charAt(o),ar.test(h)?o++:(h=e,b===0&&A(dr)),h!==e?(S(),d=Rt(),d!==e?f=Ir(h,d):(o=f,f=e)):(o=f,f=e),f===e&&(f=sn()),f}function sn(){let f,h,d,a,E,g,C;if(f=o,h=on(),h!==e){for(d=[],a=o,S(),t.charCodeAt(o)===40?(E=D,o++):(E=e,b===0&&A(Ge)),E!==e?(S(),g=jt(),g===e&&(g=null),S(),t.charCodeAt(o)===41?(C=G,o++):(C=e,b===0&&A(Xe)),C!==e?a=xt(h,g):(o=a,a=e)):(o=a,a=e),a===e&&(a=o,S(),t.charCodeAt(o)===91?(E=q,o++):(E=e,b===0&&A(Ke)),E!==e?(S(),g=Q(),g!==e?(S(),t.charCodeAt(o)===93?(C=T,o++):(C=e,b===0&&A(Qe)),C!==e?a=Lt(h,g):(o=a,a=e)):(o=a,a=e)):(o=a,a=e),a===e&&(a=o,S(),t.charCodeAt(o)===46?(E=oe,o++):(E=e,b===0&&A(Je)),E!==e?(S(),g=Fe(),g!==e?a=Ft(h,g):(o=a,a=e)):(o=a,a=e)));a!==e;)d.push(a),a=o,S(),t.charCodeAt(o)===40?(E=D,o++):(E=e,b===0&&A(Ge)),E!==e?(S(),g=jt(),g===e&&(g=null),S(),t.charCodeAt(o)===41?(C=G,o++):(C=e,b===0&&A(Xe)),C!==e?a=xt(h,g):(o=a,a=e)):(o=a,a=e),a===e&&(a=o,S(),t.charCodeAt(o)===91?(E=q,o++):(E=e,b===0&&A(Ke)),E!==e?(S(),g=Q(),g!==e?(S(),t.charCodeAt(o)===93?(C=T,o++):(C=e,b===0&&A(Qe)),C!==e?a=Lt(h,g):(o=a,a=e)):(o=a,a=e)):(o=a,a=e),a===e&&(a=o,S(),t.charCodeAt(o)===46?(E=oe,o++):(E=e,b===0&&A(Je)),E!==e?(S(),g=Fe(),g!==e?a=Ft(h,g):(o=a,a=e)):(o=a,a=e)));f=Dr(h,d)}else o=f,f=e;return f}function jt(){let f,h,d,a,E,g,C,y;if(f=o,h=Q(),h!==e){for(d=[],a=o,E=S(),t.charCodeAt(o)===44?(g=H,o++):(g=e,b===0&&A(ve)),g!==e?(C=S(),y=Q(),y!==e?(E=[E,g,C,y],a=E):(o=a,a=e)):(o=a,a=e);a!==e;)d.push(a),a=o,E=S(),t.charCodeAt(o)===44?(g=H,o++):(g=e,b===0&&A(ve)),g!==e?(C=S(),y=Q(),y!==e?(E=[E,g,C,y],a=E):(o=a,a=e)):(o=a,a=e);f=Rr(h,d)}else o=f,f=e;return f}function on(){let f,h,d,a;return f=fn(),f===e&&(f=un(),f===e&&(f=hn(),f===e&&(f=Fe(),f===e&&(f=o,t.charCodeAt(o)===40?(h=D,o++):(h=e,b===0&&A(Ge)),h!==e?(S(),d=Q(),d!==e?(S(),t.charCodeAt(o)===41?(a=G,o++):(a=e,b===0&&A(Xe)),a!==e?f=d:(o=f,f=e)):(o=f,f=e)):(o=f,f=e))))),f}function fn(){let f;return f=Tt(),f===e&&(f=an(),f===e&&(f=ln())),f}function Tt(){let f,h,d,a,E,g,C,y,ke,ie;if(f=o,h=o,d=o,a=[],E=t.charAt(o),Ee.test(E)?o++:(E=e,b===0&&A(be)),E!==e)for(;E!==e;)a.push(E),E=t.charAt(o),Ee.test(E)?o++:(E=e,b===0&&A(be));else a=e;if(a!==e){if(E=o,t.charCodeAt(o)===46?(g=oe,o++):(g=e,b===0&&A(Je)),g!==e){if(C=[],y=t.charAt(o),Ee.test(y)?o++:(y=e,b===0&&A(be)),y!==e)for(;y!==e;)C.push(y),y=t.charAt(o),Ee.test(y)?o++:(y=e,b===0&&A(be));else C=e;C!==e?(g=[g,C],E=g):(o=E,E=e)}else o=E,E=e;if(E===e&&(E=null),g=o,C=t.charAt(o),lr.test(C)?o++:(C=e,b===0&&A(mr)),C!==e){if(y=t.charAt(o),He.test(y)?o++:(y=e,b===0&&A(We)),y===e&&(y=null),ke=[],ie=t.charAt(o),Ee.test(ie)?o++:(ie=e,b===0&&A(be)),ie!==e)for(;ie!==e;)ke.push(ie),ie=t.charAt(o),Ee.test(ie)?o++:(ie=e,b===0&&A(be));else ke=e;ke!==e?(C=[C,y,ke],g=C):(o=g,g=e)}else o=g,g=e;g===e&&(g=null),a=[a,E,g],d=a}else o=d,d=e;return d!==e?h=t.substring(h,o):h=d,h!==e&&(h=jr(h)),f=h,f}function an(){let f,h,d,a;return f=o,t.substr(o,4)===me?(h=me,o+=4):(h=e,b===0&&A(wr)),h!==e?(d=o,b++,a=t.charAt(o),Se.test(a)?o++:(a=e,b===0&&A(Pe)),b--,a===e?d=void 0:(o=d,d=e),d!==e?f=Tr():(o=f,f=e)):(o=f,f=e),f===e&&(f=o,t.substr(o,5)===pe?(h=pe,o+=5):(h=e,b===0&&A($r)),h!==e?(d=o,b++,a=t.charAt(o),Se.test(a)?o++:(a=e,b===0&&A(Pe)),b--,a===e?d=void 0:(o=d,d=e),d!==e?f=Ur():(o=f,f=e)):(o=f,f=e)),f}function ln(){let f,h,d,a;return f=o,t.substr(o,4)===fe?(h=fe,o+=4):(h=e,b===0&&A(Er)),h!==e?(d=o,b++,a=t.charAt(o),Se.test(a)?o++:(a=e,b===0&&A(Pe)),b--,a===e?d=void 0:(o=d,d=e),d!==e?f=Zr():(o=f,f=e)):(o=f,f=e),f}function cn(){let f,h,d,a;if(f=o,t.charCodeAt(o)===34?(h=we,o++):(h=e,b===0&&A(Pt)),h!==e){for(d=[],a=Ut();a!==e;)d.push(a),a=Ut();t.charCodeAt(o)===34?(a=we,o++):(a=e,b===0&&A(Pt)),a!==e?f=Vr(d):(o=f,f=e)}else o=f,f=e;if(f===e)if(f=o,t.charCodeAt(o)===39?(h=X,o++):(h=e,b===0&&A(Mt)),h!==e){for(d=[],a=Zt();a!==e;)d.push(a),a=Zt();t.charCodeAt(o)===39?(a=X,o++):(a=e,b===0&&A(Mt)),a!==e?f=Br(d):(o=f,f=e)}else o=f,f=e;return f}function Ut(){let f,h,d;return f=o,h=o,b++,d=t.charAt(o),cr.test(d)?o++:(d=e,b===0&&A(vr)),b--,d===e?h=void 0:(o=h,h=e),h!==e?(t.length>o?(d=t.charAt(o),o++):(d=e,b===0&&A(ze)),d!==e?f=d:(o=f,f=e)):(o=f,f=e),f===e&&(f=o,t.charCodeAt(o)===92?(h=he,o++):(h=e,b===0&&A(kt)),h!==e?(d=Vt(),d!==e?f=d:(o=f,f=e)):(o=f,f=e)),f}function Zt(){let f,h,d;return f=o,h=o,b++,d=t.charAt(o),ur.test(d)?o++:(d=e,b===0&&A(br)),b--,d===e?h=void 0:(o=h,h=e),h!==e?(t.length>o?(d=t.charAt(o),o++):(d=e,b===0&&A(ze)),d!==e?f=d:(o=f,f=e)):(o=f,f=e),f===e&&(f=o,t.charCodeAt(o)===92?(h=he,o++):(h=e,b===0&&A(kt)),h!==e?(d=Vt(),d!==e?f=d:(o=f,f=e)):(o=f,f=e)),f}function Vt(){let f,h;return f=o,t.charCodeAt(o)===110?(h=$e,o++):(h=e,b===0&&A(Nr)),h!==e&&(h=Hr()),f=h,f===e&&(f=o,t.charCodeAt(o)===114?(h=Ce,o++):(h=e,b===0&&A(Ar)),h!==e&&(h=Wr()),f=h,f===e&&(f=o,t.charCodeAt(o)===116?(h=V,o++):(h=e,b===0&&A(yr)),h!==e&&(h=Gr()),f=h,f===e&&(f=o,t.length>o?(h=t.charAt(o),o++):(h=e,b===0&&A(ze)),h!==e&&(h=h),f=h))),f}function un(){let f,h,d,a;return f=o,t.charCodeAt(o)===91?(h=q,o++):(h=e,b===0&&A(Ke)),h!==e?(S(),d=pn(),d===e&&(d=null),S(),t.charCodeAt(o)===93?(a=T,o++):(a=e,b===0&&A(Qe)),a!==e?f=Xr(d):(o=f,f=e)):(o=f,f=e),f}function pn(){let f,h,d,a,E,g,C,y;if(f=o,h=Q(),h!==e){for(d=[],a=o,E=S(),t.charCodeAt(o)===44?(g=H,o++):(g=e,b===0&&A(ve)),g!==e?(C=S(),y=Q(),y!==e?(E=[E,g,C,y],a=E):(o=a,a=e)):(o=a,a=e);a!==e;)d.push(a),a=o,E=S(),t.charCodeAt(o)===44?(g=H,o++):(g=e,b===0&&A(ve)),g!==e?(C=S(),y=Q(),y!==e?(E=[E,g,C,y],a=E):(o=a,a=e)):(o=a,a=e);f=Kr(h,d)}else o=f,f=e;return f}function hn(){let f,h,d,a;return f=o,t.charCodeAt(o)===123?(h=_,o++):(h=e,b===0&&A(Cr)),h!==e?(S(),d=gn(),d===e&&(d=null),S(),t.charCodeAt(o)===125?(a=fr,o++):(a=e,b===0&&A(Sr)),a!==e?f=Qr(d):(o=f,f=e)):(o=f,f=e),f}function gn(){let f,h,d,a,E,g,C,y;if(f=o,h=it(),h!==e){for(d=[],a=o,E=S(),t.charCodeAt(o)===44?(g=H,o++):(g=e,b===0&&A(ve)),g!==e?(C=S(),y=it(),y!==e?(E=[E,g,C,y],a=E):(o=a,a=e)):(o=a,a=e);a!==e;)d.push(a),a=o,E=S(),t.charCodeAt(o)===44?(g=H,o++):(g=e,b===0&&A(ve)),g!==e?(C=S(),y=it(),y!==e?(E=[E,g,C,y],a=E):(o=a,a=e)):(o=a,a=e);f=Jr(h,d)}else o=f,f=e;return f}function it(){let f,h,d,a;return f=o,h=dn(),h!==e?(S(),t.charCodeAt(o)===58?(d=l,o++):(d=e,b===0&&A(mt)),d!==e?(S(),a=Q(),a!==e?f=zr(h,a):(o=f,f=e)):(o=f,f=e)):(o=f,f=e),f}function dn(){let f;return f=Fe(),f===e&&(f=cn(),f===e&&(f=Tt())),f}function Fe(){let f,h,d,a,E,g;if(f=o,h=o,d=o,a=t.charAt(o),pr.test(a)?o++:(a=e,b===0&&A(Pr)),a!==e){for(E=[],g=t.charAt(o),Se.test(g)?o++:(g=e,b===0&&A(Pe));g!==e;)E.push(g),g=t.charAt(o),Se.test(g)?o++:(g=e,b===0&&A(Pe));a=[a,E],d=a}else o=d,d=e;return d!==e?h=t.substring(h,o):h=d,h!==e&&(h=Yr(h)),f=h,f}function S(){let f,h;for(b++,f=[],h=t.charAt(o),dt.test(h)?o++:(h=e,b===0&&A(Ot));h!==e;)f.push(h),h=t.charAt(o),dt.test(h)?o++:(h=e,b===0&&A(Ot));return b--,f}function qe(f,h){return h.reduce((d,a)=>({type:"BinaryExpression",operator:a[1],left:d,right:a[3]}),f)}Me=s();const st=Me!==e&&o===t.length;function Bt(){throw Me!==e&&o<t.length&&A(rn()),nn(xe,Y<t.length?en(Y):null,Y<t.length?_t(Y,Y+1):_t(Y,Y))}if(r.peg$library)return{peg$result:Me,peg$currPos:o,peg$FAILED:e,peg$maxFailExpected:xe,peg$maxFailPos:Y,peg$success:st,peg$throw:st?void 0:Bt};if(st)return Me;Bt()}const li=t=>{const r=new Set,e=n=>{if(!(!n||typeof n!="object"))switch(n.type){case"Identifier":r.add(n.name);break;case"MemberExpression":e(n.object),n.computed&&e(n.property);break;case"BinaryExpression":case"LogicalExpression":e(n.left),e(n.right);break;case"UnaryExpression":e(n.argument);break;case"CallExpression":if(e(n.callee),n.arguments)for(const i of n.arguments)e(i);break;case"ConditionalExpression":e(n.test),e(n.consequent),e(n.alternate);break;case"ArrayExpression":if(n.elements)for(const i of n.elements)e(i);break;case"ObjectExpression":if(n.properties)for(const i of n.properties)i.type==="Property"?(i.computed&&e(i.key),e(i.value)):i.type==="SpreadElement"&&e(i.argument);break}};return e(t),Array.from(r).filter(n=>!n.startsWith("$"))};class de extends Error{constructor(r){super(r),this.name="EvallaError",Object.setPrototypeOf(this,de.prototype)}}class Be extends de{constructor(r,e){super(r),this.name="SecurityError",this.property=e,Object.setPrototypeOf(this,Be.prototype)}}class pt extends de{constructor(r,e){super(r),this.name="CircularDependencyError",this.cycle=e,Object.setPrototypeOf(this,pt.prototype)}}class J extends de{constructor(r,e){super(r),this.name="ValidationError",this.variableName=e,Object.setPrototypeOf(this,J.prototype)}}class z extends de{constructor(r,e){super(r),this.name="EvaluationError",this.variableName=e,Object.setPrototypeOf(this,z.prototype)}}class ge extends z{constructor(r,e){super(r,e?.variableName),this.name="ParseError",this.expression=e?.expression,this.line=e?.line,this.column=e?.column,Object.setPrototypeOf(this,ge.prototype)}}const ci=t=>{try{return or(t.trim())}catch(r){if(r.location){const{line:e,column:n}=r.location.start;throw new ge(`Parse error at line ${e}, column ${n}: ${r.message}`,{line:e,column:n,expression:t})}throw new ge(`Parse error: ${r.message}`,{expression:t})}},ui=t=>li(t),pi=t=>{const r=new Map,e=new Set,n=new Map;for(const u of t)if(e.add(u.name),u.expr)try{const p=ci(u.expr);n.set(u.name,p)}catch(p){throw p instanceof ge?new ge(`Failed to parse expression for "${u.name}": ${p.message}`,{variableName:u.name,expression:u.expr,line:p.line,column:p.column}):new ge(`Failed to parse expression for "${u.name}": ${p instanceof Error?p.message:String(p)}`,{variableName:u.name,expression:u.expr})}for(const u of t){if(!u.expr){r.set(u.name,[]);continue}const p=n.get(u.name);if(!p)throw new z(`No AST found for: ${u.name}`);const $=ui(p).filter(w=>e.has(w));r.set(u.name,$)}const i=new Set,s=new Set,c=[],l=(u,p=[])=>{if(i.has(u))return;if(s.has(u)){const $=[...p,u];throw new pt(`Circular dependency detected: ${$.join(" -> ")}`,$)}s.add(u);const m=r.get(u)||[];for(const $ of m)e.has($)&&l($,[...p,u]);s.delete(u),i.add(u),c.push(u)};for(const u of e)l(u);return{order:c,asts:n}},F=t=>t instanceof L?t:new L(t),De=Symbol("NAMESPACE_HEAD"),ct=t=>t!=null&&typeof t=="object"&&t[De]===!0,hi=()=>{const t=Object.create(null);return t.$math=Object.create(null),t.$math[De]=!0,t.$math.PI=new L(-1).acos(),t.$math.E=new L(1).exp(),t.$math.SQRT2=new L(2).sqrt(),t.$math.SQRT1_2=new L(.5).sqrt(),t.$math.LN2=new L(2).ln(),t.$math.LN10=new L(10).ln(),t.$math.LOG2E=t.$math.E.log(2),t.$math.LOG10E=t.$math.E.log(10),t.$math.abs=r=>F(r).abs(),t.$math.sqrt=r=>F(r).sqrt(),t.$math.cbrt=r=>F(r).cbrt(),t.$math.floor=r=>F(r).floor(),t.$math.ceil=r=>F(r).ceil(),t.$math.round=r=>F(r).round(),t.$math.trunc=r=>F(r).trunc(),t.$math.sin=r=>new L(Math.sin(F(r).toNumber())),t.$math.cos=r=>new L(Math.cos(F(r).toNumber())),t.$math.tan=r=>new L(Math.tan(F(r).toNumber())),t.$math.asin=r=>new L(Math.asin(F(r).toNumber())),t.$math.acos=r=>new L(Math.acos(F(r).toNumber())),t.$math.atan=r=>new L(Math.atan(F(r).toNumber())),t.$math.atan2=(r,e)=>new L(Math.atan2(F(r).toNumber(),F(e).toNumber())),t.$math.exp=r=>F(r).exp(),t.$math.ln=r=>F(r).ln(),t.$math.log=r=>F(r).log(),t.$math.log10=r=>F(r).log(10),t.$math.log2=r=>F(r).log(2),t.$math.pow=(r,e)=>F(r).pow(F(e)),t.$math.min=(...r)=>L.min(...r.map(F)),t.$math.max=(...r)=>L.max(...r.map(F)),t.$unit=Object.create(null),t.$unit[De]=!0,t.$unit.mmToInch=r=>F(r).div(25.4),t.$unit.inchToMm=r=>F(r).mul(25.4),t.$unit.cmToInch=r=>F(r).div(2.54),t.$unit.inchToCm=r=>F(r).mul(2.54),t.$unit.mToFt=r=>F(r).mul(3.28084),t.$unit.ftToM=r=>F(r).div(3.28084),t.$angle=Object.create(null),t.$angle[De]=!0,t.$angle.toRad=r=>F(r).mul(t.$math.PI).div(180),t.$angle.toDeg=r=>F(r).mul(180).div(t.$math.PI),t},gi=new Set(["prototype","__proto__","constructor"]),di=t=>!(gi.has(t)||t.startsWith("__")),U=async(t,r)=>{switch(t.type){case"Literal":return typeof t.value=="number"?new L(t.raw||t.value):t.value;case"Identifier":if(!(t.name in r))throw new z(`Undefined variable: ${t.name}`);return r[t.name];case"MemberExpression":const e=await U(t.object,r);if(e==null)throw new z(`Cannot access property of ${e}`);let n;if(t.computed){const P=await U(t.property,r);n=String(P)}else n=t.property.name;if(!di(n))throw new Be(`Access to property "${n}" is not allowed for security reasons`,n);return e[n];case"ObjectExpression":const i={};for(const P of t.properties)if(P.type==="Property"){const M=P.key.type==="Identifier"?P.key.name:await U(P.key,r),j=await U(P.value,r);i[M]=j}else if(P.type==="SpreadElement"){const M=await U(P.argument,r);Object.assign(i,M)}return i;case"BinaryExpression":const s=await U(t.left,r),c=await U(t.right,r);return mi(t.operator,s,c);case"UnaryExpression":const l=await U(t.argument,r);return wi(t.operator,l);case"CallExpression":const u=await U(t.callee,r),p=[];for(const P of t.arguments)p.push(await U(P,r));if(typeof u!="function")throw new z("Callee is not a function");let m=null;return t.callee.type==="MemberExpression"&&(m=await U(t.callee.object,r)),u.apply(m,p);case"ConditionalExpression":return await U(t.test,r)?await U(t.consequent,r):await U(t.alternate,r);case"LogicalExpression":const w=await U(t.left,r);if(t.operator==="&&")return w&&await U(t.right,r);if(t.operator==="||")return w||await U(t.right,r);if(t.operator==="??")return w??await U(t.right,r);throw new z(`Unsupported logical operator: ${t.operator}`);case"ArrayExpression":const N=[];for(const P of t.elements)N.push(await U(P,r));return N;default:throw new z(`Unsupported node type: ${t.type}`)}},mi=(t,r,e)=>{if(ct(r)||ct(e))throw new z("Cannot use namespace head in operations - namespace heads must be used with property access (e.g., $math.PI) or method calls (e.g., $math.abs(x))");const n=i=>i instanceof L?i:new L(i);switch(t){case"+":return n(r).plus(n(e));case"-":return n(r).minus(n(e));case"*":return n(r).times(n(e));case"/":return n(r).div(n(e));case"%":return n(r).mod(n(e));case"**":return n(r).pow(n(e));case"<":return n(r).lt(n(e));case">":return n(r).gt(n(e));case"<=":return n(r).lte(n(e));case">=":return n(r).gte(n(e));case"==":case"=":return r instanceof L&&e instanceof L?r.eq(e):r==e;case"!=":return r instanceof L&&e instanceof L?!r.eq(e):r!=e;default:throw new z(`Unsupported binary operator: ${t}`)}},wi=(t,r)=>{switch(t){case"-":return r instanceof L?r.neg():-r;case"+":return r instanceof L?r:+r;case"!":return!r;default:throw new z(`Unsupported unary operator: ${t}`)}},$i=async(t,r)=>{try{const e=hi(),n=Object.create(null);for(const[s,c]of Object.entries(r))n[s]=c;for(const[s,c]of Object.entries(e))n[s]=c;const i=await U(t,n);if(ct(i))throw new z("Cannot use namespace head as a value - namespace heads must be used with property access (e.g., $math.PI) or method calls (e.g., $math.abs(x))");if(typeof i=="function")throw new Be("Cannot alias functions - functions must be called with parentheses");return i instanceof L?i:typeof i=="number"?new L(i):typeof i=="string"&&!isNaN(Number(i))?new L(i):i}catch(e){throw e instanceof de?e:new Error(`Failed to evaluate expression: ${e instanceof Error?e.message:String(e)}`)}},Si=t=>{if(typeof t!="string")return{valid:!1,error:"Expression must be a string"};const r=t.trim();if(r==="")return{valid:!1,error:"Expression cannot be empty"};try{return or(r),{valid:!0}}catch(e){if(e.location){const{line:n,column:i}=e.location.start;return{valid:!1,error:`Parse error at line ${n}, column ${i}: ${e.message}`,line:n,column:i}}return{valid:!1,error:`Parse error: ${e.message||String(e)}`}}},Pi=t=>typeof t!="string"?{valid:!1,error:"Variable name must be a string"}:t===""?{valid:!1,error:"Variable name cannot be empty"}:t.startsWith("$")?{valid:!1,error:"Variable names cannot start with $ (reserved for system namespaces)"}:t.startsWith("__")?{valid:!1,error:"Variable names cannot start with __ (reserved for security reasons)"}:["true","false","null","Infinity"].includes(t)?{valid:!1,error:`Variable name cannot be a reserved value: ${t}`}:/^\d/.test(t)?{valid:!1,error:"Variable names cannot start with a number"}:t.includes(".")?{valid:!1,error:"Variable names cannot contain dots (dots are only for property access in expressions)"}:{valid:!0},Mi=async t=>{if(!Array.isArray(t))throw new J("Input must be an array");for(const l of t){if(!l||typeof l!="object")throw new J("Each input must be an object");if(typeof l.name!="string"||!l.name)throw new J('Each input must have a non-empty string "name"');if(l.name.startsWith("$"))throw new J(`Variable names cannot start with $: ${l.name} ($ is reserved for system namespaces)`,l.name);if(l.name.startsWith("__"))throw new J(`Variable names cannot start with __: ${l.name} (__ prefix is reserved for security reasons)`,l.name);if(["true","false","null","Infinity"].includes(l.name))throw new J(`Variable name cannot be a reserved value: ${l.name}`,l.name);if(/^\d/.test(l.name))throw new J(`Variable names cannot start with a number: ${l.name}`,l.name);if(l.name.includes("."))throw new J(`Variable names cannot contain dots: ${l.name} (dots are only for property access in expressions)`,l.name);if(!l.expr&&l.value===void 0)throw new J(`Each input must have either "expr" or "value": ${l.name}`,l.name);if(l.expr!==void 0&&typeof l.expr!="string")throw new J(`"expr" must be a string if provided: ${l.name}`,l.name)}const r=new Set;for(const l of t){if(r.has(l.name))throw new J(`Duplicate name: ${l.name}`,l.name);r.add(l.name)}const{order:e,asts:n}=pi(t),i=new Map;for(const l of t)l.value!==void 0&&i.set(l.name,l.value);const s=Object.create(null),c=Object.create(null);for(const l of e){let u;if(i.has(l))u=i.get(l);else{const p=n.get(l);if(!p)throw new Error(`No expression or value found for: ${l}`);u=await $i(p,c)}u instanceof L||typeof u=="boolean"||u===null?(s[l]=u,c[l]=u):(c[l]=u,typeof u=="number"&&(s[l]=new L(u)))}return{values:s,order:e}};export{pt as CircularDependencyError,L as Decimal,de as EvallaError,z as EvaluationError,ge as ParseError,Be as SecurityError,J as ValidationError,Si as checkSyntax,Pi as checkVariableName,Mi as evalla};
