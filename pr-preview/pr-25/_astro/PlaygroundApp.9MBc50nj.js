import{r as b}from"./index.DiEladB3.js";const me="modulepreload",pe=function(c){return"/evalla/pr-preview/pr-25/"+c},D={},B=function(l,u,y){let f=Promise.resolve();if(u&&u.length>0){let N=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const x=document.querySelector("meta[property=csp-nonce]"),j=x?.nonce||x?.getAttribute("nonce");f=N(u.map(d=>{if(d=pe(d),d in D)return;D[d]=!0;const h=d.endsWith(".css"),E=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${E}`))return;const $=document.createElement("link");if($.rel=h?"stylesheet":me,h||($.as="script"),$.crossOrigin="",$.href=d,j&&$.setAttribute("nonce",j),document.head.appendChild($),h)return new Promise((q,T)=>{$.addEventListener("load",q),$.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${d}`)))})}))}function p(N){const x=new Event("vite:preloadError",{cancelable:!0});if(x.payload=N,window.dispatchEvent(x),!x.defaultPrevented)throw N}return f.then(N=>{for(const x of N||[])x.status==="rejected"&&p(x.reason);return l().catch(p)})};var U={exports:{}},O={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H;function xe(){if(H)return O;H=1;var c=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function u(y,f,p){var N=null;if(p!==void 0&&(N=""+p),f.key!==void 0&&(N=""+f.key),"key"in f){p={};for(var x in f)x!=="key"&&(p[x]=f[x])}else p=f;return f=p.ref,{$$typeof:c,type:y,key:N,ref:f!==void 0?f:null,props:p}}return O.Fragment=l,O.jsx=u,O.jsxs=u,O}var W;function de(){return W||(W=1,U.exports=xe()),U.exports}var e=de();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=(...c)=>c.filter((l,u,y)=>!!l&&l.trim()!==""&&y.indexOf(l)===u).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=c=>c.replace(/^([A-Z])|[\s-_]+(\w)/g,(l,u,y)=>y?y.toUpperCase():u.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=c=>{const l=he(c);return l.charAt(0).toUpperCase()+l.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ge={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=c=>{for(const l in c)if(l.startsWith("aria-")||l==="role"||l==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=b.forwardRef(({color:c="currentColor",size:l=24,strokeWidth:u=2,absoluteStrokeWidth:y,className:f="",children:p,iconNode:N,...x},j)=>b.createElement("svg",{ref:j,...ge,width:l,height:l,stroke:c,strokeWidth:y?Number(u)*24/Number(l):u,className:K("lucide",f),...!p&&!fe(x)&&{"aria-hidden":"true"},...x},[...N.map(([d,h])=>b.createElement(d,h)),...Array.isArray(p)?p:[p]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=(c,l)=>{const u=b.forwardRef(({className:y,...f},p)=>b.createElement(ve,{ref:p,iconNode:l,className:K(`lucide-${ue(Y(c))}`,`lucide-${c}`,y),...f}));return u.displayName=Y(c),u};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],je=M("download",be);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],G=M("file-text",ye);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],we=M("play",Ne);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Q=M("plus",Ee);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],V=M("trash-2",$e);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],X=M("upload",ke);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Z=M("x",Ce),I={circle:{name:"Circle calculations",expressions:[{name:"radius",expr:"5",mode:"expr"},{name:"pi",expr:"$math.PI",mode:"expr"},{name:"circumference",expr:"2 * pi * radius",mode:"expr"},{name:"area",expr:"pi * radius * radius",mode:"expr"}]},arrayLiterals:{name:"Arrays via value property",expressions:[{name:"data",value:[10,20,30,40,50],mode:"value"},{name:"first",expr:"data[0]",mode:"expr"},{name:"last",expr:"data[4]",mode:"expr"},{name:"sum",expr:"data[0] + data[1] + data[2] + data[3] + data[4]",mode:"expr"},{name:"average",expr:"sum / 5",mode:"expr"}]},objectProperties:{name:"Object properties with dot notation",expressions:[{name:"point",value:{x:10,y:20},mode:"value"},{name:"scaledX",expr:"point.x * 2",mode:"expr"},{name:"scaledY",expr:"point.y * 2",mode:"expr"},{name:"distance",expr:"$math.sqrt(point.x**2 + point.y**2)",mode:"expr"}]},nestedObjects:{name:"Nested objects with dot notation",expressions:[{name:"config",value:{display:{width:1920,height:1080},scale:2},mode:"value"},{name:"scaledWidth",expr:"config.display.width / config.scale",mode:"expr"},{name:"scaledHeight",expr:"config.display.height / config.scale",mode:"expr"},{name:"aspectRatio",expr:"config.display.width / config.display.height",mode:"expr"}]},precision:{name:"Decimal precision",expressions:[{name:"a",expr:"0.1"},{name:"b",expr:"0.2"},{name:"sum",expr:"a + b"}]},trig:{name:"Trigonometry",expressions:[{name:"degrees",expr:"45"},{name:"radians",expr:"$angle.toRad(degrees)"},{name:"sine",expr:"$math.sin(radians)"},{name:"cosine",expr:"$math.cos(radians)"}]},mathConstants:{name:"$math - Constants",expressions:[{name:"pi",expr:"$math.PI"},{name:"e",expr:"$math.E"},{name:"sqrt2",expr:"$math.SQRT2"},{name:"ln2",expr:"$math.LN2"},{name:"log2e",expr:"$math.LOG2E"}]},mathBasic:{name:"$math - Basic functions",expressions:[{name:"absVal",expr:"$math.abs(-42)"},{name:"sqrtVal",expr:"$math.sqrt(144)"},{name:"cbrtVal",expr:"$math.cbrt(27)"},{name:"floorVal",expr:"$math.floor(4.9)"},{name:"ceilVal",expr:"$math.ceil(4.1)"},{name:"roundVal",expr:"$math.round(4.5)"}]},mathAdvanced:{name:"$math - Powers & logs",expressions:[{name:"base",expr:"2"},{name:"exponent",expr:"10"},{name:"power",expr:"$math.pow(base, exponent)"},{name:"log2",expr:"$math.log2(power)"},{name:"ln",expr:"$math.ln($math.E)"},{name:"log10",expr:"$math.log10(1000)"}]},mathMinMax:{name:"$math - Min/Max with arrays",expressions:[{name:"values",value:[42,17,99,8],mode:"value"},{name:"minVal",expr:"$math.min(values[0], values[1], values[2], values[3])",mode:"expr"},{name:"maxVal",expr:"$math.max(values[0], values[1], values[2], values[3])",mode:"expr"},{name:"range",expr:"maxVal - minVal",mode:"expr"}]},trigAdvanced:{name:"$math - Advanced trig",expressions:[{name:"angle",expr:"30"},{name:"rad",expr:"$angle.toRad(angle)"},{name:"tanVal",expr:"$math.tan(rad)"},{name:"atanVal",expr:"$math.atan(tanVal)"},{name:"backToDeg",expr:"$angle.toDeg(atanVal)"}]},unitLength:{name:"$unit - Length conversions",expressions:[{name:"mm",expr:"25.4"},{name:"inches",expr:"$unit.mmToInch(mm)"},{name:"cm",expr:"mm / 10"},{name:"inchesFromCm",expr:"$unit.cmToInch(cm)"},{name:"meters",expr:"1"},{name:"feet",expr:"$unit.mToFt(meters)"}]},unitRoundTrip:{name:"$unit - Round-trip test",expressions:[{name:"original",expr:"100"},{name:"toInch",expr:"$unit.mmToInch(original)"},{name:"backToMm",expr:"$unit.inchToMm(toInch)"},{name:"difference",expr:"backToMm - original"}]},angleConversions:{name:"$angle - Conversions",expressions:[{name:"deg0",expr:"0"},{name:"deg90",expr:"90"},{name:"deg180",expr:"180"},{name:"deg360",expr:"360"},{name:"rad90",expr:"$angle.toRad(deg90)"},{name:"rad180",expr:"$angle.toRad(deg180)"},{name:"backTo180",expr:"$angle.toDeg(rad180)"}]},pythagorean:{name:"Pythagorean theorem",expressions:[{name:"a",expr:"3"},{name:"b",expr:"4"},{name:"aSquared",expr:"$math.pow(a, 2)"},{name:"bSquared",expr:"$math.pow(b, 2)"},{name:"cSquared",expr:"aSquared + bSquared"},{name:"c",expr:"$math.sqrt(cSquared)"}]},compoundInterest:{name:"Compound interest",expressions:[{name:"principal",expr:"1000"},{name:"rate",expr:"0.05"},{name:"years",expr:"10"},{name:"e",expr:"$math.E"},{name:"amount",expr:"principal * $math.pow(e, rate * years)"},{name:"interest",expr:"amount - principal"}]},nestedArrays:{name:"Nested arrays (matrices)",expressions:[{name:"matrix",value:[[1,2,3],[4,5,6],[7,8,9]],mode:"value"},{name:"topLeft",expr:"matrix[0][0]",mode:"expr"},{name:"center",expr:"matrix[1][1]",mode:"expr"},{name:"bottomRight",expr:"matrix[2][2]",mode:"expr"},{name:"diagonal",expr:"topLeft + center + bottomRight",mode:"expr"}]},stressDependencies:{name:"Stress test - Dependencies",expressions:[{name:"a",expr:"1"},{name:"b",expr:"a + 1"},{name:"c",expr:"b + 1"},{name:"d",expr:"c + 1"},{name:"e",expr:"d + 1"},{name:"f",expr:"e + 1"},{name:"g",expr:"f + 1"},{name:"h",expr:"g + 1"},{name:"i",expr:"h + 1"},{name:"j",expr:"i + 1"},{name:"sum",expr:"a + b + c + d + e + f + g + h + i + j"}]},stressMath:{name:"Stress test - Math ops",expressions:[{name:"n",expr:"1000000"},{name:"sqrt",expr:"$math.sqrt(n)"},{name:"log",expr:"$math.log10(n)"},{name:"power",expr:"$math.pow(sqrt, 2)"},{name:"nested",expr:"$math.sqrt($math.sqrt($math.sqrt(n)))"},{name:"combo",expr:"$math.max(sqrt, log, $math.min(power, nested))"}]},orderIndependent1:{name:"Order independence - Basic",expressions:[{name:"result",expr:"a + b + c"},{name:"c",expr:"30"},{name:"a",expr:"10"},{name:"b",expr:"20"}]},orderIndependent2:{name:"Order independence - Complex",expressions:[{name:"final",expr:"step3 * 2"},{name:"step1",expr:"base + 5"},{name:"step3",expr:"step2 + step1"},{name:"base",expr:"10"},{name:"step2",expr:"base * 2"}]},orderIndependent3:{name:"Order independence - Mixed",expressions:[{name:"total",expr:"subtotal + tax"},{name:"subtotal",expr:"price * quantity"},{name:"quantity",expr:"5"},{name:"tax",expr:"subtotal * taxRate"},{name:"price",expr:"19.99"},{name:"taxRate",expr:"0.08"}]},booleanSlope:{name:"Boolean - Is it steep?",expressions:[{name:"rise",expr:"15"},{name:"run",expr:"20"},{name:"slope",expr:"rise / run"},{name:"isSteep",expr:"slope > 0.5"},{name:"label",expr:"isSteep ? slope : null"}]},booleanComparisons:{name:"Boolean - Comparisons",expressions:[{name:"a",expr:"10"},{name:"b",expr:"20"},{name:"less",expr:"a < b"},{name:"greater",expr:"a > b"},{name:"equal",expr:"a = b"},{name:"notEqual",expr:"a != b"}]},booleanLogic:{name:"Boolean - Logical ops",expressions:[{name:"x",expr:"15"},{name:"inRange",expr:"x > 10 && x < 20"},{name:"outOfRange",expr:"x < 10 || x > 20"},{name:"valid",expr:"!outOfRange"}]},equalityOperators:{name:"Equality - Single & double",expressions:[{name:"x",expr:"5"},{name:"y",expr:"5"},{name:"z",expr:"10"},{name:"singleEq",expr:"x = y"},{name:"doubleEq",expr:"x == y"},{name:"calculated",expr:"(x + 5) = z"}]},reservedValues:{name:"Reserved values in action",expressions:[{name:"enabled",expr:"true"},{name:"disabled",expr:"false"},{name:"missing",expr:"null"},{name:"result",expr:"enabled && !disabled"},{name:"fallback",expr:"missing ?? 42"}]},ternaryBoolean:{name:"Ternary with boolean branches",expressions:[{name:"score",expr:"85"},{name:"passed",expr:"score >= 60 ? true : false"},{name:"grade",expr:"score >= 90 ? 100 : score"},{name:"bonus",expr:"score >= 90 ? 10 : null"}]}};function Re(){const[c,l]=b.useState([{name:"a",expr:"10",mode:"expr"},{name:"b",expr:"a * 2",mode:"expr"},{name:"c",expr:"a + b",mode:"expr"}]),[u,y]=b.useState(null),[f,p]=b.useState(null),[N,x]=b.useState(null),[j,d]=b.useState(new Map),[h,E]=b.useState(new Map),[$,q]=b.useState(4),[T,ee]=b.useState("all"),k=b.useRef(new Map),C=b.useRef(new Map),P=b.useRef(null),L=b.useRef(null);b.useEffect(()=>{B(async()=>{const{checkSyntax:t,checkVariableName:s}=await import("./index.CxtYTnDB.js");return{checkSyntax:t,checkVariableName:s}},[]).then(({checkSyntax:t,checkVariableName:s})=>{P.current=t,L.current=s}).catch(t=>{console.error("Failed to load validation functions:",t)})},[]);const z=t=>t.valueRaw!==void 0?t.valueRaw:t.value?JSON.stringify(t.value,null,2):"",S=(t,s,a,o,r)=>{const n="w-full px-3 py-2 text-sm border rounded font-mono focus:outline-none focus:ring-2";return t?`${n} border-orange-400 bg-orange-50 focus:ring-orange-500`:N===s?`${n} border-red-300 bg-white focus:ring-blue-500`:a==="value"&&(o||r)?`${n} border-purple-400 bg-white focus:ring-purple-500`:a==="expr"||!a&&!o?`${n} border-teal-400 bg-white focus:ring-teal-500`:`${n} border-gray-300 bg-white focus:ring-blue-500`},R=(t,s,a)=>{const o=[...c];if(s==="value"){o[t].valueRaw=a;try{o[t].value=a?JSON.parse(a):void 0}catch{o[t].value=void 0}}else o[t][s]=a;if(l(o),s==="name"){const r=C.current.get(t);if(r&&clearTimeout(r),!a.trim()){const i=new Map(h);i.delete(t),E(i);return}const n=setTimeout(()=>{if(!L.current)return;const i=L.current(a);E(g=>{const m=new Map(g);return i.valid?m.delete(t):m.set(t,i.error||"Invalid variable name"),m})},300);C.current.set(t,n)}if(s==="expr"&&o[t].mode==="expr"){const r=k.current.get(t);if(r&&clearTimeout(r),!a.trim()){const i=new Map(j);i.delete(t),d(i);return}const n=setTimeout(()=>{if(!P.current)return;const i=P.current(a);d(g=>{const m=new Map(g);return i.valid?m.delete(t):m.set(t,i.error||"Syntax error"),m})},300);k.current.set(t,n)}if(s==="value"&&o[t].mode==="value"){const r=k.current.get(t);if(r&&clearTimeout(r),!a.trim()){const i=new Map(j);i.delete(t),d(i);return}const n=setTimeout(()=>{try{JSON.parse(a),d(i=>{const g=new Map(i);return g.delete(t),g})}catch(i){d(g=>{const m=new Map(g);return m.set(t,i instanceof Error?i.message:"Invalid JSON"),m})}},300);k.current.set(t,n)}},F=(t="expr")=>{l([...c,{name:`var${$}`,expr:t==="expr"?"":void 0,value:void 0,mode:t}]),q($+1)},_=t=>{const s=k.current.get(t);s&&(clearTimeout(s),k.current.delete(t));const a=C.current.get(t);a&&(clearTimeout(a),C.current.delete(t)),l(c.filter((w,v)=>v!==t));const o=new Map(j),r=new Map(h);o.delete(t),r.delete(t);const n=new Map,i=new Map,g=new Map,m=new Map;o.forEach((w,v)=>{v>t?n.set(v-1,w):n.set(v,w)}),r.forEach((w,v)=>{v>t?i.set(v-1,w):i.set(v,w)}),k.current.forEach((w,v)=>{v>t?g.set(v-1,w):v!==t&&g.set(v,w)}),C.current.forEach((w,v)=>{v>t?m.set(v-1,w):v!==t&&m.set(v,w)}),d(n),E(i),k.current=g,C.current=m},te=()=>{l(t=>t.filter(s=>s.mode!=="value")),d(new Map),E(new Map),k.current.clear(),C.current.clear()},se=()=>{l(t=>t.filter(s=>s.mode==="value")),d(new Map),E(new Map),k.current.clear(),C.current.clear()},ae=()=>{const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=s=>{const a=s.target.files?.[0];if(a){const o=new FileReader;o.onload=r=>{try{const n=JSON.parse(r.target?.result),i=[];Object.entries(n).forEach(([g,m])=>{i.push({name:g,value:m,mode:"value"})}),l(g=>[...g.filter(m=>m.mode!=="value"),...i])}catch(n){p("Failed to parse JSON file: "+(n instanceof Error?n.message:"Unknown error"))}},o.readAsText(a)}},t.click()},re=async()=>{try{const t=await navigator.clipboard.readText(),s=JSON.parse(t);Object.entries(s).forEach(([a,o])=>{l(r=>[...r,{name:a,value:o,mode:"value"}])})}catch(t){p("Failed to parse JSON from clipboard: "+(t instanceof Error?t.message:"Unknown error"))}},ne=()=>{const t=document.createElement("input");t.type="file",t.accept=".json,.txt",t.onchange=s=>{const a=s.target.files?.[0];if(a){const o=new FileReader;o.onload=r=>{try{const n=r.target?.result,i=JSON.parse(n),g=[];Array.isArray(i)?i.forEach(m=>{m.name&&(m.expr!==void 0||m.value!==void 0)&&g.push({name:m.name,expr:m.expr,value:m.value,mode:m.mode||(m.value!==void 0?"value":"expr")})}):Object.entries(i).forEach(([m,w])=>{g.push({name:m,expr:String(w),mode:"expr"})}),l(m=>[...m.filter(w=>w.mode==="value"),...g])}catch(n){p("Failed to parse expressions file: "+(n instanceof Error?n.message:"Unknown error"))}},o.readAsText(a)}},t.click()},oe=async()=>{try{const t=await navigator.clipboard.readText(),s=JSON.parse(t);Array.isArray(s)?s.forEach(a=>{a.name&&(a.expr!==void 0||a.value!==void 0)&&l(o=>[...o,{name:a.name,expr:a.expr,value:a.value,mode:a.mode||(a.value!==void 0?"value":"expr")}])}):Object.entries(s).forEach(([a,o])=>{l(r=>[...r,{name:a,expr:String(o),mode:"expr"}])})}catch(t){p("Failed to parse expressions from clipboard: "+(t instanceof Error?t.message:"Unknown error"))}},le=()=>{const s=c.filter(n=>n.mode==="expr").map(n=>({name:n.name,expr:n.expr||""})),a=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),o=URL.createObjectURL(a),r=document.createElement("a");r.href=o,r.download="expressions.json",r.click(),URL.revokeObjectURL(o)},ie=t=>{const s=I[t];s&&(l(s.expressions),y(null),p(null),x(null),d(new Map),E(new Map))},ce=async()=>{if(p(null),x(null),j.size>0){const t=Array.from(j.keys())[0],s=j.get(t);p(`Cannot evaluate: ${s}`),x(t);return}if(h.size>0){const t=Array.from(h.keys())[0],s=h.get(t);p(`Cannot evaluate: ${s}`),x(t);return}try{const{evalla:t,formatResults:s}=await B(async()=>{const{evalla:n,formatResults:i}=await import("./index.CxtYTnDB.js");return{evalla:n,formatResults:i}},[]),a=c.filter(n=>n.name.trim()?n.mode==="value"?n.value!==void 0&&n.value!=="":n.expr!==void 0:!1).map(n=>n.mode==="value"?{name:n.name,value:n.value}:{name:n.name,expr:n.expr||""});if(a.length===0){p("Please add at least one expression");return}const o=await t(a),r=T==="all"?o:s(o,{decimalPlaces:parseInt(T)});y(r)}catch(t){if(p(t.message),y(null),t.variableName){const s=c.findIndex(a=>a.name===t.variableName);s!==-1&&x(s)}}},J=c.filter(t=>t.mode==="value").map(t=>({...t,originalIndex:c.indexOf(t)})),A=c.filter(t=>t.mode!=="value").map(t=>({...t,originalIndex:c.indexOf(t)}));return e.jsxs("div",{className:"content",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{style:{marginTop:"2rem"},children:"Playground"}),e.jsx("p",{className:"text-gray-600 text-sm sm:text-base mb-4",children:"Define variables with math expressions. They can reference each other and will be evaluated in the correct order automatically."}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Examples"}),e.jsxs("select",{onChange:t=>t.target.value&&ie(t.target.value),defaultValue:"",className:"px-3 py-2 text-sm border border-gray-300 rounded bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",disabled:!0,children:"Choose an example"}),Object.entries(I).map(([t,{name:s}])=>e.jsx("option",{value:t,children:s},t))]})]}),e.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-3 sm:p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-900",children:"Values (JSON)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:re,className:"px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Paste JSON from clipboard",children:[e.jsx(G,{size:14}),e.jsx("span",{children:"Paste"})]}),e.jsxs("button",{onClick:ae,className:"px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Upload JSON file",children:[e.jsx(X,{size:14}),e.jsx("span",{children:"Upload"})]}),J.length>0&&e.jsxs("button",{onClick:te,className:"px-3 py-1.5 bg-gray-500 hover:bg-gray-600 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Clear all values",children:[e.jsx(Z,{size:14}),e.jsx("span",{children:"Clear All"})]})]})]}),e.jsx("p",{className:"text-purple-800 text-xs sm:text-sm mb-3 italic",children:"Values are JSON objects/arrays that can be referenced in expressions but do not appear in the evaluation results."}),J.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hidden sm:grid sm:grid-cols-[150px_1fr_auto] gap-2 mb-2 text-sm font-medium text-purple-900",children:[e.jsx("div",{children:"Name"}),e.jsx("div",{children:"JSON Value"}),e.jsx("div",{className:"w-[90px]"})]}),e.jsx("div",{className:"space-y-4 sm:space-y-2",children:J.map(({originalIndex:t,...s})=>{const a=j.has(t),o=h.has(t);return e.jsxs("div",{className:`${N===t?"bg-red-50 -mx-2 px-2 py-1 rounded":""}`,children:[e.jsxs("div",{className:"hidden sm:grid sm:grid-cols-[150px_1fr_auto] gap-2 items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",placeholder:"e.g. point",value:s.name,onChange:r=>R(t,"name",r.target.value),className:S(o,t,s.mode,!1,!0)}),o&&e.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:h.get(t)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{rows:3,value:z(s),onChange:r=>R(t,"value",r.target.value),className:S(a,t,s.mode,!0),placeholder:'{"x": 10, "y": 20}'}),a&&e.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:j.get(t)})]}),e.jsxs("button",{onClick:()=>_(t),className:"w-24 px-3 py-2 bg-gray-500 hover:bg-gray-600 text-white text-sm rounded transition-colors flex items-center gap-1.5 justify-center",children:[e.jsx(V,{size:16}),e.jsx("span",{children:"Remove"})]})]}),e.jsxs("div",{className:"sm:hidden flex gap-2",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("label",{className:"text-xs font-medium text-purple-900 w-12",children:"Name"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",placeholder:"e.g. point",value:s.name,onChange:r=>R(t,"name",r.target.value),className:S(o,t,s.mode,!1,!0)}),o&&e.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:h.get(t)})]})]}),e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("label",{className:"text-xs font-medium text-purple-900 w-12 mt-2",children:"Value"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{rows:3,value:z(s),onChange:r=>R(t,"value",r.target.value),className:S(a,t,s.mode,!0),placeholder:'{"x": 10, "y": 20}'}),a&&e.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:j.get(t)})]})]})]}),e.jsx("button",{onClick:()=>_(t),className:"p-2 bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors self-center",children:e.jsx(V,{size:16})})]})]},t)})})]}):e.jsx("p",{className:"text-purple-700 text-sm italic text-center py-4",children:"No values defined. Add values to use in your expressions."}),e.jsx("div",{className:"flex justify-end gap-2 mt-3",children:e.jsxs("button",{onClick:()=>F("value"),className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white text-sm rounded transition-colors flex items-center gap-1.5",children:[e.jsx(Q,{size:16}),e.jsx("span",{children:"Add Value"})]})})]}),e.jsxs("div",{className:"bg-teal-50 border-2 border-teal-200 rounded-lg p-3 sm:p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-teal-900",children:"Expressions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:oe,className:"px-3 py-1.5 bg-teal-600 hover:bg-teal-700 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Paste expressions from clipboard",children:[e.jsx(G,{size:14}),e.jsx("span",{children:"Paste"})]}),e.jsxs("button",{onClick:ne,className:"px-3 py-1.5 bg-teal-600 hover:bg-teal-700 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Upload expressions file",children:[e.jsx(X,{size:14}),e.jsx("span",{children:"Upload"})]}),e.jsxs("button",{onClick:le,className:"px-3 py-1.5 bg-teal-600 hover:bg-teal-700 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Download expressions",disabled:A.length===0,children:[e.jsx(je,{size:14}),e.jsx("span",{children:"Download"})]}),A.length>0&&e.jsxs("button",{onClick:se,className:"px-3 py-1.5 bg-gray-500 hover:bg-gray-600 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Clear all expressions",children:[e.jsx(Z,{size:14}),e.jsx("span",{children:"Clear All"})]})]})]}),e.jsx("p",{className:"text-teal-800 text-xs sm:text-sm mb-3 italic",children:"Expressions are mathematical formulas that will be evaluated and appear in the results."}),A.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"hidden sm:grid sm:grid-cols-[150px_1fr_auto] gap-2 mb-2 text-sm font-medium text-teal-900",children:[e.jsx("div",{children:"Name"}),e.jsx("div",{children:"Expression"}),e.jsx("div",{className:"w-[90px]"})]}),e.jsx("div",{className:"space-y-4 sm:space-y-2",children:A.map(({originalIndex:t,...s})=>{const a=j.has(t),o=h.has(t);return e.jsxs("div",{className:`${N===t?"bg-red-50 -mx-2 px-2 py-1 rounded":""}`,children:[e.jsxs("div",{className:"hidden sm:grid sm:grid-cols-[150px_1fr_auto] gap-2 items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",placeholder:"e.g. radius",value:s.name,onChange:r=>R(t,"name",r.target.value),className:S(o,t,s.mode,!1,!0)}),o&&e.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:h.get(t)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",placeholder:"e.g. a + b",value:s.expr||"",onChange:r=>R(t,"expr",r.target.value),className:S(a,t,s.mode,!1,!1)}),a&&e.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:j.get(t)})]}),e.jsxs("button",{onClick:()=>_(t),className:"w-24 px-3 py-2 bg-gray-500 hover:bg-gray-600 text-white text-sm rounded transition-colors flex items-center gap-1.5 justify-center",children:[e.jsx(V,{size:16}),e.jsx("span",{children:"Remove"})]})]}),e.jsxs("div",{className:"sm:hidden flex gap-2",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("label",{className:"text-xs font-medium text-teal-900 w-12",children:"Name"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",placeholder:"e.g. radius",value:s.name,onChange:r=>R(t,"name",r.target.value),className:S(o,t,s.mode,!1,!0)}),o&&e.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:h.get(t)})]})]}),e.jsxs("div",{className:"flex gap-2 items-start",children:[e.jsx("label",{className:"text-xs font-medium text-teal-900 w-12 mt-2",children:"Expr"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",placeholder:"e.g. a + b",value:s.expr||"",onChange:r=>R(t,"expr",r.target.value),className:S(a,t,s.mode,!1,!1)}),a&&e.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:j.get(t)})]})]})]}),e.jsx("button",{onClick:()=>_(t),className:"p-2 bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors self-center",children:e.jsx(V,{size:16})})]})]},t)})})]}):e.jsx("p",{className:"text-teal-700 text-sm italic text-center py-4",children:"No expressions defined. Add expressions to calculate results."}),e.jsx("div",{className:"flex justify-end gap-2 mt-3",children:e.jsxs("button",{onClick:()=>F("expr"),className:"px-4 py-2 bg-teal-500 hover:bg-teal-600 text-white text-sm rounded transition-colors flex items-center gap-1.5",children:[e.jsx(Q,{size:16}),e.jsx("span",{children:"Add Expression"})]})})]})]}),f&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded",children:e.jsx("p",{className:"text-red-700 font-mono text-sm",children:f})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-3",children:"Results"}),e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsx("label",{htmlFor:"decimal-places",className:"text-sm text-gray-600 whitespace-nowrap",children:"Decimal places:"}),e.jsxs("select",{id:"decimal-places",value:T,onChange:t=>ee(t.target.value),className:"px-2 py-1.5 text-sm border border-gray-300 rounded bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"0",children:"0"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"4",children:"4"}),e.jsx("option",{value:"6",children:"6"}),e.jsx("option",{value:"7",children:"7"}),e.jsx("option",{value:"10",children:"10"})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("button",{onClick:ce,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded font-semibold transition-colors flex items-center gap-1.5",children:[e.jsx(we,{size:18}),e.jsx("span",{children:"Evaluate"})]}),u&&e.jsx("button",{onClick:()=>y(null),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white text-sm rounded font-semibold transition-colors",children:"Reset"})]}),u?e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-green-200",children:[e.jsx("th",{className:"text-left py-2 font-medium text-gray-600",children:"Name"}),e.jsx("th",{className:"text-left py-2 font-medium text-gray-600",children:"Value"})]})}),e.jsx("tbody",{children:Object.entries(u.values).map(([t,s])=>{const a=s===null?"null":typeof s=="boolean"?String(s):s.toString();return e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-2 font-mono text-gray-700",children:t}),e.jsx("td",{className:"py-2 px-2 font-mono text-green-700 font-semibold break-all",children:a})]},t)})})]}),e.jsxs("div",{className:"mt-4 text-gray-600 text-xs sm:text-sm italic",children:["Evaluation order: ",u.order.join(" → ")]})]}):e.jsx("p",{className:"text-gray-500 text-sm italic",children:"Click Evaluate to see results"})]})}),e.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-600 rounded-lg p-4 sm:p-6",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-blue-900 mb-3",children:"Quick Tips"}),e.jsxs("ul",{className:"space-y-1.5 text-gray-700 text-sm sm:text-base",children:[e.jsxs("li",{children:["• Variables can reference other variables (e.g., ",e.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"b = a * 2"}),")"]}),e.jsxs("li",{children:["• Use decimal precision math (e.g., ",e.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"0.1 + 0.2"})," = 0.3 exactly!)"]}),e.jsxs("li",{children:["• Access nested properties with dots (e.g., ",e.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"point.x"}),")"]}),e.jsxs("li",{children:["• Use ",e.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"$math"})," functions: ",e.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"$math.sqrt(16)"}),", ",e.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"$math.PI"}),", etc."]}),e.jsxs("li",{children:["• Convert units: ",e.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"$unit.mmToInch(25.4)"})]}),e.jsxs("li",{children:["• Convert angles: ",e.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"$angle.toRad(180)"})]})]})]})]})}export{Re as default};
