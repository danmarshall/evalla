import{r as le}from"./index.DiEladB3.js";var xt={exports:{}},Ie={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ht;function ts(){if(Ht)return Ie;Ht=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function t(s,i,n){var o=null;if(n!==void 0&&(o=""+n),i.key!==void 0&&(o=""+i.key),"key"in i){n={};for(var l in i)l!=="key"&&(n[l]=i[l])}else n=i;return i=n.ref,{$$typeof:e,type:s,key:o,ref:i!==void 0?i:null,props:n}}return Ie.Fragment=r,Ie.jsx=t,Ie.jsxs=t,Ie}var Wt;function rs(){return Wt||(Wt=1,xt.exports=ts()),xt.exports}var h=rs();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=(...e)=>e.filter((r,t,s)=>!!r&&r.trim()!==""&&s.indexOf(r)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,t,s)=>s?s.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=e=>{const r=ns(e);return r.charAt(0).toUpperCase()+r.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var is={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=e=>{for(const r in e)if(r.startsWith("aria-")||r==="role"||r==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=le.forwardRef(({color:e="currentColor",size:r=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:n,iconNode:o,...l},c)=>le.createElement("svg",{ref:c,...is,width:r,height:r,stroke:e,strokeWidth:s?Number(t)*24/Number(r):t,className:ir("lucide",i),...!n&&!as(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,m])=>le.createElement(u,m)),...Array.isArray(n)?n:[n]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(e,r)=>{const t=le.forwardRef(({className:s,...i},n)=>le.createElement(os,{ref:n,iconNode:r,className:ir(`lucide-${ss(Gt(e))}`,`lucide-${e}`,s),...i}));return t.displayName=Gt(e),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],cs=Re("download",ls);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Xt=Re("file-text",us);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],ps=Re("play",fs);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Qt=Re("plus",ds);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],He=Re("trash-2",ms);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Yt=Re("upload",hs);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Kt=Re("x",gs),er={circle:{name:"Circle calculations",expressions:[{name:"radius",expr:"5",mode:"expr"},{name:"pi",expr:"$math.PI",mode:"expr"},{name:"circumference",expr:"2 * pi * radius",mode:"expr"},{name:"area",expr:"pi * radius * radius",mode:"expr"}]},arrayLiterals:{name:"Arrays via value property",expressions:[{name:"data",value:[10,20,30,40,50],mode:"value"},{name:"first",expr:"data[0]",mode:"expr"},{name:"last",expr:"data[4]",mode:"expr"},{name:"sum",expr:"data[0] + data[1] + data[2] + data[3] + data[4]",mode:"expr"},{name:"average",expr:"sum / 5",mode:"expr"}]},objectProperties:{name:"Object properties with dot notation",expressions:[{name:"point",value:{x:10,y:20},mode:"value"},{name:"scaledX",expr:"point.x * 2",mode:"expr"},{name:"scaledY",expr:"point.y * 2",mode:"expr"},{name:"distance",expr:"$math.sqrt(point.x**2 + point.y**2)",mode:"expr"}]},nestedObjects:{name:"Nested objects with dot notation",expressions:[{name:"config",value:{display:{width:1920,height:1080},scale:2},mode:"value"},{name:"scaledWidth",expr:"config.display.width / config.scale",mode:"expr"},{name:"scaledHeight",expr:"config.display.height / config.scale",mode:"expr"},{name:"aspectRatio",expr:"config.display.width / config.display.height",mode:"expr"}]},precision:{name:"Decimal precision",expressions:[{name:"a",expr:"0.1"},{name:"b",expr:"0.2"},{name:"sum",expr:"a + b"}]},trig:{name:"Trigonometry",expressions:[{name:"degrees",expr:"45"},{name:"radians",expr:"$angle.toRad(degrees)"},{name:"sine",expr:"$math.sin(radians)"},{name:"cosine",expr:"$math.cos(radians)"}]},mathConstants:{name:"$math - Constants",expressions:[{name:"pi",expr:"$math.PI"},{name:"e",expr:"$math.E"},{name:"sqrt2",expr:"$math.SQRT2"},{name:"ln2",expr:"$math.LN2"},{name:"log2e",expr:"$math.LOG2E"}]},mathBasic:{name:"$math - Basic functions",expressions:[{name:"absVal",expr:"$math.abs(-42)"},{name:"sqrtVal",expr:"$math.sqrt(144)"},{name:"cbrtVal",expr:"$math.cbrt(27)"},{name:"floorVal",expr:"$math.floor(4.9)"},{name:"ceilVal",expr:"$math.ceil(4.1)"},{name:"roundVal",expr:"$math.round(4.5)"}]},mathAdvanced:{name:"$math - Powers & logs",expressions:[{name:"base",expr:"2"},{name:"exponent",expr:"10"},{name:"power",expr:"$math.pow(base, exponent)"},{name:"log2",expr:"$math.log2(power)"},{name:"ln",expr:"$math.ln($math.E)"},{name:"log10",expr:"$math.log10(1000)"}]},mathMinMax:{name:"$math - Min/Max with arrays",expressions:[{name:"values",value:[42,17,99,8],mode:"value"},{name:"minVal",expr:"$math.min(values[0], values[1], values[2], values[3])",mode:"expr"},{name:"maxVal",expr:"$math.max(values[0], values[1], values[2], values[3])",mode:"expr"},{name:"range",expr:"maxVal - minVal",mode:"expr"}]},trigAdvanced:{name:"$math - Advanced trig",expressions:[{name:"angle",expr:"30"},{name:"rad",expr:"$angle.toRad(angle)"},{name:"tanVal",expr:"$math.tan(rad)"},{name:"atanVal",expr:"$math.atan(tanVal)"},{name:"backToDeg",expr:"$angle.toDeg(atanVal)"}]},unitLength:{name:"$unit - Length conversions",expressions:[{name:"mm",expr:"25.4"},{name:"inches",expr:"$unit.mmToInch(mm)"},{name:"cm",expr:"mm / 10"},{name:"inchesFromCm",expr:"$unit.cmToInch(cm)"},{name:"meters",expr:"1"},{name:"feet",expr:"$unit.mToFt(meters)"}]},unitRoundTrip:{name:"$unit - Round-trip test",expressions:[{name:"original",expr:"100"},{name:"toInch",expr:"$unit.mmToInch(original)"},{name:"backToMm",expr:"$unit.inchToMm(toInch)"},{name:"difference",expr:"backToMm - original"}]},angleConversions:{name:"$angle - Conversions",expressions:[{name:"deg0",expr:"0"},{name:"deg90",expr:"90"},{name:"deg180",expr:"180"},{name:"deg360",expr:"360"},{name:"rad90",expr:"$angle.toRad(deg90)"},{name:"rad180",expr:"$angle.toRad(deg180)"},{name:"backTo180",expr:"$angle.toDeg(rad180)"}]},pythagorean:{name:"Pythagorean theorem",expressions:[{name:"a",expr:"3"},{name:"b",expr:"4"},{name:"aSquared",expr:"$math.pow(a, 2)"},{name:"bSquared",expr:"$math.pow(b, 2)"},{name:"cSquared",expr:"aSquared + bSquared"},{name:"c",expr:"$math.sqrt(cSquared)"}]},compoundInterest:{name:"Compound interest",expressions:[{name:"principal",expr:"1000"},{name:"rate",expr:"0.05"},{name:"years",expr:"10"},{name:"e",expr:"$math.E"},{name:"amount",expr:"principal * $math.pow(e, rate * years)"},{name:"interest",expr:"amount - principal"}]},nestedArrays:{name:"Nested arrays (matrices)",expressions:[{name:"matrix",value:[[1,2,3],[4,5,6],[7,8,9]],mode:"value"},{name:"topLeft",expr:"matrix[0][0]",mode:"expr"},{name:"center",expr:"matrix[1][1]",mode:"expr"},{name:"bottomRight",expr:"matrix[2][2]",mode:"expr"},{name:"diagonal",expr:"topLeft + center + bottomRight",mode:"expr"}]},stressDependencies:{name:"Stress test - Dependencies",expressions:[{name:"a",expr:"1"},{name:"b",expr:"a + 1"},{name:"c",expr:"b + 1"},{name:"d",expr:"c + 1"},{name:"e",expr:"d + 1"},{name:"f",expr:"e + 1"},{name:"g",expr:"f + 1"},{name:"h",expr:"g + 1"},{name:"i",expr:"h + 1"},{name:"j",expr:"i + 1"},{name:"sum",expr:"a + b + c + d + e + f + g + h + i + j"}]},stressMath:{name:"Stress test - Math ops",expressions:[{name:"n",expr:"1000000"},{name:"sqrt",expr:"$math.sqrt(n)"},{name:"log",expr:"$math.log10(n)"},{name:"power",expr:"$math.pow(sqrt, 2)"},{name:"nested",expr:"$math.sqrt($math.sqrt($math.sqrt(n)))"},{name:"combo",expr:"$math.max(sqrt, log, $math.min(power, nested))"}]},orderIndependent1:{name:"Order independence - Basic",expressions:[{name:"result",expr:"a + b + c"},{name:"c",expr:"30"},{name:"a",expr:"10"},{name:"b",expr:"20"}]},orderIndependent2:{name:"Order independence - Complex",expressions:[{name:"final",expr:"step3 * 2"},{name:"step1",expr:"base + 5"},{name:"step3",expr:"step2 + step1"},{name:"base",expr:"10"},{name:"step2",expr:"base * 2"}]},orderIndependent3:{name:"Order independence - Mixed",expressions:[{name:"total",expr:"subtotal + tax"},{name:"subtotal",expr:"price * quantity"},{name:"quantity",expr:"5"},{name:"tax",expr:"subtotal * taxRate"},{name:"price",expr:"19.99"},{name:"taxRate",expr:"0.08"}]},booleanSlope:{name:"Boolean - Is it steep?",expressions:[{name:"rise",expr:"15"},{name:"run",expr:"20"},{name:"slope",expr:"rise / run"},{name:"isSteep",expr:"slope > 0.5"},{name:"label",expr:"isSteep ? slope : null"}]},booleanComparisons:{name:"Boolean - Comparisons",expressions:[{name:"a",expr:"10"},{name:"b",expr:"20"},{name:"less",expr:"a < b"},{name:"greater",expr:"a > b"},{name:"equal",expr:"a = b"},{name:"notEqual",expr:"a != b"}]},booleanLogic:{name:"Boolean - Logical ops",expressions:[{name:"x",expr:"15"},{name:"inRange",expr:"x > 10 && x < 20"},{name:"outOfRange",expr:"x < 10 || x > 20"},{name:"valid",expr:"!outOfRange"}]},equalityOperators:{name:"Equality - Single & double",expressions:[{name:"x",expr:"5"},{name:"y",expr:"5"},{name:"z",expr:"10"},{name:"singleEq",expr:"x = y"},{name:"doubleEq",expr:"x == y"},{name:"calculated",expr:"(x + 5) = z"}]},reservedValues:{name:"Reserved values in action",expressions:[{name:"enabled",expr:"true"},{name:"disabled",expr:"false"},{name:"missing",expr:"null"},{name:"result",expr:"enabled && !disabled"},{name:"fallback",expr:"missing ?? 42"}]},ternaryBoolean:{name:"Ternary with boolean branches",expressions:[{name:"score",expr:"85"},{name:"passed",expr:"score >= 60 ? true : false"},{name:"grade",expr:"score >= 90 ? 100 : score"},{name:"bonus",expr:"score >= 90 ? 10 : null"}]}};/*!
 *  decimal.js v10.6.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Le=9e15,Me=1e9,wt="0123456789abcdef",Qe="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Ye="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",vt={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Le,maxE:Le,crypto:!1},ar,Ne,_=!0,et="[DecimalError] ",ke=et+"Invalid argument: ",or=et+"Precision limit exceeded",lr=et+"crypto unavailable",cr="[object Decimal]",oe=Math.floor,te=Math.pow,xs=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,ws=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,vs=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,ur=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,pe=1e7,q=7,bs=9007199254740991,$s=Qe.length-1,bt=Ye.length-1,y={toStringTag:cr};y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),O(e)};y.ceil=function(){return O(new this.constructor(this),this.e+1,2)};y.clampedTo=y.clamp=function(e,r){var t,s=this,i=s.constructor;if(e=new i(e),r=new i(r),!e.s||!r.s)return new i(NaN);if(e.gt(r))throw Error(ke+r);return t=s.cmp(e),t<0?e:s.cmp(r)>0?r:new i(s)};y.comparedTo=y.cmp=function(e){var r,t,s,i,n=this,o=n.d,l=(e=new n.constructor(e)).d,c=n.s,u=e.s;if(!o||!l)return!c||!u?NaN:c!==u?c:o===l?0:!o^c<0?1:-1;if(!o[0]||!l[0])return o[0]?c:l[0]?-u:0;if(c!==u)return c;if(n.e!==e.e)return n.e>e.e^c<0?1:-1;for(s=o.length,i=l.length,r=0,t=s<i?s:i;r<t;++r)if(o[r]!==l[r])return o[r]>l[r]^c<0?1:-1;return s===i?0:s>i^c<0?1:-1};y.cosine=y.cos=function(){var e,r,t=this,s=t.constructor;return t.d?t.d[0]?(e=s.precision,r=s.rounding,s.precision=e+Math.max(t.e,t.sd())+q,s.rounding=1,t=ys(s,hr(s,t)),s.precision=e,s.rounding=r,O(Ne==2||Ne==3?t.neg():t,e,r,!0)):new s(1):new s(NaN)};y.cubeRoot=y.cbrt=function(){var e,r,t,s,i,n,o,l,c,u,m=this,x=m.constructor;if(!m.isFinite()||m.isZero())return new x(m);for(_=!1,n=m.s*te(m.s*m,1/3),!n||Math.abs(n)==1/0?(t=ne(m.d),e=m.e,(n=(e-t.length+1)%3)&&(t+=n==1||n==-2?"0":"00"),n=te(t,1/3),e=oe((e+1)/3)-(e%3==(e<0?-1:2)),n==1/0?t="5e"+e:(t=n.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new x(t),s.s=m.s):s=new x(n.toString()),o=(e=x.precision)+3;;)if(l=s,c=l.times(l).times(l),u=c.plus(m),s=W(u.plus(m).times(l),u.plus(c),o+2,1),ne(l.d).slice(0,o)===(t=ne(s.d)).slice(0,o))if(t=t.slice(o-3,o+1),t=="9999"||!i&&t=="4999"){if(!i&&(O(l,e+1,0),l.times(l).times(l).eq(m))){s=l;break}o+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(O(s,e+1,1),r=!s.times(s).times(s).eq(m));break}return _=!0,O(s,e,x.rounding,r)};y.decimalPlaces=y.dp=function(){var e,r=this.d,t=NaN;if(r){if(e=r.length-1,t=(e-oe(this.e/q))*q,e=r[e],e)for(;e%10==0;e/=10)t--;t<0&&(t=0)}return t};y.dividedBy=y.div=function(e){return W(this,new this.constructor(e))};y.dividedToIntegerBy=y.divToInt=function(e){var r=this,t=r.constructor;return O(W(r,new t(e),0,1,1),t.precision,t.rounding)};y.equals=y.eq=function(e){return this.cmp(e)===0};y.floor=function(){return O(new this.constructor(this),this.e+1,3)};y.greaterThan=y.gt=function(e){return this.cmp(e)>0};y.greaterThanOrEqualTo=y.gte=function(e){var r=this.cmp(e);return r==1||r===0};y.hyperbolicCosine=y.cosh=function(){var e,r,t,s,i,n=this,o=n.constructor,l=new o(1);if(!n.isFinite())return new o(n.s?1/0:NaN);if(n.isZero())return l;t=o.precision,s=o.rounding,o.precision=t+Math.max(n.e,n.sd())+4,o.rounding=1,i=n.d.length,i<32?(e=Math.ceil(i/3),r=(1/rt(4,e)).toString()):(e=16,r="2.3283064365386962890625e-10"),n=Fe(o,1,n.times(r),new o(1),!0);for(var c,u=e,m=new o(8);u--;)c=n.times(n),n=l.minus(c.times(m.minus(c.times(m))));return O(n,o.precision=t,o.rounding=s,!0)};y.hyperbolicSine=y.sinh=function(){var e,r,t,s,i=this,n=i.constructor;if(!i.isFinite()||i.isZero())return new n(i);if(r=n.precision,t=n.rounding,n.precision=r+Math.max(i.e,i.sd())+4,n.rounding=1,s=i.d.length,s<3)i=Fe(n,2,i,i,!0);else{e=1.4*Math.sqrt(s),e=e>16?16:e|0,i=i.times(1/rt(5,e)),i=Fe(n,2,i,i,!0);for(var o,l=new n(5),c=new n(16),u=new n(20);e--;)o=i.times(i),i=i.times(l.plus(o.times(c.times(o).plus(u))))}return n.precision=r,n.rounding=t,O(i,r,t,!0)};y.hyperbolicTangent=y.tanh=function(){var e,r,t=this,s=t.constructor;return t.isFinite()?t.isZero()?new s(t):(e=s.precision,r=s.rounding,s.precision=e+7,s.rounding=1,W(t.sinh(),t.cosh(),s.precision=e,s.rounding=r)):new s(t.s)};y.inverseCosine=y.acos=function(){var e=this,r=e.constructor,t=e.abs().cmp(1),s=r.precision,i=r.rounding;return t!==-1?t===0?e.isNeg()?he(r,s,i):new r(0):new r(NaN):e.isZero()?he(r,s+4,i).times(.5):(r.precision=s+6,r.rounding=1,e=new r(1).minus(e).div(e.plus(1)).sqrt().atan(),r.precision=s,r.rounding=i,e.times(2))};y.inverseHyperbolicCosine=y.acosh=function(){var e,r,t=this,s=t.constructor;return t.lte(1)?new s(t.eq(1)?0:NaN):t.isFinite()?(e=s.precision,r=s.rounding,s.precision=e+Math.max(Math.abs(t.e),t.sd())+4,s.rounding=1,_=!1,t=t.times(t).minus(1).sqrt().plus(t),_=!0,s.precision=e,s.rounding=r,t.ln()):new s(t)};y.inverseHyperbolicSine=y.asinh=function(){var e,r,t=this,s=t.constructor;return!t.isFinite()||t.isZero()?new s(t):(e=s.precision,r=s.rounding,s.precision=e+2*Math.max(Math.abs(t.e),t.sd())+6,s.rounding=1,_=!1,t=t.times(t).plus(1).sqrt().plus(t),_=!0,s.precision=e,s.rounding=r,t.ln())};y.inverseHyperbolicTangent=y.atanh=function(){var e,r,t,s,i=this,n=i.constructor;return i.isFinite()?i.e>=0?new n(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=n.precision,r=n.rounding,s=i.sd(),Math.max(s,e)<2*-i.e-1?O(new n(i),e,r,!0):(n.precision=t=s-i.e,i=W(i.plus(1),new n(1).minus(i),t+e,1),n.precision=e+4,n.rounding=1,i=i.ln(),n.precision=e,n.rounding=r,i.times(.5))):new n(NaN)};y.inverseSine=y.asin=function(){var e,r,t,s,i=this,n=i.constructor;return i.isZero()?new n(i):(r=i.abs().cmp(1),t=n.precision,s=n.rounding,r!==-1?r===0?(e=he(n,t+4,s).times(.5),e.s=i.s,e):new n(NaN):(n.precision=t+6,n.rounding=1,i=i.div(new n(1).minus(i.times(i)).sqrt().plus(1)).atan(),n.precision=t,n.rounding=s,i.times(2)))};y.inverseTangent=y.atan=function(){var e,r,t,s,i,n,o,l,c,u=this,m=u.constructor,x=m.precision,v=m.rounding;if(u.isFinite()){if(u.isZero())return new m(u);if(u.abs().eq(1)&&x+4<=bt)return o=he(m,x+4,v).times(.25),o.s=u.s,o}else{if(!u.s)return new m(NaN);if(x+4<=bt)return o=he(m,x+4,v).times(.5),o.s=u.s,o}for(m.precision=l=x+10,m.rounding=1,t=Math.min(28,l/q+2|0),e=t;e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(_=!1,r=Math.ceil(l/q),s=1,c=u.times(u),o=new m(u),i=u;e!==-1;)if(i=i.times(c),n=o.minus(i.div(s+=2)),i=i.times(c),o=n.plus(i.div(s+=2)),o.d[r]!==void 0)for(e=r;o.d[e]===n.d[e]&&e--;);return t&&(o=o.times(2<<t-1)),_=!0,O(o,m.precision=x,m.rounding=v,!0)};y.isFinite=function(){return!!this.d};y.isInteger=y.isInt=function(){return!!this.d&&oe(this.e/q)>this.d.length-2};y.isNaN=function(){return!this.s};y.isNegative=y.isNeg=function(){return this.s<0};y.isPositive=y.isPos=function(){return this.s>0};y.isZero=function(){return!!this.d&&this.d[0]===0};y.lessThan=y.lt=function(e){return this.cmp(e)<0};y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1};y.logarithm=y.log=function(e){var r,t,s,i,n,o,l,c,u=this,m=u.constructor,x=m.precision,v=m.rounding,N=5;if(e==null)e=new m(10),r=!0;else{if(e=new m(e),t=e.d,e.s<0||!t||!t[0]||e.eq(1))return new m(NaN);r=e.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new m(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(r)if(t.length>1)n=!0;else{for(i=t[0];i%10===0;)i/=10;n=i!==1}if(_=!1,l=x+N,o=Se(u,l),s=r?Ke(m,l+10):Se(e,l),c=W(o,s,l,1),Be(c.d,i=x,v))do if(l+=10,o=Se(u,l),s=r?Ke(m,l+10):Se(e,l),c=W(o,s,l,1),!n){+ne(c.d).slice(i+1,i+15)+1==1e14&&(c=O(c,x+1,0));break}while(Be(c.d,i+=10,v));return _=!0,O(c,x,v)};y.minus=y.sub=function(e){var r,t,s,i,n,o,l,c,u,m,x,v,N=this,T=N.constructor;if(e=new T(e),!N.d||!e.d)return!N.s||!e.s?e=new T(NaN):N.d?e.s=-e.s:e=new T(e.d||N.s!==e.s?N:NaN),e;if(N.s!=e.s)return e.s=-e.s,N.plus(e);if(u=N.d,v=e.d,l=T.precision,c=T.rounding,!u[0]||!v[0]){if(v[0])e.s=-e.s;else if(u[0])e=new T(N);else return new T(c===3?-0:0);return _?O(e,l,c):e}if(t=oe(e.e/q),m=oe(N.e/q),u=u.slice(),n=m-t,n){for(x=n<0,x?(r=u,n=-n,o=v.length):(r=v,t=m,o=u.length),s=Math.max(Math.ceil(l/q),o)+2,n>s&&(n=s,r.length=1),r.reverse(),s=n;s--;)r.push(0);r.reverse()}else{for(s=u.length,o=v.length,x=s<o,x&&(o=s),s=0;s<o;s++)if(u[s]!=v[s]){x=u[s]<v[s];break}n=0}for(x&&(r=u,u=v,v=r,e.s=-e.s),o=u.length,s=v.length-o;s>0;--s)u[o++]=0;for(s=v.length;s>n;){if(u[--s]<v[s]){for(i=s;i&&u[--i]===0;)u[i]=pe-1;--u[i],u[s]+=pe}u[s]-=v[s]}for(;u[--o]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(e.d=u,e.e=tt(u,t),_?O(e,l,c):e):new T(c===3?-0:0)};y.modulo=y.mod=function(e){var r,t=this,s=t.constructor;return e=new s(e),!t.d||!e.s||e.d&&!e.d[0]?new s(NaN):!e.d||t.d&&!t.d[0]?O(new s(t),s.precision,s.rounding):(_=!1,s.modulo==9?(r=W(t,e.abs(),0,3,1),r.s*=e.s):r=W(t,e,0,s.modulo,1),r=r.times(e),_=!0,t.minus(r))};y.naturalExponential=y.exp=function(){return $t(this)};y.naturalLogarithm=y.ln=function(){return Se(this)};y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s,O(e)};y.plus=y.add=function(e){var r,t,s,i,n,o,l,c,u,m,x=this,v=x.constructor;if(e=new v(e),!x.d||!e.d)return!x.s||!e.s?e=new v(NaN):x.d||(e=new v(e.d||x.s===e.s?x:NaN)),e;if(x.s!=e.s)return e.s=-e.s,x.minus(e);if(u=x.d,m=e.d,l=v.precision,c=v.rounding,!u[0]||!m[0])return m[0]||(e=new v(x)),_?O(e,l,c):e;if(n=oe(x.e/q),s=oe(e.e/q),u=u.slice(),i=n-s,i){for(i<0?(t=u,i=-i,o=m.length):(t=m,s=n,o=u.length),n=Math.ceil(l/q),o=n>o?n+1:o+1,i>o&&(i=o,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(o=u.length,i=m.length,o-i<0&&(i=o,t=m,m=u,u=t),r=0;i;)r=(u[--i]=u[i]+m[i]+r)/pe|0,u[i]%=pe;for(r&&(u.unshift(r),++s),o=u.length;u[--o]==0;)u.pop();return e.d=u,e.e=tt(u,s),_?O(e,l,c):e};y.precision=y.sd=function(e){var r,t=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ke+e);return t.d?(r=fr(t.d),e&&t.e+1>r&&(r=t.e+1)):r=NaN,r};y.round=function(){var e=this,r=e.constructor;return O(new r(e),e.e+1,r.rounding)};y.sine=y.sin=function(){var e,r,t=this,s=t.constructor;return t.isFinite()?t.isZero()?new s(t):(e=s.precision,r=s.rounding,s.precision=e+Math.max(t.e,t.sd())+q,s.rounding=1,t=Es(s,hr(s,t)),s.precision=e,s.rounding=r,O(Ne>2?t.neg():t,e,r,!0)):new s(NaN)};y.squareRoot=y.sqrt=function(){var e,r,t,s,i,n,o=this,l=o.d,c=o.e,u=o.s,m=o.constructor;if(u!==1||!l||!l[0])return new m(!u||u<0&&(!l||l[0])?NaN:l?o:1/0);for(_=!1,u=Math.sqrt(+o),u==0||u==1/0?(r=ne(l),(r.length+c)%2==0&&(r+="0"),u=Math.sqrt(r),c=oe((c+1)/2)-(c<0||c%2),u==1/0?r="5e"+c:(r=u.toExponential(),r=r.slice(0,r.indexOf("e")+1)+c),s=new m(r)):s=new m(u.toString()),t=(c=m.precision)+3;;)if(n=s,s=n.plus(W(o,n,t+2,1)).times(.5),ne(n.d).slice(0,t)===(r=ne(s.d)).slice(0,t))if(r=r.slice(t-3,t+1),r=="9999"||!i&&r=="4999"){if(!i&&(O(n,c+1,0),n.times(n).eq(o))){s=n;break}t+=4,i=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(O(s,c+1,1),e=!s.times(s).eq(o));break}return _=!0,O(s,c,m.rounding,e)};y.tangent=y.tan=function(){var e,r,t=this,s=t.constructor;return t.isFinite()?t.isZero()?new s(t):(e=s.precision,r=s.rounding,s.precision=e+10,s.rounding=1,t=t.sin(),t.s=1,t=W(t,new s(1).minus(t.times(t)).sqrt(),e+10,0),s.precision=e,s.rounding=r,O(Ne==2||Ne==4?t.neg():t,e,r,!0)):new s(NaN)};y.times=y.mul=function(e){var r,t,s,i,n,o,l,c,u,m=this,x=m.constructor,v=m.d,N=(e=new x(e)).d;if(e.s*=m.s,!v||!v[0]||!N||!N[0])return new x(!e.s||v&&!v[0]&&!N||N&&!N[0]&&!v?NaN:!v||!N?e.s/0:e.s*0);for(t=oe(m.e/q)+oe(e.e/q),c=v.length,u=N.length,c<u&&(n=v,v=N,N=n,o=c,c=u,u=o),n=[],o=c+u,s=o;s--;)n.push(0);for(s=u;--s>=0;){for(r=0,i=c+s;i>s;)l=n[i]+N[s]*v[i-s-1]+r,n[i--]=l%pe|0,r=l/pe|0;n[i]=(n[i]+r)%pe|0}for(;!n[--o];)n.pop();return r?++t:n.shift(),e.d=n,e.e=tt(n,t),_?O(e,x.precision,x.rounding):e};y.toBinary=function(e,r){return Nt(this,2,e,r)};y.toDecimalPlaces=y.toDP=function(e,r){var t=this,s=t.constructor;return t=new s(t),e===void 0?t:(ce(e,0,Me),r===void 0?r=s.rounding:ce(r,0,8),O(t,e+t.e+1,r))};y.toExponential=function(e,r){var t,s=this,i=s.constructor;return e===void 0?t=ge(s,!0):(ce(e,0,Me),r===void 0?r=i.rounding:ce(r,0,8),s=O(new i(s),e+1,r),t=ge(s,!0,e+1)),s.isNeg()&&!s.isZero()?"-"+t:t};y.toFixed=function(e,r){var t,s,i=this,n=i.constructor;return e===void 0?t=ge(i):(ce(e,0,Me),r===void 0?r=n.rounding:ce(r,0,8),s=O(new n(i),e+i.e+1,r),t=ge(s,!1,e+s.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};y.toFraction=function(e){var r,t,s,i,n,o,l,c,u,m,x,v,N=this,T=N.d,k=N.constructor;if(!T)return new k(N);if(u=t=new k(1),s=c=new k(0),r=new k(s),n=r.e=fr(T)-N.e-1,o=n%q,r.d[0]=te(10,o<0?q+o:o),e==null)e=n>0?r:u;else{if(l=new k(e),!l.isInt()||l.lt(u))throw Error(ke+l);e=l.gt(r)?n>0?r:u:l}for(_=!1,l=new k(ne(T)),m=k.precision,k.precision=n=T.length*q*2;x=W(l,r,0,1,1),i=t.plus(x.times(s)),i.cmp(e)!=1;)t=s,s=i,i=u,u=c.plus(x.times(i)),c=i,i=r,r=l.minus(x.times(i)),l=i;return i=W(e.minus(t),s,0,1,1),c=c.plus(i.times(u)),t=t.plus(i.times(s)),c.s=u.s=N.s,v=W(u,s,n,1).minus(N).abs().cmp(W(c,t,n,1).minus(N).abs())<1?[u,s]:[c,t],k.precision=m,_=!0,v};y.toHexadecimal=y.toHex=function(e,r){return Nt(this,16,e,r)};y.toNearest=function(e,r){var t=this,s=t.constructor;if(t=new s(t),e==null){if(!t.d)return t;e=new s(1),r=s.rounding}else{if(e=new s(e),r===void 0?r=s.rounding:ce(r,0,8),!t.d)return e.s?t:e;if(!e.d)return e.s&&(e.s=t.s),e}return e.d[0]?(_=!1,t=W(t,e,0,r,1).times(e),_=!0,O(t)):(e.s=t.s,t=e),t};y.toNumber=function(){return+this};y.toOctal=function(e,r){return Nt(this,8,e,r)};y.toPower=y.pow=function(e){var r,t,s,i,n,o,l=this,c=l.constructor,u=+(e=new c(e));if(!l.d||!e.d||!l.d[0]||!e.d[0])return new c(te(+l,u));if(l=new c(l),l.eq(1))return l;if(s=c.precision,n=c.rounding,e.eq(1))return O(l,s,n);if(r=oe(e.e/q),r>=e.d.length-1&&(t=u<0?-u:u)<=bs)return i=pr(c,l,t,s),e.s<0?new c(1).div(i):O(i,s,n);if(o=l.s,o<0){if(r<e.d.length-1)return new c(NaN);if((e.d[r]&1)==0&&(o=1),l.e==0&&l.d[0]==1&&l.d.length==1)return l.s=o,l}return t=te(+l,u),r=t==0||!isFinite(t)?oe(u*(Math.log("0."+ne(l.d))/Math.LN10+l.e+1)):new c(t+"").e,r>c.maxE+1||r<c.minE-1?new c(r>0?o/0:0):(_=!1,c.rounding=l.s=1,t=Math.min(12,(r+"").length),i=$t(e.times(Se(l,s+t)),s),i.d&&(i=O(i,s+5,1),Be(i.d,s,n)&&(r=s+10,i=O($t(e.times(Se(l,r+t)),r),r+5,1),+ne(i.d).slice(s+1,s+15)+1==1e14&&(i=O(i,s+1,0)))),i.s=o,_=!0,c.rounding=n,O(i,s,n))};y.toPrecision=function(e,r){var t,s=this,i=s.constructor;return e===void 0?t=ge(s,s.e<=i.toExpNeg||s.e>=i.toExpPos):(ce(e,1,Me),r===void 0?r=i.rounding:ce(r,0,8),s=O(new i(s),e,r),t=ge(s,e<=s.e||s.e<=i.toExpNeg,e)),s.isNeg()&&!s.isZero()?"-"+t:t};y.toSignificantDigits=y.toSD=function(e,r){var t=this,s=t.constructor;return e===void 0?(e=s.precision,r=s.rounding):(ce(e,1,Me),r===void 0?r=s.rounding:ce(r,0,8)),O(new s(t),e,r)};y.toString=function(){var e=this,r=e.constructor,t=ge(e,e.e<=r.toExpNeg||e.e>=r.toExpPos);return e.isNeg()&&!e.isZero()?"-"+t:t};y.truncated=y.trunc=function(){return O(new this.constructor(this),this.e+1,1)};y.valueOf=y.toJSON=function(){var e=this,r=e.constructor,t=ge(e,e.e<=r.toExpNeg||e.e>=r.toExpPos);return e.isNeg()?"-"+t:t};function ne(e){var r,t,s,i=e.length-1,n="",o=e[0];if(i>0){for(n+=o,r=1;r<i;r++)s=e[r]+"",t=q-s.length,t&&(n+=Ce(t)),n+=s;o=e[r],s=o+"",t=q-s.length,t&&(n+=Ce(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return n+o}function ce(e,r,t){if(e!==~~e||e<r||e>t)throw Error(ke+e)}function Be(e,r,t,s){var i,n,o,l;for(n=e[0];n>=10;n/=10)--r;return--r<0?(r+=q,i=0):(i=Math.ceil((r+1)/q),r%=q),n=te(10,q-r),l=e[i]%n|0,s==null?r<3?(r==0?l=l/100|0:r==1&&(l=l/10|0),o=t<4&&l==99999||t>3&&l==49999||l==5e4||l==0):o=(t<4&&l+1==n||t>3&&l+1==n/2)&&(e[i+1]/n/100|0)==te(10,r-2)-1||(l==n/2||l==0)&&(e[i+1]/n/100|0)==0:r<4?(r==0?l=l/1e3|0:r==1?l=l/100|0:r==2&&(l=l/10|0),o=(s||t<4)&&l==9999||!s&&t>3&&l==4999):o=((s||t<4)&&l+1==n||!s&&t>3&&l+1==n/2)&&(e[i+1]/n/1e3|0)==te(10,r-3)-1,o}function We(e,r,t){for(var s,i=[0],n,o=0,l=e.length;o<l;){for(n=i.length;n--;)i[n]*=r;for(i[0]+=wt.indexOf(e.charAt(o++)),s=0;s<i.length;s++)i[s]>t-1&&(i[s+1]===void 0&&(i[s+1]=0),i[s+1]+=i[s]/t|0,i[s]%=t)}return i.reverse()}function ys(e,r){var t,s,i;if(r.isZero())return r;s=r.d.length,s<32?(t=Math.ceil(s/3),i=(1/rt(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),e.precision+=t,r=Fe(e,1,r.times(i),new e(1));for(var n=t;n--;){var o=r.times(r);r=o.times(o).minus(o).times(8).plus(1)}return e.precision-=t,r}var W=(function(){function e(s,i,n){var o,l=0,c=s.length;for(s=s.slice();c--;)o=s[c]*i+l,s[c]=o%n|0,l=o/n|0;return l&&s.unshift(l),s}function r(s,i,n,o){var l,c;if(n!=o)c=n>o?1:-1;else for(l=c=0;l<n;l++)if(s[l]!=i[l]){c=s[l]>i[l]?1:-1;break}return c}function t(s,i,n,o){for(var l=0;n--;)s[n]-=l,l=s[n]<i[n]?1:0,s[n]=l*o+s[n]-i[n];for(;!s[0]&&s.length>1;)s.shift()}return function(s,i,n,o,l,c){var u,m,x,v,N,T,k,J,V,re,F,H,ue,se,xe,we,de,Ee,ie,ve,me=s.constructor,je=s.s==i.s?1:-1,K=s.d,U=i.d;if(!K||!K[0]||!U||!U[0])return new me(!s.s||!i.s||(K?U&&K[0]==U[0]:!U)?NaN:K&&K[0]==0||!U?je*0:je/0);for(c?(N=1,m=s.e-i.e):(c=pe,N=q,m=oe(s.e/N)-oe(i.e/N)),ie=U.length,de=K.length,V=new me(je),re=V.d=[],x=0;U[x]==(K[x]||0);x++);if(U[x]>(K[x]||0)&&m--,n==null?(se=n=me.precision,o=me.rounding):l?se=n+(s.e-i.e)+1:se=n,se<0)re.push(1),T=!0;else{if(se=se/N+2|0,x=0,ie==1){for(v=0,U=U[0],se++;(x<de||v)&&se--;x++)xe=v*c+(K[x]||0),re[x]=xe/U|0,v=xe%U|0;T=v||x<de}else{for(v=c/(U[0]+1)|0,v>1&&(U=e(U,v,c),K=e(K,v,c),ie=U.length,de=K.length),we=ie,F=K.slice(0,ie),H=F.length;H<ie;)F[H++]=0;ve=U.slice(),ve.unshift(0),Ee=U[0],U[1]>=c/2&&++Ee;do v=0,u=r(U,F,ie,H),u<0?(ue=F[0],ie!=H&&(ue=ue*c+(F[1]||0)),v=ue/Ee|0,v>1?(v>=c&&(v=c-1),k=e(U,v,c),J=k.length,H=F.length,u=r(k,F,J,H),u==1&&(v--,t(k,ie<J?ve:U,J,c))):(v==0&&(u=v=1),k=U.slice()),J=k.length,J<H&&k.unshift(0),t(F,k,H,c),u==-1&&(H=F.length,u=r(U,F,ie,H),u<1&&(v++,t(F,ie<H?ve:U,H,c))),H=F.length):u===0&&(v++,F=[0]),re[x++]=v,u&&F[0]?F[H++]=K[we]||0:(F=[K[we]],H=1);while((we++<de||F[0]!==void 0)&&se--);T=F[0]!==void 0}re[0]||re.shift()}if(N==1)V.e=m,ar=T;else{for(x=1,v=re[0];v>=10;v/=10)x++;V.e=x+m*N-1,O(V,l?n+V.e+1:n,o,T)}return V}})();function O(e,r,t,s){var i,n,o,l,c,u,m,x,v,N=e.constructor;e:if(r!=null){if(x=e.d,!x)return e;for(i=1,l=x[0];l>=10;l/=10)i++;if(n=r-i,n<0)n+=q,o=r,m=x[v=0],c=m/te(10,i-o-1)%10|0;else if(v=Math.ceil((n+1)/q),l=x.length,v>=l)if(s){for(;l++<=v;)x.push(0);m=c=0,i=1,n%=q,o=n-q+1}else break e;else{for(m=l=x[v],i=1;l>=10;l/=10)i++;n%=q,o=n-q+i,c=o<0?0:m/te(10,i-o-1)%10|0}if(s=s||r<0||x[v+1]!==void 0||(o<0?m:m%te(10,i-o-1)),u=t<4?(c||s)&&(t==0||t==(e.s<0?3:2)):c>5||c==5&&(t==4||s||t==6&&(n>0?o>0?m/te(10,i-o):0:x[v-1])%10&1||t==(e.s<0?8:7)),r<1||!x[0])return x.length=0,u?(r-=e.e+1,x[0]=te(10,(q-r%q)%q),e.e=-r||0):x[0]=e.e=0,e;if(n==0?(x.length=v,l=1,v--):(x.length=v+1,l=te(10,q-n),x[v]=o>0?(m/te(10,i-o)%te(10,o)|0)*l:0),u)for(;;)if(v==0){for(n=1,o=x[0];o>=10;o/=10)n++;for(o=x[0]+=l,l=1;o>=10;o/=10)l++;n!=l&&(e.e++,x[0]==pe&&(x[0]=1));break}else{if(x[v]+=l,x[v]!=pe)break;x[v--]=0,l=1}for(n=x.length;x[--n]===0;)x.pop()}return _&&(e.e>N.maxE?(e.d=null,e.e=NaN):e.e<N.minE&&(e.e=0,e.d=[0])),e}function ge(e,r,t){if(!e.isFinite())return mr(e);var s,i=e.e,n=ne(e.d),o=n.length;return r?(t&&(s=t-o)>0?n=n.charAt(0)+"."+n.slice(1)+Ce(s):o>1&&(n=n.charAt(0)+"."+n.slice(1)),n=n+(e.e<0?"e":"e+")+e.e):i<0?(n="0."+Ce(-i-1)+n,t&&(s=t-o)>0&&(n+=Ce(s))):i>=o?(n+=Ce(i+1-o),t&&(s=t-i-1)>0&&(n=n+"."+Ce(s))):((s=i+1)<o&&(n=n.slice(0,s)+"."+n.slice(s)),t&&(s=t-o)>0&&(i+1===o&&(n+="."),n+=Ce(s))),n}function tt(e,r){var t=e[0];for(r*=q;t>=10;t/=10)r++;return r}function Ke(e,r,t){if(r>$s)throw _=!0,t&&(e.precision=t),Error(or);return O(new e(Qe),r,1,!0)}function he(e,r,t){if(r>bt)throw Error(or);return O(new e(Ye),r,t,!0)}function fr(e){var r=e.length-1,t=r*q+1;if(r=e[r],r){for(;r%10==0;r/=10)t--;for(r=e[0];r>=10;r/=10)t++}return t}function Ce(e){for(var r="";e--;)r+="0";return r}function pr(e,r,t,s){var i,n=new e(1),o=Math.ceil(s/q+4);for(_=!1;;){if(t%2&&(n=n.times(r),rr(n.d,o)&&(i=!0)),t=oe(t/2),t===0){t=n.d.length-1,i&&n.d[t]===0&&++n.d[t];break}r=r.times(r),rr(r.d,o)}return _=!0,n}function tr(e){return e.d[e.d.length-1]&1}function dr(e,r,t){for(var s,i,n=new e(r[0]),o=0;++o<r.length;){if(i=new e(r[o]),!i.s){n=i;break}s=n.cmp(i),(s===t||s===0&&n.s===t)&&(n=i)}return n}function $t(e,r){var t,s,i,n,o,l,c,u=0,m=0,x=0,v=e.constructor,N=v.rounding,T=v.precision;if(!e.d||!e.d[0]||e.e>17)return new v(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(r==null?(_=!1,c=T):c=r,l=new v(.03125);e.e>-2;)e=e.times(l),x+=5;for(s=Math.log(te(2,x))/Math.LN10*2+5|0,c+=s,t=n=o=new v(1),v.precision=c;;){if(n=O(n.times(e),c,1),t=t.times(++m),l=o.plus(W(n,t,c,1)),ne(l.d).slice(0,c)===ne(o.d).slice(0,c)){for(i=x;i--;)o=O(o.times(o),c,1);if(r==null)if(u<3&&Be(o.d,c-s,N,u))v.precision=c+=10,t=n=l=new v(1),m=0,u++;else return O(o,v.precision=T,N,_=!0);else return v.precision=T,o}o=l}}function Se(e,r){var t,s,i,n,o,l,c,u,m,x,v,N=1,T=10,k=e,J=k.d,V=k.constructor,re=V.rounding,F=V.precision;if(k.s<0||!J||!J[0]||!k.e&&J[0]==1&&J.length==1)return new V(J&&!J[0]?-1/0:k.s!=1?NaN:J?0:k);if(r==null?(_=!1,m=F):m=r,V.precision=m+=T,t=ne(J),s=t.charAt(0),Math.abs(n=k.e)<15e14){for(;s<7&&s!=1||s==1&&t.charAt(1)>3;)k=k.times(e),t=ne(k.d),s=t.charAt(0),N++;n=k.e,s>1?(k=new V("0."+t),n++):k=new V(s+"."+t.slice(1))}else return u=Ke(V,m+2,F).times(n+""),k=Se(new V(s+"."+t.slice(1)),m-T).plus(u),V.precision=F,r==null?O(k,F,re,_=!0):k;for(x=k,c=o=k=W(k.minus(1),k.plus(1),m,1),v=O(k.times(k),m,1),i=3;;){if(o=O(o.times(v),m,1),u=c.plus(W(o,new V(i),m,1)),ne(u.d).slice(0,m)===ne(c.d).slice(0,m))if(c=c.times(2),n!==0&&(c=c.plus(Ke(V,m+2,F).times(n+""))),c=W(c,new V(N),m,1),r==null)if(Be(c.d,m-T,re,l))V.precision=m+=T,u=o=k=W(x.minus(1),x.plus(1),m,1),v=O(k.times(k),m,1),i=l=1;else return O(c,V.precision=F,re,_=!0);else return V.precision=F,c;c=u,i+=2}}function mr(e){return String(e.s*e.s/0)}function Ge(e,r){var t,s,i;for((t=r.indexOf("."))>-1&&(r=r.replace(".","")),(s=r.search(/e/i))>0?(t<0&&(t=s),t+=+r.slice(s+1),r=r.substring(0,s)):t<0&&(t=r.length),s=0;r.charCodeAt(s)===48;s++);for(i=r.length;r.charCodeAt(i-1)===48;--i);if(r=r.slice(s,i),r){if(i-=s,e.e=t=t-s-1,e.d=[],s=(t+1)%q,t<0&&(s+=q),s<i){for(s&&e.d.push(+r.slice(0,s)),i-=q;s<i;)e.d.push(+r.slice(s,s+=q));r=r.slice(s),s=q-r.length}else s-=i;for(;s--;)r+="0";e.d.push(+r),_&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Ns(e,r){var t,s,i,n,o,l,c,u,m;if(r.indexOf("_")>-1){if(r=r.replace(/(\d)_(?=\d)/g,"$1"),ur.test(r))return Ge(e,r)}else if(r==="Infinity"||r==="NaN")return+r||(e.s=NaN),e.e=NaN,e.d=null,e;if(ws.test(r))t=16,r=r.toLowerCase();else if(xs.test(r))t=2;else if(vs.test(r))t=8;else throw Error(ke+r);for(n=r.search(/p/i),n>0?(c=+r.slice(n+1),r=r.substring(2,n)):r=r.slice(2),n=r.indexOf("."),o=n>=0,s=e.constructor,o&&(r=r.replace(".",""),l=r.length,n=l-n,i=pr(s,new s(t),n,n*2)),u=We(r,t,pe),m=u.length-1,n=m;u[n]===0;--n)u.pop();return n<0?new s(e.s*0):(e.e=tt(u,m),e.d=u,_=!1,o&&(e=W(e,i,l*4)),c&&(e=e.times(Math.abs(c)<54?te(2,c):D.pow(2,c))),_=!0,e)}function Es(e,r){var t,s=r.d.length;if(s<3)return r.isZero()?r:Fe(e,2,r,r);t=1.4*Math.sqrt(s),t=t>16?16:t|0,r=r.times(1/rt(5,t)),r=Fe(e,2,r,r);for(var i,n=new e(5),o=new e(16),l=new e(20);t--;)i=r.times(r),r=r.times(n.plus(i.times(o.times(i).minus(l))));return r}function Fe(e,r,t,s,i){var n,o,l,c,u=e.precision,m=Math.ceil(u/q);for(_=!1,c=t.times(t),l=new e(s);;){if(o=W(l.times(c),new e(r++*r++),u,1),l=i?s.plus(o):s.minus(o),s=W(o.times(c),new e(r++*r++),u,1),o=l.plus(s),o.d[m]!==void 0){for(n=m;o.d[n]===l.d[n]&&n--;);if(n==-1)break}n=l,l=s,s=o,o=n}return _=!0,o.d.length=m+1,o}function rt(e,r){for(var t=e;--r;)t*=e;return t}function hr(e,r){var t,s=r.s<0,i=he(e,e.precision,1),n=i.times(.5);if(r=r.abs(),r.lte(n))return Ne=s?4:1,r;if(t=r.divToInt(i),t.isZero())Ne=s?3:2;else{if(r=r.minus(t.times(i)),r.lte(n))return Ne=tr(t)?s?2:3:s?4:1,r;Ne=tr(t)?s?1:4:s?3:2}return r.minus(i).abs()}function Nt(e,r,t,s){var i,n,o,l,c,u,m,x,v,N=e.constructor,T=t!==void 0;if(T?(ce(t,1,Me),s===void 0?s=N.rounding:ce(s,0,8)):(t=N.precision,s=N.rounding),!e.isFinite())m=mr(e);else{for(m=ge(e),o=m.indexOf("."),T?(i=2,r==16?t=t*4-3:r==8&&(t=t*3-2)):i=r,o>=0&&(m=m.replace(".",""),v=new N(1),v.e=m.length-o,v.d=We(ge(v),10,i),v.e=v.d.length),x=We(m,10,i),n=c=x.length;x[--c]==0;)x.pop();if(!x[0])m=T?"0p+0":"0";else{if(o<0?n--:(e=new N(e),e.d=x,e.e=n,e=W(e,v,t,s,0,i),x=e.d,n=e.e,u=ar),o=x[t],l=i/2,u=u||x[t+1]!==void 0,u=s<4?(o!==void 0||u)&&(s===0||s===(e.s<0?3:2)):o>l||o===l&&(s===4||u||s===6&&x[t-1]&1||s===(e.s<0?8:7)),x.length=t,u)for(;++x[--t]>i-1;)x[t]=0,t||(++n,x.unshift(1));for(c=x.length;!x[c-1];--c);for(o=0,m="";o<c;o++)m+=wt.charAt(x[o]);if(T){if(c>1)if(r==16||r==8){for(o=r==16?4:3,--c;c%o;c++)m+="0";for(x=We(m,i,r),c=x.length;!x[c-1];--c);for(o=1,m="1.";o<c;o++)m+=wt.charAt(x[o])}else m=m.charAt(0)+"."+m.slice(1);m=m+(n<0?"p":"p+")+n}else if(n<0){for(;++n;)m="0"+m;m="0."+m}else if(++n>c)for(n-=c;n--;)m+="0";else n<c&&(m=m.slice(0,n)+"."+m.slice(n))}m=(r==16?"0x":r==2?"0b":r==8?"0o":"")+m}return e.s<0?"-"+m:m}function rr(e,r){if(e.length>r)return e.length=r,!0}function js(e){return new this(e).abs()}function As(e){return new this(e).acos()}function Cs(e){return new this(e).acosh()}function Ss(e,r){return new this(e).plus(r)}function ks(e){return new this(e).asin()}function Ms(e){return new this(e).asinh()}function Os(e){return new this(e).atan()}function Rs(e){return new this(e).atanh()}function Ps(e,r){e=new this(e),r=new this(r);var t,s=this.precision,i=this.rounding,n=s+4;return!e.s||!r.s?t=new this(NaN):!e.d&&!r.d?(t=he(this,n,1).times(r.s>0?.25:.75),t.s=e.s):!r.d||e.isZero()?(t=r.s<0?he(this,s,i):new this(0),t.s=e.s):!e.d||r.isZero()?(t=he(this,n,1).times(.5),t.s=e.s):r.s<0?(this.precision=n,this.rounding=1,t=this.atan(W(e,r,n,1)),r=he(this,n,1),this.precision=s,this.rounding=i,t=e.s<0?t.minus(r):t.plus(r)):t=this.atan(W(e,r,n,1)),t}function Ts(e){return new this(e).cbrt()}function qs(e){return O(e=new this(e),e.e+1,2)}function _s(e,r,t){return new this(e).clamp(r,t)}function Ls(e){if(!e||typeof e!="object")throw Error(et+"Object expected");var r,t,s,i=e.defaults===!0,n=["precision",1,Me,"rounding",0,8,"toExpNeg",-Le,0,"toExpPos",0,Le,"maxE",0,Le,"minE",-Le,0,"modulo",0,9];for(r=0;r<n.length;r+=3)if(t=n[r],i&&(this[t]=vt[t]),(s=e[t])!==void 0)if(oe(s)===s&&s>=n[r+1]&&s<=n[r+2])this[t]=s;else throw Error(ke+t+": "+s);if(t="crypto",i&&(this[t]=vt[t]),(s=e[t])!==void 0)if(s===!0||s===!1||s===0||s===1)if(s)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(lr);else this[t]=!1;else throw Error(ke+t+": "+s);return this}function Fs(e){return new this(e).cos()}function Ds(e){return new this(e).cosh()}function gr(e){var r,t,s;function i(n){var o,l,c,u=this;if(!(u instanceof i))return new i(n);if(u.constructor=i,sr(n)){u.s=n.s,_?!n.d||n.e>i.maxE?(u.e=NaN,u.d=null):n.e<i.minE?(u.e=0,u.d=[0]):(u.e=n.e,u.d=n.d.slice()):(u.e=n.e,u.d=n.d?n.d.slice():n.d);return}if(c=typeof n,c==="number"){if(n===0){u.s=1/n<0?-1:1,u.e=0,u.d=[0];return}if(n<0?(n=-n,u.s=-1):u.s=1,n===~~n&&n<1e7){for(o=0,l=n;l>=10;l/=10)o++;_?o>i.maxE?(u.e=NaN,u.d=null):o<i.minE?(u.e=0,u.d=[0]):(u.e=o,u.d=[n]):(u.e=o,u.d=[n]);return}if(n*0!==0){n||(u.s=NaN),u.e=NaN,u.d=null;return}return Ge(u,n.toString())}if(c==="string")return(l=n.charCodeAt(0))===45?(n=n.slice(1),u.s=-1):(l===43&&(n=n.slice(1)),u.s=1),ur.test(n)?Ge(u,n):Ns(u,n);if(c==="bigint")return n<0?(n=-n,u.s=-1):u.s=1,Ge(u,n.toString());throw Error(ke+n)}if(i.prototype=y,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=Ls,i.clone=gr,i.isDecimal=sr,i.abs=js,i.acos=As,i.acosh=Cs,i.add=Ss,i.asin=ks,i.asinh=Ms,i.atan=Os,i.atanh=Rs,i.atan2=Ps,i.cbrt=Ts,i.ceil=qs,i.clamp=_s,i.cos=Fs,i.cosh=Ds,i.div=Us,i.exp=Vs,i.floor=Is,i.hypot=Bs,i.ln=Zs,i.log=zs,i.log10=Hs,i.log2=Js,i.max=Ws,i.min=Gs,i.mod=Xs,i.mul=Qs,i.pow=Ys,i.random=Ks,i.round=en,i.sign=tn,i.sin=rn,i.sinh=sn,i.sqrt=nn,i.sub=an,i.sum=on,i.tan=ln,i.tanh=cn,i.trunc=un,e===void 0&&(e={}),e&&e.defaults!==!0)for(s=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<s.length;)e.hasOwnProperty(t=s[r++])||(e[t]=this[t]);return i.config(e),i}function Us(e,r){return new this(e).div(r)}function Vs(e){return new this(e).exp()}function Is(e){return O(e=new this(e),e.e+1,3)}function Bs(){var e,r,t=new this(0);for(_=!1,e=0;e<arguments.length;)if(r=new this(arguments[e++]),r.d)t.d&&(t=t.plus(r.times(r)));else{if(r.s)return _=!0,new this(1/0);t=r}return _=!0,t.sqrt()}function sr(e){return e instanceof D||e&&e.toStringTag===cr||!1}function Zs(e){return new this(e).ln()}function zs(e,r){return new this(e).log(r)}function Js(e){return new this(e).log(2)}function Hs(e){return new this(e).log(10)}function Ws(){return dr(this,arguments,-1)}function Gs(){return dr(this,arguments,1)}function Xs(e,r){return new this(e).mod(r)}function Qs(e,r){return new this(e).mul(r)}function Ys(e,r){return new this(e).pow(r)}function Ks(e){var r,t,s,i,n=0,o=new this(1),l=[];if(e===void 0?e=this.precision:ce(e,1,Me),s=Math.ceil(e/q),this.crypto)if(crypto.getRandomValues)for(r=crypto.getRandomValues(new Uint32Array(s));n<s;)i=r[n],i>=429e7?r[n]=crypto.getRandomValues(new Uint32Array(1))[0]:l[n++]=i%1e7;else if(crypto.randomBytes){for(r=crypto.randomBytes(s*=4);n<s;)i=r[n]+(r[n+1]<<8)+(r[n+2]<<16)+((r[n+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(r,n):(l.push(i%1e7),n+=4);n=s/4}else throw Error(lr);else for(;n<s;)l[n++]=Math.random()*1e7|0;for(s=l[--n],e%=q,s&&e&&(i=te(10,q-e),l[n]=(s/i|0)*i);l[n]===0;n--)l.pop();if(n<0)t=0,l=[0];else{for(t=-1;l[0]===0;t-=q)l.shift();for(s=1,i=l[0];i>=10;i/=10)s++;s<q&&(t-=q-s)}return o.e=t,o.d=l,o}function en(e){return O(e=new this(e),e.e+1,this.rounding)}function tn(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function rn(e){return new this(e).sin()}function sn(e){return new this(e).sinh()}function nn(e){return new this(e).sqrt()}function an(e,r){return new this(e).sub(r)}function on(){var e=0,r=arguments,t=new this(r[e]);for(_=!1;t.s&&++e<r.length;)t=t.plus(r[e]);return _=!0,O(t,this.precision,this.rounding)}function ln(e){return new this(e).tan()}function cn(e){return new this(e).tanh()}function un(e){return O(e=new this(e),e.e+1,1)}y[Symbol.for("nodejs.util.inspect.custom")]=y.toString;y[Symbol.toStringTag]="Decimal";var D=y.constructor=gr(vt);Qe=new D(Qe);Ye=new D(Ye);class nr extends SyntaxError{constructor(r,t,s,i){super(r),this.expected=t,this.found=s,this.location=i,this.name="SyntaxError"}format(r){let t="Error: "+this.message;if(this.location){let s=null;const i=r.find(c=>c.source===this.location.source);i&&(s=i.text.split(/\r\n|\n|\r/g));const n=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(n):n,l=this.location.source+":"+o.line+":"+o.column;if(s){const c=this.location.end,u="".padEnd(o.line.toString().length," "),m=s[n.line-1],v=(n.line===c.line?c.column:m.length+1)-n.column||1;t+=`
 --> `+l+`
`+u+` |
`+o.line+" | "+m+`
`+u+" | "+"".padEnd(n.column-1," ")+"".padEnd(v,"^")}else t+=`
 at `+l}return t}static buildMessage(r,t){function s(v){return v.codePointAt(0).toString(16).toUpperCase()}const i=Object.prototype.hasOwnProperty.call(RegExp.prototype,"unicode")?new RegExp("[\\p{C}\\p{Mn}\\p{Mc}]","gu"):null;function n(v){return i?v.replace(i,N=>"\\u{"+s(N)+"}"):v}function o(v){return n(v.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,N=>"\\x0"+s(N)).replace(/[\x10-\x1F\x7F-\x9F]/g,N=>"\\x"+s(N)))}function l(v){return n(v.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,N=>"\\x0"+s(N)).replace(/[\x10-\x1F\x7F-\x9F]/g,N=>"\\x"+s(N)))}const c={literal(v){return'"'+o(v.text)+'"'},class(v){const N=v.parts.map(T=>Array.isArray(T)?l(T[0])+"-"+l(T[1]):l(T));return"["+(v.inverted?"^":"")+N.join("")+"]"+(v.unicode?"u":"")},any(){return"any character"},end(){return"end of input"},other(v){return v.description}};function u(v){return c[v.type](v)}function m(v){const N=v.map(u);if(N.sort(),N.length>0){let T=1;for(let k=1;k<N.length;k++)N[k-1]!==N[k]&&(N[T]=N[k],T++);N.length=T}switch(N.length){case 1:return N[0];case 2:return N[0]+" or "+N[1];default:return N.slice(0,-1).join(", ")+", or "+N[N.length-1]}}function x(v){return v?'"'+o(v)+'"':"end of input"}return"Expected "+m(r)+" but "+x(t)+" found."}}function xr(e,r){r=r!==void 0?r:{};const t={},s=r.grammarSource,i={Expression:Ae};let n=Ae;const o="?",l=":",c="||",u="??",m="&&",x="!=",v="==",N="=",T="<=",k=">=",J="**",V="(",re=")",F="[",H="]",ue=".",se='"',xe="'",we=",",de="true",Ee="false",ie="null",ve=/^[<>]/,me=/^[+\-]/,je=/^[%*\/]/,K=/^[!+\-]/,U=/^[0-9]/,Te=/^[eE]/,w=/^[a-zA-Z0-9_$]/,A=/^[a-zA-Z_$]/,M=/^[ \t\n\r]/,P=Y("?",!1),L=Y(":",!1),B=Y("||",!1),z=Y("??",!1),X=Y("&&",!1),I=Y("!=",!1),ee=Y("==",!1),Q=Y("=",!1),jt=Y("<=",!1),At=Y(">=",!1),Ct=be(["<",">"],!1,!1,!1),nt=be(["+","-"],!1,!1,!1),St=be(["%","*","/"],!1,!1,!1),vr=Y("**",!1),br=be(["!","+","-"],!1,!1,!1),it=Y("(",!1),at=Y(")",!1),kt=Y("[",!1),Mt=Y("]",!1),ot=Y(".",!1),lt=Y('"',!1),ct=Y("'",!1),Ot=zr(),Rt=Y(",",!1),qe=be([["0","9"]],!1,!1,!1),$r=be(["e","E"],!1,!1,!1),yr=Y("true",!1),De=be([["a","z"],["A","Z"],["0","9"],"_","$"],!1,!1,!1),Nr=Y("false",!1),Er=Y("null",!1),jr=be([["a","z"],["A","Z"],"_","$"],!1,!1,!1),Pt=be([" ","	",`
`,"\r"],!1,!1,!1);function An(f){return f}function Ar(f,d,b){return{type:"ConditionalExpression",test:f,consequent:d,alternate:b}}function Cr(f,d){return d.reduce((b,p)=>({type:"LogicalExpression",operator:p[1],left:b,right:p[3]}),f)}function Sr(f,d){return d.reduce((b,p)=>({type:"LogicalExpression",operator:p[1],left:b,right:p[3]}),f)}function kr(f,d){return Je(f,d)}function Mr(f,d){return Je(f,d)}function Or(f,d){return Je(f,d)}function Rr(f,d){return Je(f,d)}function Pr(f,d){return d?{type:"BinaryExpression",operator:"**",left:f,right:d[3]}:f}function Tr(f,d){return{type:"UnaryExpression",operator:f,argument:d,prefix:!0}}function Tt(f,d){return{type:"call",args:d||[]}}function qt(f,d){return{type:"member",property:d,computed:!0}}function _t(f,d){return{type:"member",property:d,computed:!1}}function qr(f,d){return d.reduce((b,p)=>p.type==="call"?{type:"CallExpression",callee:b,arguments:p.args}:{type:"MemberExpression",object:b,property:p.property,computed:p.computed},f)}function _r(f){return{type:"Literal",value:f.join(""),raw:'"'+f.join("")+'"'}}function Lr(f){return{type:"Literal",value:f.join(""),raw:"'"+f.join("")+"'"}}function Cn(f){return f}function Sn(f){return f}function Fr(f,d){return[f].concat(d.map(b=>b[3]))}function kn(f){return f}function Dr(f){return{type:"Literal",value:parseFloat(f),raw:f}}function Ur(){return{type:"Literal",value:!0,raw:"true"}}function Vr(){return{type:"Literal",value:!1,raw:"false"}}function Ir(){return{type:"Literal",value:null,raw:"null"}}function Br(f){return{type:"Identifier",name:f}}let a=r.peg$currPos|0;const _e=[{line:1,column:1}];let fe=a,Ze=r.peg$maxFailExpected||[],E=r.peg$silentFails|0,Ue;if(r.startRule){if(!(r.startRule in i))throw new Error(`Can't start parsing from rule "`+r.startRule+'".');n=i[r.startRule]}function Zr(f=a){const d=e.codePointAt(f);return d===void 0?"":String.fromCodePoint(d)}function Y(f,d){return{type:"literal",text:f,ignoreCase:d}}function be(f,d,b,p){return{type:"class",parts:f,inverted:d,ignoreCase:b,unicode:p}}function zr(){return{type:"any"}}function Jr(){return{type:"end"}}function Lt(f){let d=_e[f],b;if(d)return d;if(f>=_e.length)b=_e.length-1;else for(b=f;!_e[--b];);for(d=_e[b],d={line:d.line,column:d.column};b<f;)e.charCodeAt(b)===10?(d.line++,d.column=1):d.column++,b++;return _e[f]=d,d}function Ft(f,d,b){const p=Lt(f),$=Lt(d);return{source:s,start:{offset:f,line:p.line,column:p.column},end:{offset:d,line:$.line,column:$.column}}}function j(f){a<fe||(a>fe&&(fe=a,Ze=[]),Ze.push(f))}function Hr(f,d,b){return new nr(nr.buildMessage(f,d),f,d,b)}function Ae(){let f,d;return f=a,R(),d=Dt(),d!==t?(R(),f=d):(a=f,f=t),f}function Dt(){let f,d,b,p,$,g;return f=a,d=Ut(),d!==t?(R(),e.charCodeAt(a)===63?(b=o,a++):(b=t,E===0&&j(P)),b!==t?(R(),p=Ae(),p!==t?(R(),e.charCodeAt(a)===58?($=l,a++):($=t,E===0&&j(L)),$!==t?(R(),g=Dt(),g!==t?f=Ar(d,p,g):(a=f,f=t)):(a=f,f=t)):(a=f,f=t)):(a=f,f=t)):(a=f,f=t),f===t&&(f=Ut()),f}function Ut(){let f,d,b,p,$,g,C,S;if(f=a,d=ut(),d!==t){for(b=[],p=a,$=R(),e.substr(a,2)===c?(g=c,a+=2):(g=t,E===0&&j(B)),g===t&&(e.substr(a,2)===u?(g=u,a+=2):(g=t,E===0&&j(z))),g!==t?(C=R(),S=ut(),S!==t?($=[$,g,C,S],p=$):(a=p,p=t)):(a=p,p=t);p!==t;)b.push(p),p=a,$=R(),e.substr(a,2)===c?(g=c,a+=2):(g=t,E===0&&j(B)),g===t&&(e.substr(a,2)===u?(g=u,a+=2):(g=t,E===0&&j(z))),g!==t?(C=R(),S=ut(),S!==t?($=[$,g,C,S],p=$):(a=p,p=t)):(a=p,p=t);f=Cr(d,b)}else a=f,f=t;return f}function ut(){let f,d,b,p,$,g,C,S;if(f=a,d=ft(),d!==t){for(b=[],p=a,$=R(),e.substr(a,2)===m?(g=m,a+=2):(g=t,E===0&&j(X)),g!==t?(C=R(),S=ft(),S!==t?($=[$,g,C,S],p=$):(a=p,p=t)):(a=p,p=t);p!==t;)b.push(p),p=a,$=R(),e.substr(a,2)===m?(g=m,a+=2):(g=t,E===0&&j(X)),g!==t?(C=R(),S=ft(),S!==t?($=[$,g,C,S],p=$):(a=p,p=t)):(a=p,p=t);f=Sr(d,b)}else a=f,f=t;return f}function ft(){let f,d,b,p,$,g,C,S;if(f=a,d=pt(),d!==t){for(b=[],p=a,$=R(),e.substr(a,2)===x?(g=x,a+=2):(g=t,E===0&&j(I)),g===t&&(e.substr(a,2)===v?(g=v,a+=2):(g=t,E===0&&j(ee)),g===t&&(e.charCodeAt(a)===61?(g=N,a++):(g=t,E===0&&j(Q)))),g!==t?(C=R(),S=pt(),S!==t?($=[$,g,C,S],p=$):(a=p,p=t)):(a=p,p=t);p!==t;)b.push(p),p=a,$=R(),e.substr(a,2)===x?(g=x,a+=2):(g=t,E===0&&j(I)),g===t&&(e.substr(a,2)===v?(g=v,a+=2):(g=t,E===0&&j(ee)),g===t&&(e.charCodeAt(a)===61?(g=N,a++):(g=t,E===0&&j(Q)))),g!==t?(C=R(),S=pt(),S!==t?($=[$,g,C,S],p=$):(a=p,p=t)):(a=p,p=t);f=kr(d,b)}else a=f,f=t;return f}function pt(){let f,d,b,p,$,g,C,S;if(f=a,d=dt(),d!==t){for(b=[],p=a,$=R(),e.substr(a,2)===T?(g=T,a+=2):(g=t,E===0&&j(jt)),g===t&&(e.substr(a,2)===k?(g=k,a+=2):(g=t,E===0&&j(At)),g===t&&(g=e.charAt(a),ve.test(g)?a++:(g=t,E===0&&j(Ct)))),g!==t?(C=R(),S=dt(),S!==t?($=[$,g,C,S],p=$):(a=p,p=t)):(a=p,p=t);p!==t;)b.push(p),p=a,$=R(),e.substr(a,2)===T?(g=T,a+=2):(g=t,E===0&&j(jt)),g===t&&(e.substr(a,2)===k?(g=k,a+=2):(g=t,E===0&&j(At)),g===t&&(g=e.charAt(a),ve.test(g)?a++:(g=t,E===0&&j(Ct)))),g!==t?(C=R(),S=dt(),S!==t?($=[$,g,C,S],p=$):(a=p,p=t)):(a=p,p=t);f=Mr(d,b)}else a=f,f=t;return f}function dt(){let f,d,b,p,$,g,C,S;if(f=a,d=mt(),d!==t){for(b=[],p=a,$=R(),g=e.charAt(a),me.test(g)?a++:(g=t,E===0&&j(nt)),g!==t?(C=R(),S=mt(),S!==t?($=[$,g,C,S],p=$):(a=p,p=t)):(a=p,p=t);p!==t;)b.push(p),p=a,$=R(),g=e.charAt(a),me.test(g)?a++:(g=t,E===0&&j(nt)),g!==t?(C=R(),S=mt(),S!==t?($=[$,g,C,S],p=$):(a=p,p=t)):(a=p,p=t);f=Or(d,b)}else a=f,f=t;return f}function mt(){let f,d,b,p,$,g,C,S;if(f=a,d=ze(),d!==t){for(b=[],p=a,$=R(),g=e.charAt(a),je.test(g)?a++:(g=t,E===0&&j(St)),g!==t?(C=R(),S=ze(),S!==t?($=[$,g,C,S],p=$):(a=p,p=t)):(a=p,p=t);p!==t;)b.push(p),p=a,$=R(),g=e.charAt(a),je.test(g)?a++:(g=t,E===0&&j(St)),g!==t?(C=R(),S=ze(),S!==t?($=[$,g,C,S],p=$):(a=p,p=t)):(a=p,p=t);f=Rr(d,b)}else a=f,f=t;return f}function ze(){let f,d,b,p,$,g,C;return f=a,d=Vt(),d!==t?(b=a,p=R(),e.substr(a,2)===J?($=J,a+=2):($=t,E===0&&j(vr)),$!==t?(g=R(),C=ze(),C!==t?(p=[p,$,g,C],b=p):(a=b,b=t)):(a=b,b=t),b===t&&(b=null),f=Pr(d,b)):(a=f,f=t),f}function Vt(){let f,d,b;return f=a,d=e.charAt(a),K.test(d)?a++:(d=t,E===0&&j(br)),d!==t?(R(),b=Vt(),b!==t?f=Tr(d,b):(a=f,f=t)):(a=f,f=t),f===t&&(f=Wr()),f}function Wr(){let f,d,b,p,$,g,C;if(f=a,d=Xr(),d!==t){for(b=[],p=a,R(),e.charCodeAt(a)===40?($=V,a++):($=t,E===0&&j(it)),$!==t?(R(),g=zt(),g===t&&(g=null),R(),e.charCodeAt(a)===41?(C=re,a++):(C=t,E===0&&j(at)),C!==t?p=Tt(d,g):(a=p,p=t)):(a=p,p=t),p===t&&(p=a,R(),e.charCodeAt(a)===91?($=F,a++):($=t,E===0&&j(kt)),$!==t?(R(),g=It(),g!==t?(R(),e.charCodeAt(a)===93?(C=H,a++):(C=t,E===0&&j(Mt)),C!==t?p=qt(d,g):(a=p,p=t)):(a=p,p=t)):(a=p,p=t),p===t&&(p=a,R(),e.charCodeAt(a)===46?($=ue,a++):($=t,E===0&&j(ot)),$!==t?(R(),g=ht(),g!==t?p=_t(d,g):(a=p,p=t)):(a=p,p=t)));p!==t;)b.push(p),p=a,R(),e.charCodeAt(a)===40?($=V,a++):($=t,E===0&&j(it)),$!==t?(R(),g=zt(),g===t&&(g=null),R(),e.charCodeAt(a)===41?(C=re,a++):(C=t,E===0&&j(at)),C!==t?p=Tt(d,g):(a=p,p=t)):(a=p,p=t),p===t&&(p=a,R(),e.charCodeAt(a)===91?($=F,a++):($=t,E===0&&j(kt)),$!==t?(R(),g=It(),g!==t?(R(),e.charCodeAt(a)===93?(C=H,a++):(C=t,E===0&&j(Mt)),C!==t?p=qt(d,g):(a=p,p=t)):(a=p,p=t)):(a=p,p=t),p===t&&(p=a,R(),e.charCodeAt(a)===46?($=ue,a++):($=t,E===0&&j(ot)),$!==t?(R(),g=ht(),g!==t?p=_t(d,g):(a=p,p=t)):(a=p,p=t)));f=qr(d,b)}else a=f,f=t;return f}function It(){let f;return f=Gr(),f===t&&(f=Ae()),f}function Gr(){let f,d,b,p;if(f=a,e.charCodeAt(a)===34?(d=se,a++):(d=t,E===0&&j(lt)),d!==t){for(b=[],p=Bt();p!==t;)b.push(p),p=Bt();e.charCodeAt(a)===34?(p=se,a++):(p=t,E===0&&j(lt)),p!==t?f=_r(b):(a=f,f=t)}else a=f,f=t;if(f===t)if(f=a,e.charCodeAt(a)===39?(d=xe,a++):(d=t,E===0&&j(ct)),d!==t){for(b=[],p=Zt();p!==t;)b.push(p),p=Zt();e.charCodeAt(a)===39?(p=xe,a++):(p=t,E===0&&j(ct)),p!==t?f=Lr(b):(a=f,f=t)}else a=f,f=t;return f}function Bt(){let f,d,b;return f=a,d=a,E++,e.charCodeAt(a)===34?(b=se,a++):(b=t,E===0&&j(lt)),E--,b===t?d=void 0:(a=d,d=t),d!==t?(e.length>a?(b=e.charAt(a),a++):(b=t,E===0&&j(Ot)),b!==t?f=b:(a=f,f=t)):(a=f,f=t),f}function Zt(){let f,d,b;return f=a,d=a,E++,e.charCodeAt(a)===39?(b=xe,a++):(b=t,E===0&&j(ct)),E--,b===t?d=void 0:(a=d,d=t),d!==t?(e.length>a?(b=e.charAt(a),a++):(b=t,E===0&&j(Ot)),b!==t?f=b:(a=f,f=t)):(a=f,f=t),f}function zt(){let f,d,b,p,$,g,C,S;if(f=a,d=Ae(),d!==t){for(b=[],p=a,$=R(),e.charCodeAt(a)===44?(g=we,a++):(g=t,E===0&&j(Rt)),g!==t?(C=R(),S=Ae(),S!==t?($=[$,g,C,S],p=$):(a=p,p=t)):(a=p,p=t);p!==t;)b.push(p),p=a,$=R(),e.charCodeAt(a)===44?(g=we,a++):(g=t,E===0&&j(Rt)),g!==t?(C=R(),S=Ae(),S!==t?($=[$,g,C,S],p=$):(a=p,p=t)):(a=p,p=t);f=Fr(d,b)}else a=f,f=t;return f}function Xr(){let f,d,b,p;return f=Qr(),f===t&&(f=ht(),f===t&&(f=a,e.charCodeAt(a)===40?(d=V,a++):(d=t,E===0&&j(it)),d!==t?(R(),b=Ae(),b!==t?(R(),e.charCodeAt(a)===41?(p=re,a++):(p=t,E===0&&j(at)),p!==t?f=b:(a=f,f=t)):(a=f,f=t)):(a=f,f=t))),f}function Qr(){let f;return f=Yr(),f===t&&(f=Kr(),f===t&&(f=es())),f}function Yr(){let f,d,b,p,$,g,C,S,Ve,$e;if(f=a,d=a,b=a,p=[],$=e.charAt(a),U.test($)?a++:($=t,E===0&&j(qe)),$!==t)for(;$!==t;)p.push($),$=e.charAt(a),U.test($)?a++:($=t,E===0&&j(qe));else p=t;if(p!==t){if($=a,e.charCodeAt(a)===46?(g=ue,a++):(g=t,E===0&&j(ot)),g!==t){if(C=[],S=e.charAt(a),U.test(S)?a++:(S=t,E===0&&j(qe)),S!==t)for(;S!==t;)C.push(S),S=e.charAt(a),U.test(S)?a++:(S=t,E===0&&j(qe));else C=t;C!==t?(g=[g,C],$=g):(a=$,$=t)}else a=$,$=t;if($===t&&($=null),g=a,C=e.charAt(a),Te.test(C)?a++:(C=t,E===0&&j($r)),C!==t){if(S=e.charAt(a),me.test(S)?a++:(S=t,E===0&&j(nt)),S===t&&(S=null),Ve=[],$e=e.charAt(a),U.test($e)?a++:($e=t,E===0&&j(qe)),$e!==t)for(;$e!==t;)Ve.push($e),$e=e.charAt(a),U.test($e)?a++:($e=t,E===0&&j(qe));else Ve=t;Ve!==t?(C=[C,S,Ve],g=C):(a=g,g=t)}else a=g,g=t;g===t&&(g=null),p=[p,$,g],b=p}else a=b,b=t;return b!==t?d=e.substring(d,a):d=b,d!==t&&(d=Dr(d)),f=d,f}function Kr(){let f,d,b,p;return f=a,e.substr(a,4)===de?(d=de,a+=4):(d=t,E===0&&j(yr)),d!==t?(b=a,E++,p=e.charAt(a),w.test(p)?a++:(p=t,E===0&&j(De)),E--,p===t?b=void 0:(a=b,b=t),b!==t?f=Ur():(a=f,f=t)):(a=f,f=t),f===t&&(f=a,e.substr(a,5)===Ee?(d=Ee,a+=5):(d=t,E===0&&j(Nr)),d!==t?(b=a,E++,p=e.charAt(a),w.test(p)?a++:(p=t,E===0&&j(De)),E--,p===t?b=void 0:(a=b,b=t),b!==t?f=Vr():(a=f,f=t)):(a=f,f=t)),f}function es(){let f,d,b,p;return f=a,e.substr(a,4)===ie?(d=ie,a+=4):(d=t,E===0&&j(Er)),d!==t?(b=a,E++,p=e.charAt(a),w.test(p)?a++:(p=t,E===0&&j(De)),E--,p===t?b=void 0:(a=b,b=t),b!==t?f=Ir():(a=f,f=t)):(a=f,f=t),f}function ht(){let f,d,b,p,$,g;if(f=a,d=a,b=a,p=e.charAt(a),A.test(p)?a++:(p=t,E===0&&j(jr)),p!==t){for($=[],g=e.charAt(a),w.test(g)?a++:(g=t,E===0&&j(De));g!==t;)$.push(g),g=e.charAt(a),w.test(g)?a++:(g=t,E===0&&j(De));p=[p,$],b=p}else a=b,b=t;return b!==t?d=e.substring(d,a):d=b,d!==t&&(d=Br(d)),f=d,f}function R(){let f,d;for(E++,f=[],d=e.charAt(a),M.test(d)?a++:(d=t,E===0&&j(Pt));d!==t;)f.push(d),d=e.charAt(a),M.test(d)?a++:(d=t,E===0&&j(Pt));return E--,f}function Je(f,d){return d.reduce((b,p)=>({type:"BinaryExpression",operator:p[1],left:b,right:p[3]}),f)}Ue=n();const gt=Ue!==t&&a===e.length;function Jt(){throw Ue!==t&&a<e.length&&j(Jr()),Hr(Ze,fe<e.length?Zr(fe):null,fe<e.length?Ft(fe,fe+1):Ft(fe,fe))}if(r.peg$library)return{peg$result:Ue,peg$currPos:a,peg$FAILED:t,peg$maxFailExpected:Ze,peg$maxFailPos:fe,peg$success:gt,peg$throw:gt?void 0:Jt};if(gt)return Ue;Jt()}const fn=e=>{const r=new Set,t=s=>{if(!(!s||typeof s!="object"))switch(s.type){case"Identifier":r.add(s.name);break;case"MemberExpression":t(s.object),s.computed&&t(s.property);break;case"BinaryExpression":case"LogicalExpression":t(s.left),t(s.right);break;case"UnaryExpression":t(s.argument);break;case"CallExpression":if(t(s.callee),s.arguments)for(const i of s.arguments)t(i);break;case"ConditionalExpression":t(s.test),t(s.consequent),t(s.alternate);break;case"ArrayExpression":if(s.elements)for(const i of s.elements)t(i);break;case"ObjectExpression":if(s.properties)for(const i of s.properties)i.type==="Property"?(i.computed&&t(i.key),t(i.value)):i.type==="SpreadElement"&&t(i.argument);break}};return t(e),Array.from(r).filter(s=>!s.startsWith("$"))};class Pe extends Error{constructor(r){super(r),this.name="EvallaError",Object.setPrototypeOf(this,Pe.prototype)}}class st extends Pe{constructor(r,t){super(r),this.name="SecurityError",this.property=t,Object.setPrototypeOf(this,st.prototype)}}class Et extends Pe{constructor(r,t){super(r),this.name="CircularDependencyError",this.cycle=t,Object.setPrototypeOf(this,Et.prototype)}}class ye extends Pe{constructor(r,t){super(r),this.name="ValidationError",this.variableName=t,Object.setPrototypeOf(this,ye.prototype)}}class G extends Pe{constructor(r,t){super(r),this.name="EvaluationError",this.variableName=t,Object.setPrototypeOf(this,G.prototype)}}class Oe extends G{constructor(r,t){super(r,t?.variableName),this.name="ParseError",this.expression=t?.expression,this.line=t?.line,this.column=t?.column,Object.setPrototypeOf(this,Oe.prototype)}}const pn=e=>{try{return xr(e.trim())}catch(r){if(r.location){const{line:t,column:s}=r.location.start;throw new Oe(`Parse error at line ${t}, column ${s}: ${r.message}`,{line:t,column:s,expression:e})}throw new Oe(`Parse error: ${r.message}`,{expression:e})}},dn=e=>fn(e),mn=e=>{const r=new Map,t=new Set,s=new Map;for(const c of e)if(t.add(c.name),c.expr&&c.expr.trim())try{const u=pn(c.expr);s.set(c.name,u)}catch(u){throw u instanceof Oe?new Oe(`Failed to parse expression for "${c.name}": ${u.message}`,{variableName:c.name,expression:c.expr,line:u.line,column:u.column}):new Oe(`Failed to parse expression for "${c.name}": ${u instanceof Error?u.message:String(u)}`,{variableName:c.name,expression:c.expr})}for(const c of e){if(!c.expr||!c.expr.trim()){r.set(c.name,[]);continue}const u=s.get(c.name);if(!u)throw new G(`No AST found for: ${c.name}`);const x=dn(u).filter(v=>t.has(v));r.set(c.name,x)}const i=new Set,n=new Set,o=[],l=(c,u=[])=>{if(i.has(c))return;if(n.has(c)){const x=[...u,c];throw new Et(`Circular dependency detected: ${x.join(" -> ")}`,x)}n.add(c);const m=r.get(c)||[];for(const x of m)t.has(x)&&l(x,[...u,c]);n.delete(c),i.add(c),o.push(c)};for(const c of t)l(c);return{order:o,asts:s}},Z=e=>e instanceof D?e:new D(e),Xe=Symbol("NAMESPACE_HEAD"),yt=e=>e!=null&&typeof e=="object"&&e[Xe]===!0,hn=()=>{const e=Object.create(null);return e.$math=Object.create(null),e.$math[Xe]=!0,e.$math.PI=new D(-1).acos(),e.$math.E=new D(1).exp(),e.$math.SQRT2=new D(2).sqrt(),e.$math.SQRT1_2=new D(.5).sqrt(),e.$math.LN2=new D(2).ln(),e.$math.LN10=new D(10).ln(),e.$math.LOG2E=e.$math.E.log(2),e.$math.LOG10E=e.$math.E.log(10),e.$math.abs=r=>Z(r).abs(),e.$math.sqrt=r=>Z(r).sqrt(),e.$math.cbrt=r=>Z(r).cbrt(),e.$math.floor=r=>Z(r).floor(),e.$math.ceil=r=>Z(r).ceil(),e.$math.round=r=>Z(r).round(),e.$math.trunc=r=>Z(r).trunc(),e.$math.sin=r=>new D(Math.sin(Z(r).toNumber())),e.$math.cos=r=>new D(Math.cos(Z(r).toNumber())),e.$math.tan=r=>new D(Math.tan(Z(r).toNumber())),e.$math.asin=r=>new D(Math.asin(Z(r).toNumber())),e.$math.acos=r=>new D(Math.acos(Z(r).toNumber())),e.$math.atan=r=>new D(Math.atan(Z(r).toNumber())),e.$math.atan2=(r,t)=>new D(Math.atan2(Z(r).toNumber(),Z(t).toNumber())),e.$math.exp=r=>Z(r).exp(),e.$math.ln=r=>Z(r).ln(),e.$math.log=r=>Z(r).log(),e.$math.log10=r=>Z(r).log(10),e.$math.log2=r=>Z(r).log(2),e.$math.pow=(r,t)=>Z(r).pow(Z(t)),e.$math.min=(...r)=>D.min(...r.map(Z)),e.$math.max=(...r)=>D.max(...r.map(Z)),e.$unit=Object.create(null),e.$unit[Xe]=!0,e.$unit.mmToInch=r=>Z(r).div(25.4),e.$unit.inchToMm=r=>Z(r).mul(25.4),e.$unit.cmToInch=r=>Z(r).div(2.54),e.$unit.inchToCm=r=>Z(r).mul(2.54),e.$unit.mToFt=r=>Z(r).mul(3.28084),e.$unit.ftToM=r=>Z(r).div(3.28084),e.$angle=Object.create(null),e.$angle[Xe]=!0,e.$angle.toRad=r=>Z(r).mul(e.$math.PI).div(180),e.$angle.toDeg=r=>Z(r).mul(180).div(e.$math.PI),e},gn=new Set(["prototype","__proto__","constructor"]),xn=e=>!(gn.has(e)||e.startsWith("__")),ae=async(e,r)=>{switch(e.type){case"Literal":return typeof e.value=="number"?new D(e.raw||e.value):e.value;case"Identifier":if(!(e.name in r))throw new G(`Undefined variable: ${e.name}`);return r[e.name];case"MemberExpression":const t=await ae(e.object,r);if(t==null)throw new G(`Cannot access property of ${t}`);let s;if(e.computed){const v=await ae(e.property,r);s=String(v)}else s=e.property.name;if(!xn(s))throw new st(`Access to property "${s}" is not allowed for security reasons`,s);return t[s];case"BinaryExpression":const i=await ae(e.left,r),n=await ae(e.right,r);return wn(e.operator,i,n);case"UnaryExpression":const o=await ae(e.argument,r);return vn(e.operator,o);case"CallExpression":const l=await ae(e.callee,r),c=[];for(const v of e.arguments)c.push(await ae(v,r));if(typeof l!="function")throw new G("Callee is not a function");let u=null;return e.callee.type==="MemberExpression"&&(u=await ae(e.callee.object,r)),l.apply(u,c);case"ConditionalExpression":return await ae(e.test,r)?await ae(e.consequent,r):await ae(e.alternate,r);case"LogicalExpression":const x=await ae(e.left,r);if(e.operator==="&&")return x&&await ae(e.right,r);if(e.operator==="||")return x||await ae(e.right,r);if(e.operator==="??")return x??await ae(e.right,r);throw new G(`Unsupported logical operator: ${e.operator}`);default:throw new G(`Unsupported node type: ${e.type}`)}},wn=(e,r,t)=>{if(yt(r)||yt(t))throw new G("Cannot use namespace head in operations - namespace heads must be used with property access (e.g., $math.PI) or method calls (e.g., $math.abs(x))");const s=["+","-","*","/","%","**"],i=["<",">","<=",">="];if(s.includes(e)||i.includes(e)){if(typeof r=="string")throw new G(`Cannot use string in ${e} operation - strings are not supported in mathematical expressions`);if(typeof r=="object"&&r!==null&&!(r instanceof D)&&!Array.isArray(r))throw new G(`Cannot use object in ${e} operation - only numeric values are allowed`);if(Array.isArray(r))throw new G(`Cannot use array in ${e} operation - only numeric values are allowed`);if(typeof t=="string")throw new G(`Cannot use string in ${e} operation - strings are not supported in mathematical expressions`);if(typeof t=="object"&&t!==null&&!(t instanceof D)&&!Array.isArray(t))throw new G(`Cannot use object in ${e} operation - only numeric values are allowed`);if(Array.isArray(t))throw new G(`Cannot use array in ${e} operation - only numeric values are allowed`)}if(e==="=="||e==="="||e==="!="){if(r instanceof D&&t instanceof D){const l=r.eq(t);return e==="!="?!l:l}if(typeof r=="boolean"||r===null||typeof t=="boolean"||t===null){const l=r===t;return e==="!="?!l:l}const o=r==t;return e==="!="?!o:o}const n=o=>o instanceof D?o:new D(o);switch(e){case"+":return n(r).plus(n(t));case"-":return n(r).minus(n(t));case"*":return n(r).times(n(t));case"/":return n(r).div(n(t));case"%":return n(r).mod(n(t));case"**":return n(r).pow(n(t));case"<":return n(r).lt(n(t));case">":return n(r).gt(n(t));case"<=":return n(r).lte(n(t));case">=":return n(r).gte(n(t));default:throw new G(`Unsupported binary operator: ${e}`)}},vn=(e,r)=>{switch(e){case"-":case"+":if(typeof r=="string")throw new G(`Cannot use string with unary ${e} - strings are not supported in mathematical expressions`);if(typeof r=="object"&&r!==null&&!(r instanceof D)&&!Array.isArray(r))throw new G(`Cannot use object with unary ${e} - only numeric values are allowed`);if(Array.isArray(r))throw new G(`Cannot use array with unary ${e} - only numeric values are allowed`);return e==="-"?r instanceof D?r.neg():-r:r instanceof D?r:+r;case"!":return!r;default:throw new G(`Unsupported unary operator: ${e}`)}},bn=async(e,r)=>{try{const t=hn(),s=Object.create(null);for(const[n,o]of Object.entries(r))s[n]=o;for(const[n,o]of Object.entries(t))s[n]=o;const i=await ae(e,s);if(yt(i))throw new G("Cannot use namespace head as a value - namespace heads must be used with property access (e.g., $math.PI) or method calls (e.g., $math.abs(x))");if(typeof i=="function")throw new st("Cannot alias functions - functions must be called with parentheses");if(typeof i=="object"&&i!==null&&!(i instanceof D))throw Array.isArray(i)?new G("Expressions cannot return arrays - arrays must be provided via the value property"):new G("Expressions cannot return objects - objects must be provided via the value property");if(typeof i=="string"){if(!isNaN(Number(i)))return new D(i);throw new G("Expressions cannot return strings - strings must be provided via the value property")}if(i instanceof D)return i;if(typeof i=="number")return new D(i);if(typeof i=="boolean"||i===null)return i;if(i===void 0)return null;throw new G(`Unsupported expression result type: ${typeof i}`)}catch(t){throw t instanceof Pe?t:new Error(`Failed to evaluate expression: ${t instanceof Error?t.message:String(t)}`)}},$n=/^(?![_$]{2})[a-zA-Z_][a-zA-Z0-9_$]*$/,yn=Object.freeze(["true","false","null","Infinity"]),wr=e=>typeof e!="string"?{valid:!1,error:"Variable name must be a string"}:e.trim()===""?{valid:!1,error:"Variable name cannot be empty"}:e!==e.trim()?{valid:!1,error:"Variable name cannot have leading or trailing whitespace"}:e.startsWith("$")?{valid:!1,error:"Variable names cannot start with $ (reserved for system namespaces)"}:e.startsWith("__")?{valid:!1,error:"Variable names cannot start with __ (reserved for security reasons)"}:yn.includes(e)?{valid:!1,error:`Variable name cannot be a reserved value: ${e}`}:/^\d/.test(e)?{valid:!1,error:"Variable names cannot start with a number"}:e.includes(".")?{valid:!1,error:"Variable names cannot contain dots (dots are only for property access in expressions)"}:$n.test(e)?{valid:!0}:{valid:!1,error:"Variable name contains invalid characters (only letters, digits, underscore, or $ allowed)"},Nn=e=>{if(typeof e!="string")return{valid:!1,error:"Expression must be a string"};const r=e.trim();if(r==="")return{valid:!1,error:"Expression cannot be empty"};try{return xr(r),{valid:!0}}catch(t){if(t.location){const{line:s,column:i}=t.location.start;return{valid:!1,error:`Parse error at line ${s}, column ${i}: ${t.message}`,line:s,column:i}}return{valid:!1,error:`Parse error: ${t.message||String(t)}`}}};function En(e,r){const{decimalPlaces:t}=r;if(typeof t!="number"||t<0||!Number.isInteger(t))throw new Error("decimalPlaces must be a non-negative integer");const s={};for(const[i,n]of Object.entries(e.values))n instanceof D&&n.isFinite()?s[i]=n.toDecimalPlaces(t):s[i]=n;return{values:s,order:e.order}}const jn=async e=>{if(!Array.isArray(e))throw new ye("Input must be an array");for(const l of e){if(!l||typeof l!="object")throw new ye("Each input must be an object");if(typeof l.name!="string"||!l.name)throw new ye('Each input must have a non-empty string "name"');const c=wr(l.name);if(!c.valid)throw new ye(`${c.error}: ${l.name}`,l.name);if(l.expr===void 0&&l.value===void 0)throw new ye(`Each input must have either "expr" or "value": ${l.name}`,l.name);if(l.expr!==void 0&&typeof l.expr!="string")throw new ye(`"expr" must be a string if provided: ${l.name}`,l.name)}const r=new Set;for(const l of e){if(r.has(l.name))throw new ye(`Duplicate name: ${l.name}`,l.name);r.add(l.name)}const{order:t,asts:s}=mn(e),i=new Map;for(const l of e)l.value!==void 0&&i.set(l.name,l.value);const n=Object.create(null),o=Object.create(null);for(const l of t){let c;if(i.has(l))c=i.get(l);else{const u=s.get(l);u?c=await bn(u,o):c=null}c instanceof D||typeof c=="boolean"||c===null?(n[l]=c,o[l]=c):(o[l]=c,typeof c=="number"&&(n[l]=new D(c)))}return{values:n,order:t}};function On(){const[e,r]=le.useState([{name:"a",expr:"10",mode:"expr"},{name:"b",expr:"a * 2",mode:"expr"},{name:"c",expr:"a + b",mode:"expr"}]),[t,s]=le.useState(null),[i,n]=le.useState(null),[o,l]=le.useState(null),[c,u]=le.useState(new Map),[m,x]=le.useState(new Map),[v,N]=le.useState(4),[T,k]=le.useState("all"),J=le.useRef(new Map),V=le.useRef(new Map),re=w=>w.valueRaw!==void 0?w.valueRaw:w.value?JSON.stringify(w.value,null,2):"",F=(w,A,M,P,L)=>{const B="w-full px-3 py-2 text-sm border rounded font-mono focus:outline-none focus:ring-2";return w?`${B} border-orange-400 bg-orange-50 focus:ring-orange-500`:o===A?`${B} border-red-300 bg-white focus:ring-blue-500`:M==="value"&&(P||L)?`${B} border-purple-400 bg-white focus:ring-purple-500`:M==="expr"||!M&&!P?`${B} border-teal-400 bg-white focus:ring-teal-500`:`${B} border-gray-300 bg-white focus:ring-blue-500`},H=(w,A,M)=>{const P=[...e];if(A==="value"){P[w].valueRaw=M;try{P[w].value=M?JSON.parse(M):void 0}catch{P[w].value=void 0}}else P[w][A]=M;if(r(P),A==="name"){const L=V.current.get(w);L&&clearTimeout(L);const B=setTimeout(()=>{const z=wr(M);x(X=>{const I=new Map(X);return z.valid?I.delete(w):I.set(w,z.error||"Invalid variable name"),I})},300);V.current.set(w,B)}if(A==="expr"&&P[w].mode==="expr"){const L=J.current.get(w);if(L&&clearTimeout(L),!M.trim()){const z=new Map(c);z.delete(w),u(z);return}const B=setTimeout(()=>{const z=Nn(M);u(X=>{const I=new Map(X);return z.valid?I.delete(w):I.set(w,z.error||"Syntax error"),I})},300);J.current.set(w,B)}if(A==="value"&&P[w].mode==="value"){const L=J.current.get(w);if(L&&clearTimeout(L),!M.trim()){const z=new Map(c);z.delete(w),u(z);return}const B=setTimeout(()=>{try{JSON.parse(M),u(z=>{const X=new Map(z);return X.delete(w),X})}catch(z){u(X=>{const I=new Map(X);return I.set(w,z instanceof Error?z.message:"Invalid JSON"),I})}},300);J.current.set(w,B)}},ue=(w="expr")=>{r([...e,{name:`var${v}`,expr:w==="expr"?"":void 0,value:void 0,mode:w}]),N(v+1)},se=w=>{const A=J.current.get(w);A&&(clearTimeout(A),J.current.delete(w));const M=V.current.get(w);M&&(clearTimeout(M),V.current.delete(w)),r(e.filter((ee,Q)=>Q!==w));const P=new Map(c),L=new Map(m);P.delete(w),L.delete(w);const B=new Map,z=new Map,X=new Map,I=new Map;P.forEach((ee,Q)=>{Q>w?B.set(Q-1,ee):B.set(Q,ee)}),L.forEach((ee,Q)=>{Q>w?z.set(Q-1,ee):z.set(Q,ee)}),J.current.forEach((ee,Q)=>{Q>w?X.set(Q-1,ee):Q!==w&&X.set(Q,ee)}),V.current.forEach((ee,Q)=>{Q>w?I.set(Q-1,ee):Q!==w&&I.set(Q,ee)}),u(B),x(z),J.current=X,V.current=I},xe=()=>{r(w=>w.filter(A=>A.mode!=="value")),u(new Map),x(new Map),J.current.clear(),V.current.clear()},we=()=>{r(w=>w.filter(A=>A.mode==="value")),u(new Map),x(new Map),J.current.clear(),V.current.clear()},de=()=>{const w=document.createElement("input");w.type="file",w.accept=".json",w.onchange=A=>{const M=A.target.files?.[0];if(M){const P=new FileReader;P.onload=L=>{try{const B=JSON.parse(L.target?.result),z=[];Object.entries(B).forEach(([X,I])=>{z.push({name:X,value:I,mode:"value"})}),r(X=>[...X.filter(I=>I.mode!=="value"),...z])}catch(B){n("Failed to parse JSON file: "+(B instanceof Error?B.message:"Unknown error"))}},P.readAsText(M)}},w.click()},Ee=async()=>{try{const w=await navigator.clipboard.readText(),A=JSON.parse(w);Object.entries(A).forEach(([M,P])=>{r(L=>[...L,{name:M,value:P,mode:"value"}])})}catch(w){n("Failed to parse JSON from clipboard: "+(w instanceof Error?w.message:"Unknown error"))}},ie=()=>{const w=document.createElement("input");w.type="file",w.accept=".json,.txt",w.onchange=A=>{const M=A.target.files?.[0];if(M){const P=new FileReader;P.onload=L=>{try{const B=L.target?.result,z=JSON.parse(B),X=[];Array.isArray(z)?z.forEach(I=>{I.name&&(I.expr!==void 0||I.value!==void 0)&&X.push({name:I.name,expr:I.expr,value:I.value,mode:I.mode||(I.value!==void 0?"value":"expr")})}):Object.entries(z).forEach(([I,ee])=>{X.push({name:I,expr:String(ee),mode:"expr"})}),r(I=>[...I.filter(ee=>ee.mode==="value"),...X])}catch(B){n("Failed to parse expressions file: "+(B instanceof Error?B.message:"Unknown error"))}},P.readAsText(M)}},w.click()},ve=async()=>{try{const w=await navigator.clipboard.readText(),A=JSON.parse(w);Array.isArray(A)?A.forEach(M=>{M.name&&(M.expr!==void 0||M.value!==void 0)&&r(P=>[...P,{name:M.name,expr:M.expr,value:M.value,mode:M.mode||(M.value!==void 0?"value":"expr")}])}):Object.entries(A).forEach(([M,P])=>{r(L=>[...L,{name:M,expr:String(P),mode:"expr"}])})}catch(w){n("Failed to parse expressions from clipboard: "+(w instanceof Error?w.message:"Unknown error"))}},me=()=>{const A=e.filter(B=>B.mode==="expr").map(B=>({name:B.name,expr:B.expr||""})),M=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),P=URL.createObjectURL(M),L=document.createElement("a");L.href=P,L.download="expressions.json",L.click(),URL.revokeObjectURL(P)},je=w=>{const A=er[w];A&&(r(A.expressions),s(null),n(null),l(null),u(new Map),x(new Map))},K=async()=>{if(n(null),l(null),c.size>0){const w=Array.from(c.keys())[0],A=c.get(w);n(`Cannot evaluate: ${A}`),l(w);return}if(m.size>0){const w=Array.from(m.keys())[0],A=m.get(w);n(`Cannot evaluate: ${A}`),l(w);return}try{const w=e.filter(P=>P.name.trim()?P.mode==="value"?P.value!==void 0&&P.value!=="":P.expr!==void 0:!1).map(P=>P.mode==="value"?{name:P.name,value:P.value}:{name:P.name,expr:P.expr||""});if(w.length===0){n("Please add at least one expression");return}const A=await jn(w),M=T==="all"?A:En(A,{decimalPlaces:parseInt(T)});s(M)}catch(w){if(n(w.message),s(null),w.variableName){const A=e.findIndex(M=>M.name===w.variableName);A!==-1&&l(A)}}},U=e.filter(w=>w.mode==="value").map(w=>({...w,originalIndex:e.indexOf(w)})),Te=e.filter(w=>w.mode!=="value").map(w=>({...w,originalIndex:e.indexOf(w)}));return h.jsxs("div",{className:"content",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("h2",{style:{marginTop:"2rem"},children:"Playground"}),h.jsx("p",{className:"text-gray-600 text-sm sm:text-base mb-4",children:"Define variables with math expressions. They can reference each other and will be evaluated in the correct order automatically."}),h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Examples"}),h.jsxs("select",{onChange:w=>w.target.value&&je(w.target.value),defaultValue:"",className:"px-3 py-2 text-sm border border-gray-300 rounded bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[h.jsx("option",{value:"",disabled:!0,children:"Choose an example"}),Object.entries(er).map(([w,{name:A}])=>h.jsx("option",{value:w,children:A},w))]})]}),h.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-3 sm:p-4 mb-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("h3",{className:"text-lg font-semibold text-purple-900",children:"Values (JSON)"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:Ee,className:"px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Paste JSON from clipboard",children:[h.jsx(Xt,{size:14}),h.jsx("span",{children:"Paste"})]}),h.jsxs("button",{onClick:de,className:"px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Upload JSON file",children:[h.jsx(Yt,{size:14}),h.jsx("span",{children:"Upload"})]}),U.length>0&&h.jsxs("button",{onClick:xe,className:"px-3 py-1.5 bg-gray-500 hover:bg-gray-600 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Clear all values",children:[h.jsx(Kt,{size:14}),h.jsx("span",{children:"Clear All"})]})]})]}),h.jsx("p",{className:"text-purple-800 text-xs sm:text-sm mb-3 italic",children:"Values are JSON objects/arrays that can be referenced in expressions but do not appear in the evaluation results."}),U.length>0?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"hidden sm:grid sm:grid-cols-[150px_1fr_auto] gap-2 mb-2 text-sm font-medium text-purple-900",children:[h.jsx("div",{children:"Name"}),h.jsx("div",{children:"JSON Value"}),h.jsx("div",{className:"w-[90px]"})]}),h.jsx("div",{className:"space-y-4 sm:space-y-2",children:U.map(({originalIndex:w,...A})=>{const M=c.has(w),P=m.has(w);return h.jsxs("div",{className:`${o===w?"bg-red-50 -mx-2 px-2 py-1 rounded":""}`,children:[h.jsxs("div",{className:"hidden sm:grid sm:grid-cols-[150px_1fr_auto] gap-2 items-start",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("input",{type:"text",placeholder:"e.g. point",value:A.name,onChange:L=>H(w,"name",L.target.value),className:F(P,w,A.mode,!1,!0)}),P&&h.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:m.get(w)})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("textarea",{rows:3,value:re(A),onChange:L=>H(w,"value",L.target.value),className:F(M,w,A.mode,!0),placeholder:'{"x": 10, "y": 20}'}),M&&h.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:c.get(w)})]}),h.jsxs("button",{onClick:()=>se(w),className:"w-24 px-3 py-2 bg-gray-500 hover:bg-gray-600 text-white text-sm rounded transition-colors flex items-center gap-1.5 justify-center",children:[h.jsx(He,{size:16}),h.jsx("span",{children:"Remove"})]})]}),h.jsxs("div",{className:"sm:hidden flex gap-2",children:[h.jsxs("div",{className:"flex-1 space-y-1",children:[h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx("label",{className:"text-xs font-medium text-purple-900 w-12",children:"Name"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("input",{type:"text",placeholder:"e.g. point",value:A.name,onChange:L=>H(w,"name",L.target.value),className:F(P,w,A.mode,!1,!0)}),P&&h.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:m.get(w)})]})]}),h.jsxs("div",{className:"flex gap-2 items-start",children:[h.jsx("label",{className:"text-xs font-medium text-purple-900 w-12 mt-2",children:"Value"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("textarea",{rows:3,value:re(A),onChange:L=>H(w,"value",L.target.value),className:F(M,w,A.mode,!0),placeholder:'{"x": 10, "y": 20}'}),M&&h.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:c.get(w)})]})]})]}),h.jsx("button",{onClick:()=>se(w),className:"p-2 bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors self-center",children:h.jsx(He,{size:16})})]})]},w)})})]}):h.jsx("p",{className:"text-purple-700 text-sm italic text-center py-4",children:"No values defined. Add values to use in your expressions."}),h.jsx("div",{className:"flex justify-end gap-2 mt-3",children:h.jsxs("button",{onClick:()=>ue("value"),className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white text-sm rounded transition-colors flex items-center gap-1.5",children:[h.jsx(Qt,{size:16}),h.jsx("span",{children:"Add Value"})]})})]}),h.jsxs("div",{className:"bg-teal-50 border-2 border-teal-200 rounded-lg p-3 sm:p-4 mb-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("h3",{className:"text-lg font-semibold text-teal-900",children:"Expressions"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:ve,className:"px-3 py-1.5 bg-teal-600 hover:bg-teal-700 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Paste expressions from clipboard",children:[h.jsx(Xt,{size:14}),h.jsx("span",{children:"Paste"})]}),h.jsxs("button",{onClick:ie,className:"px-3 py-1.5 bg-teal-600 hover:bg-teal-700 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Upload expressions file",children:[h.jsx(Yt,{size:14}),h.jsx("span",{children:"Upload"})]}),h.jsxs("button",{onClick:me,className:"px-3 py-1.5 bg-teal-600 hover:bg-teal-700 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Download expressions",disabled:Te.length===0,children:[h.jsx(cs,{size:14}),h.jsx("span",{children:"Download"})]}),Te.length>0&&h.jsxs("button",{onClick:we,className:"px-3 py-1.5 bg-gray-500 hover:bg-gray-600 text-white text-xs rounded transition-colors flex items-center gap-1",title:"Clear all expressions",children:[h.jsx(Kt,{size:14}),h.jsx("span",{children:"Clear All"})]})]})]}),h.jsx("p",{className:"text-teal-800 text-xs sm:text-sm mb-3 italic",children:"Expressions are mathematical formulas that will be evaluated and appear in the results."}),Te.length>0?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"hidden sm:grid sm:grid-cols-[150px_1fr_auto] gap-2 mb-2 text-sm font-medium text-teal-900",children:[h.jsx("div",{children:"Name"}),h.jsx("div",{children:"Expression"}),h.jsx("div",{className:"w-[90px]"})]}),h.jsx("div",{className:"space-y-4 sm:space-y-2",children:Te.map(({originalIndex:w,...A})=>{const M=c.has(w),P=m.has(w);return h.jsxs("div",{className:`${o===w?"bg-red-50 -mx-2 px-2 py-1 rounded":""}`,children:[h.jsxs("div",{className:"hidden sm:grid sm:grid-cols-[150px_1fr_auto] gap-2 items-start",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("input",{type:"text",placeholder:"e.g. radius",value:A.name,onChange:L=>H(w,"name",L.target.value),className:F(P,w,A.mode,!1,!0)}),P&&h.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:m.get(w)})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("input",{type:"text",placeholder:"e.g. a + b",value:A.expr||"",onChange:L=>H(w,"expr",L.target.value),className:F(M,w,A.mode,!1,!1)}),M&&h.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:c.get(w)})]}),h.jsxs("button",{onClick:()=>se(w),className:"w-24 px-3 py-2 bg-gray-500 hover:bg-gray-600 text-white text-sm rounded transition-colors flex items-center gap-1.5 justify-center",children:[h.jsx(He,{size:16}),h.jsx("span",{children:"Remove"})]})]}),h.jsxs("div",{className:"sm:hidden flex gap-2",children:[h.jsxs("div",{className:"flex-1 space-y-1",children:[h.jsxs("div",{className:"flex gap-2 items-center",children:[h.jsx("label",{className:"text-xs font-medium text-teal-900 w-12",children:"Name"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("input",{type:"text",placeholder:"e.g. radius",value:A.name,onChange:L=>H(w,"name",L.target.value),className:F(P,w,A.mode,!1,!0)}),P&&h.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:m.get(w)})]})]}),h.jsxs("div",{className:"flex gap-2 items-start",children:[h.jsx("label",{className:"text-xs font-medium text-teal-900 w-12 mt-2",children:"Expr"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("input",{type:"text",placeholder:"e.g. a + b",value:A.expr||"",onChange:L=>H(w,"expr",L.target.value),className:F(M,w,A.mode,!1,!1)}),M&&h.jsx("div",{className:"text-orange-600 text-xs mt-1 font-mono",children:c.get(w)})]})]})]}),h.jsx("button",{onClick:()=>se(w),className:"p-2 bg-gray-500 hover:bg-gray-600 text-white rounded transition-colors self-center",children:h.jsx(He,{size:16})})]})]},w)})})]}):h.jsx("p",{className:"text-teal-700 text-sm italic text-center py-4",children:"No expressions defined. Add expressions to calculate results."}),h.jsx("div",{className:"flex justify-end gap-2 mt-3",children:h.jsxs("button",{onClick:()=>ue("expr"),className:"px-4 py-2 bg-teal-500 hover:bg-teal-600 text-white text-sm rounded transition-colors flex items-center gap-1.5",children:[h.jsx(Qt,{size:16}),h.jsx("span",{children:"Add Expression"})]})})]})]}),i&&h.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded",children:h.jsx("p",{className:"text-red-700 font-mono text-sm",children:i})}),h.jsx("div",{className:"mb-6",children:h.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[h.jsx("h3",{className:"text-xl sm:text-2xl font-semibold text-gray-800 mb-3",children:"Results"}),h.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[h.jsx("label",{htmlFor:"decimal-places",className:"text-sm text-gray-600 whitespace-nowrap",children:"Decimal places:"}),h.jsxs("select",{id:"decimal-places",value:T,onChange:w=>k(w.target.value),className:"px-2 py-1.5 text-sm border border-gray-300 rounded bg-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[h.jsx("option",{value:"all",children:"All"}),h.jsx("option",{value:"0",children:"0"}),h.jsx("option",{value:"2",children:"2"}),h.jsx("option",{value:"4",children:"4"}),h.jsx("option",{value:"6",children:"6"}),h.jsx("option",{value:"7",children:"7"}),h.jsx("option",{value:"10",children:"10"})]})]}),h.jsxs("div",{className:"flex gap-2 mb-4",children:[h.jsxs("button",{onClick:K,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded font-semibold transition-colors flex items-center gap-1.5",children:[h.jsx(ps,{size:18}),h.jsx("span",{children:"Evaluate"})]}),t&&h.jsx("button",{onClick:()=>s(null),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white text-sm rounded font-semibold transition-colors",children:"Reset"})]}),t?h.jsxs(h.Fragment,{children:[h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"border-b border-green-200",children:[h.jsx("th",{className:"text-left py-2 font-medium text-gray-600",children:"Name"}),h.jsx("th",{className:"text-left py-2 font-medium text-gray-600",children:"Value"})]})}),h.jsx("tbody",{children:Object.entries(t.values).map(([w,A])=>{const M=A===null?"null":typeof A=="boolean"?String(A):A.toString();return h.jsxs("tr",{children:[h.jsx("td",{className:"py-2 px-2 font-mono text-gray-700",children:w}),h.jsx("td",{className:"py-2 px-2 font-mono text-green-700 font-semibold break-all",children:M})]},w)})})]}),h.jsxs("div",{className:"mt-4 text-gray-600 text-xs sm:text-sm italic",children:["Evaluation order: ",t.order.join("  ")]})]}):h.jsx("p",{className:"text-gray-500 text-sm italic",children:"Click Evaluate to see results"})]})}),h.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-600 rounded-lg p-4 sm:p-6",children:[h.jsx("h3",{className:"text-lg sm:text-xl font-semibold text-blue-900 mb-3",children:"Quick Tips"}),h.jsxs("ul",{className:"space-y-1.5 text-gray-700 text-sm sm:text-base",children:[h.jsxs("li",{children:[" Variables can reference other variables (e.g., ",h.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"b = a * 2"}),")"]}),h.jsxs("li",{children:[" Use decimal precision math (e.g., ",h.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"0.1 + 0.2"})," = 0.3 exactly!)"]}),h.jsxs("li",{children:[" Access nested properties with dots (e.g., ",h.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"point.x"}),")"]}),h.jsxs("li",{children:[" Use ",h.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"$math"})," functions: ",h.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"$math.sqrt(16)"}),", ",h.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"$math.PI"}),", etc."]}),h.jsxs("li",{children:[" Convert units: ",h.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"$unit.mmToInch(25.4)"})]}),h.jsxs("li",{children:[" Convert angles: ",h.jsx("code",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-xs sm:text-sm",children:"$angle.toRad(180)"})]})]})]})]})}export{On as default};
